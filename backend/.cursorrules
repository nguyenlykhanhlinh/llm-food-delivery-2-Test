# M√¥ t·∫£ D·ª± √Ån:
## T√äN ƒê·ªÄ T√ÄI: AutoGPT: Chatbot AI ƒêa NƒÉng T∆∞ V·∫•n v√† ƒê·∫∑t M√≥n ƒÇn Tr·ª±c Tuy·∫øn
AutoGPT l√† m·ªôt chatbot AI Agent th√¥ng minh, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ t·ª± ƒë·ªông h√≥a quy tr√¨nh t∆∞ v·∫•n v√† ƒë·∫∑t m√≥n ƒÉn tr·ª±c tuy·∫øn -> c·ª• th·ªÉ ·ªü ƒë√¢y l√† t·ª± ƒë·ªông ƒë·∫∑t ƒë·ªì ƒÉn v√† th√™m m√≥n ƒÉn v√†o gi·ªè h√†ng, mang ƒë·∫øn tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√† v√† ti·ªán l·ª£i th√¥ng qua c·∫£ giao ti·∫øp b·∫±ng vƒÉn b·∫£n v√† gi·ªçng n√≥i.

## M·ª•c ti√™u:
D·ª± √°n n√†y t·∫≠p trung v√†o vi·ªác x√¢y d·ª±ng m·ªôt AI Agent ƒëa nƒÉng, h·ªó tr·ª£ ng∆∞·ªùi d√πng trong vi·ªác:

1.  **T∆∞ V·∫•n M√≥n ƒÇn:** 
* ƒê√≥ng vai tr√≤ nh∆∞ m·ªôt chuy√™n vi√™n t∆∞ v·∫•n ·∫©m th·ª±c, h·ªó tr·ª£ ng∆∞·ªùi d√πng kh√°m ph√° th·ª±c ƒë∆°n, so s√°nh c√°c l·ª±a ch·ªçn m√≥n ƒÉn v√† nh√† h√†ng.
* ƒê∆∞a ra c√°c ƒë·ªÅ xu·∫•t m√≥n ƒÉn ph√π h·ª£p d·ª±a tr√™n nhu c·∫ßu, s·ªü th√≠ch, v√† ng√¢n s√°ch c·ªßa kh√°ch h√†ng.
* Cung c·∫•p th√¥ng tin chi ti·∫øt v·ªÅ th√†nh ph·∫ßn, ƒë√°nh gi√°, v√† c√°c ∆∞u ƒë√£i li√™n quan ƒë·∫øn m√≥n ƒÉn.

1.  **ƒê·∫∑t M√≥n ƒÇn v√† Th√™m V√†o Gi·ªè H√†ng:** vi·ªác chatbot t·ª± ƒë·ªông ƒë·∫∑t ƒë·ªì ƒÉn v√† th√™m m√≥n ƒÉn v√†o gi·ªè h√†ng c≈©ng ƒë∆∞·ª£c coi l√† m·ªôt h√¨nh th·ª©c ƒë·∫∑t l·ªãch s·∫£n ph·∫©m tr·ª±c tuy·∫øn. Trong tr∆∞·ªùng h·ª£p n√†y, s·∫£n ph·∫©m ch√≠nh l√† c√°c m√≥n ƒÉn. Ch·ª©c nƒÉng n√†y cho ph√©p ng∆∞·ªùi d√πng t∆∞∆°ng t√°c v·ªõi chatbot ƒë·ªÉ ch·ªçn m√≥n ƒÉn, th√™m ch√∫ng v√†o gi·ªè h√†ng v√† ti·∫øn h√†nh ƒë·∫∑t m√≥n ƒÉn m·ªôt c√°ch t·ª± ƒë·ªông v√† thu·∫≠n ti·ªán. V√¨ v·∫≠y, m√≥n ƒÉn c≈©ng ƒë∆∞·ª£c t√≠nh l√† s·∫£n ph·∫©m trong ng·ªØ c·∫£nh n√†y.
* Cho ph√©p ng∆∞·ªùi d√πng t∆∞∆°ng t√°c tr·ª±c ti·∫øp v·ªõi chatbot ƒë·ªÉ ch·ªçn m√≥n ƒÉn, th√™m v√†o gi·ªè h√†ng v√† ti·∫øn h√†nh ƒë·∫∑t m√≥n m·ªôt c√°ch t·ª± ƒë·ªông v√† nhanh ch√≥ng.
* H·ªó tr·ª£ c√°c thao t√°c nh∆∞ t√πy ch·ªânh m√≥n ƒÉn (v√≠ d·ª•: th√™m topping, ƒëi·ªÅu ch·ªânh kh·∫©u v·ªã) v√† xem l·∫°i ƒë∆°n h√†ng tr∆∞·ªõc khi x√°c nh·∫≠n.

### C√°c t√≠nh nƒÉng ch√≠nh c·ªßa Chatbot AutoGPT:

* **T·ª± ƒë·ªông h√≥a t∆∞∆°ng t√°c:** 
  X·ª≠ l√Ω c√°c y√™u c·∫ßu v√† truy v·∫•n c·ªßa kh√°ch h√†ng m·ªôt c√°ch t·ª± ƒë·ªông, gi·∫£m thi·ªÉu s·ª± can thi·ªáp c·ªßa nh√¢n vi√™n.

* **Ph√¢n t√≠ch nhu c·∫ßu:** 
  Hi·ªÉu r√µ mong mu·ªën c·ªßa kh√°ch h√†ng th√¥ng qua c√°c c√¢u h·ªèi v√† y√™u c·∫ßu t·ª± nhi√™n.

* **ƒê·ªÅ xu·∫•t th√¥ng minh:** 
  ƒê·ªÅ xu·∫•t c√°c m√≥n ƒÉn v√† nh√† h√†ng ph√π h·ª£p d·ª±a tr√™n l·ªãch s·ª≠ t∆∞∆°ng t√°c, s·ªü th√≠ch v√† v·ªã tr√≠ c·ªßa kh√°ch h√†ng.

* **Qu·∫£n l√Ω th√¥ng tin:** 
  Thu th·∫≠p v√† l∆∞u tr·ªØ th√¥ng tin kh√°ch h√†ng m·ªôt c√°ch an to√†n v√† b·∫£o m·∫≠t.

* **ƒêa ng√¥n ng·ªØ:** 
  (N·∫øu c√≥ th·ªÉ) H·ªó tr·ª£ giao ti·∫øp b·∫±ng nhi·ªÅu ng√¥n ng·ªØ, m·ªü r·ªông ph·∫°m vi ti·∫øp c·∫≠n ng∆∞·ªùi d√πng.

* **T√≠ch h·ª£p h·ªá th·ªëng:** 
  K·∫øt n·ªëi v·ªõi c∆° s·ªü d·ªØ li·ªáu m√≥n ƒÉn v√† nh√† h√†ng, c≈©ng nh∆∞ h·ªá th·ªëng ƒë·∫∑t h√†ng ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông li·ªÅn m·∫°ch.

* **H·ªó tr·ª£ ƒëa n·ªÅn t·∫£ng:** 
  C√≥ kh·∫£ nƒÉng ho·∫°t ƒë·ªông tr√™n nhi·ªÅu n·ªÅn t·∫£ng (v√≠ d·ª•: web, app, c√°c ·ª©ng d·ª•ng nh·∫Øn tin).

### ƒêi·ªÉm n·ªïi b·∫≠t c·ªßa d·ª± √°n:

* **AI Agent t·ª± ƒë·ªông:** 
  S·ª≠ d·ª•ng c√¥ng ngh·ªá AI Agent ƒë·ªÉ t·ª± ƒë·ªông h√≥a to√†n b·ªô quy tr√¨nh, t·ª´ t∆∞ v·∫•n ƒë·∫øn ƒë·∫∑t h√†ng.

* **T∆∞∆°ng t√°c ƒëa ph∆∞∆°ng th·ª©c:**  
  H·ªó tr·ª£ c·∫£ giao ti·∫øp b·∫±ng vƒÉn b·∫£n v√† gi·ªçng n√≥i, mang l·∫°i s·ª± linh ho·∫°t cho ng∆∞·ªùi d√πng.

* **H·ªçc h·ªèi v√† c·∫£i thi·ªán:** 
  S·ª≠ d·ª•ng l·ªãch s·ª≠ t∆∞∆°ng t√°c ƒë·ªÉ ƒë∆∞a ra c√°c quy·∫øt ƒë·ªãnh v√† ƒë·ªÅ xu·∫•t th√¥ng minh h∆°n theo th·ªùi gian.

* **Tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªëi ∆∞u:** 
  Thi·∫øt k·∫ø giao di·ªán th√¢n thi·ªán, d·ªÖ s·ª≠ d·ª•ng, ƒë·∫£m b·∫£o tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√† v√† th√∫ v·ªã.

**√ù nghƒ©a:**

D·ª± √°n AutoGPT l√† m·ªôt minh ch·ª©ng r√µ r√†ng v·ªÅ vi·ªác ·ª©ng d·ª•ng AI ƒë·ªÉ t·ª± ƒë·ªông h√≥a c√°c t√°c v·ª• ph·ª©c t·∫°p tr√™n n·ªÅn t·∫£ng tr·ª±c tuy·∫øn, mang l·∫°i s·ª± ti·ªán l·ª£i v√† hi·ªáu qu·∫£ cho c·∫£ ng∆∞·ªùi d√πng v√† doanh nghi·ªáp.

## C√¥ng Ngh·ªá S·ª≠ D·ª•ng:

-   **LangChain Agent Framework:** ƒê∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√¢y d·ª±ng c√°c agent c√≥ kh·∫£ nƒÉng t∆∞∆°ng t√°c v·ªõi c√°c m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn LLM v√† c√°c c√¥ng c·ª• kh√°c nhau.
-   **M√¥ H√¨nh Ng√¥n Ng·ªØ L·ªõn (LLM) c·ªßa Groq:** S·ª≠ d·ª•ng m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn c·ªßa Groq ƒë·ªÉ t·∫°o ra c√°c ph·∫£n h·ªìi t·ª± nhi√™n v√† hi·ªáu qu·∫£.
-   **k·ªπ thu·∫≠t RAG (Retrieval Augmented Generation) Cho t√¨m ki·∫øm th√¥ng qua LangChain üîç**: 
* S·ª≠ d·ª•ng Retrieval Augmented Generation ƒë·ªÉ t√¨m ki·∫øm nh√† h√†ng th√¥ng minh
* K·∫øt h·ª£p vector search v·ªõi x·ª≠ l√Ω ng√¥n ng·ªØ t·ª± nhi√™n
-   **SQLite:** L∆∞u tr·ªØ v√† truy xu·∫•t th√¥ng tin s·∫£n ph·∫©m (ch√≠nh l√† c√°c m√≥n ƒÉn) t·ª´ c∆° s·ªü d·ªØ li·ªáu. 
-   **Vue.js 3**: Framework ch√≠nh ƒë·ªÉ x√¢y d·ª±ng Giao di·ªán ng∆∞·ªùi d√πng (frontend).
-   **FastAPI:** X√¢y d·ª±ng API (backend).
-   
## C√¥ng Ngh·ªá X·ª≠ L√Ω Ng√¥n Ng·ªØ T·ª± Nhi√™n v√† H·ªçc M√°y:

-   **LangChain Agent Framework:** Framework n√†y gi√∫p x√¢y d·ª±ng c√°c agent c√≥ kh·∫£ nƒÉng t∆∞∆°ng t√°c v·ªõi c√°c m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn (LLM) v√† c√°c c√¥ng c·ª• kh√°c nhau.
-   **M√¥ H√¨nh Ng√¥n Ng·ªØ L·ªõn (LLM) c·ªßa Groq:** T·∫°o ra c√°c ph·∫£n h·ªìi t·ª± nhi√™n.
-   **Prompt Engineering:** K·ªπ thu·∫≠t n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng c·ªßa c√°c ph·∫£n h·ªìi t·ª´ m√¥ h√¨nh ng√¥n ng·ªØ b·∫±ng c√°ch thi·∫øt k·∫ø c√°c prompt (l·ªùi nh·∫Øc) ph√π h·ª£p. S·ª≠ d·ª•ng c√°c prompt ƒë·ªÉ c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng c·ªßa c√°c ph·∫£n h·ªìi t·ª´ m√¥ h√¨nh ng√¥n ng·ªØ.

## Lu·ªìng Ho·∫°t ƒê·ªông c·ªßa Chatbot:

1.  **Nh·∫≠n ƒê·∫ßu V√†o:** Chatbot nh·∫≠n c√¢u h·ªèi/y√™u c·∫ßu t·ª´ ng∆∞·ªùi d√πng (vƒÉn b·∫£n ho·∫∑c gi·ªçng n√≥i).
2.  **Ph√¢n T√≠ch Nhu C·∫ßu:** S·ª≠ d·ª•ng LLM ƒë·ªÉ hi·ªÉu √Ω ƒë·ªãnh v√† tr√≠ch xu·∫•t th√¥ng tin quan tr·ªçng t·ª´ y√™u c·∫ßu.
3.  **T∆∞ V·∫•n/ƒê·ªÅ Xu·∫•t S·∫£n Ph·∫©m:** D·ª±a tr√™n th√¥ng tin s·∫£n ph·∫©m v√† y√™u c·∫ßu c·ªßa ng∆∞·ªùi d√πng, chatbot ƒë·ªÅ xu·∫•t c√°c s·∫£n ph·∫©m ph√π h·ª£p.
4.  **ƒê·∫∑t L·ªãch:** N·∫øu ng∆∞·ªùi d√πng mu·ªën ƒë·∫∑t l·ªãch, chatbot t·ª± ƒë·ªông x·ª≠ l√Ω y√™u c·∫ßu n√†y.
5.  **Ph·∫£n H·ªìi:** Chatbot g·ª≠i ph·∫£n h·ªìi (vƒÉn b·∫£n ho·∫∑c gi·ªçng n√≥i) cho ng∆∞·ªùi d√πng.
6. **Qu·∫£n l√Ω th√¥ng tin:** L∆∞u tr·ªØ th√¥ng tin kh√°ch h√†ng v√† l·ªãch s·ª≠ t∆∞∆°ng t√°c ƒë·ªÉ c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng d·ªãch v·ª•.

Chatbot c√≥ kh·∫£ nƒÉng:
- T·ª± ƒë·ªông h√≥a t∆∞∆°ng t√°c v·ªõi kh√°ch h√†ng.
- T√¨m ki·∫øm s·∫£n ph·∫©m d·ª±a tr√™n nhu c·∫ßu.
- H·ªó tr·ª£ ƒëa ng√¥n ng·ªØ (n·∫øu c·∫ßn).
- T√≠ch h·ª£p v·ªõi c∆° s·ªü d·ªØ li·ªáu.

√Åp d·ª•ng nh·ªØng th·ª±c ti·ªÖn t·ªët nh·∫•t ƒë·ªÉ x√¢y d·ª±ng h·ªá th·ªëng agents LangChain, 
ch√∫ng ta s·∫Ω c√πng nhau kh√°m ph√° t·ª´ng b∆∞·ªõc chi ti·∫øt ngay sau ƒë√¢y.
## Ki·∫øn Tr√∫c AI Agent:

H·ªá th·ªëng ƒë∆∞·ª£c chia th√†nh hai ph·∫ßn ch√≠nh: Frontend v√† Backend.

### Backend:

Backend s·ª≠ d·ª•ng FastAPI ƒë·ªÉ x√¢y d·ª±ng API v√† x·ª≠ l√Ω c√°c y√™u c·∫ßu t·ª´ frontend.

C·∫•u tr√∫c th∆∞ m·ª•c backend:

**M√¥ T·∫£ Chi Ti·∫øt:**
-   **`backend/src/config`:** Ch·ª©a c√°c file c·∫•u h√¨nh ·ª©ng d·ª•ng, nh∆∞ API keys, credentials, v.v.
backend/src/config/__pycache__
backend/src/config/__init__.py
backend/src/config/config.yaml
- ** code file config.yaml:**
groq:
  api_key: $GROQ_API_KEY
  chat_model: "llama-3.1-70b-versatile"
  whisper_model: "whisper-large-v3"
  temperature: 0
  max_tokens: 512

qdrant:
  url: $QDRANT_URL
  api_key: $QDRANT_API_KEY

prompts:
  chat:
    filepath: "./src/prompts/chat/system.txt"

  functions:
    filepath: "./src/prompts/functions/signatures.json"

huggingface:
  api_key: $HUGGINGFACE_API_KEY
  embedding_model: "intfloat/multilingual-e5-small"

-   **`backend/src/data`:** X·ª≠ l√Ω c√°c thao t√°c li√™n quan ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu SQLite.
Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ c·∫•u tr√∫c v√† chi ti·∫øt c√°c file code trong folder `data` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `data`

```
backend/src/data/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ __pycache__
‚îú‚îÄ‚îÄ database.db
‚îú‚îÄ‚îÄ create_tables.py
‚îú‚îÄ‚îÄ database.py
‚îú‚îÄ‚îÄ data_models.py
‚îú‚îÄ‚îÄ data_utils.py
‚îú‚îÄ‚îÄ populate_fake_data.py
‚îú‚îÄ‚îÄ qdrant_restaurants.py
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ test_print_data.py
```

### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. `__init__.py`
- **M·ª•c ƒë√≠ch**: File n√†y cho ph√©p th∆∞ m·ª•c `data` ƒë∆∞·ª£c coi nh∆∞ m·ªôt module Python.
- **N·ªôi dung**: Import t·∫•t c·∫£ c√°c class t·ª´ `data_models` v√† `database`, gi√∫p d·ªÖ d√†ng truy c·∫≠p c√°c th√†nh ph·∫ßn n√†y t·ª´ module `data`.

#### 2.2. `create_tables.py`
- **M·ª•c ƒë√≠ch**: T·∫°o c·∫•u tr√∫c c∆° s·ªü d·ªØ li·ªáu b·∫±ng c√°ch t·∫°o c√°c b·∫£ng ƒë√£ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong `data_models.py`.
- **N·ªôi dung**:
  - Import `Base` v√† `engine` t·ª´ `database` ƒë·ªÉ ƒë·ªãnh nghƒ©a schema v√† k·∫øt n·ªëi ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu.
  - H√†m `main()` g·ªçi `Base.metadata.create_all(bind=engine)` ƒë·ªÉ t·∫°o t·∫•t c·∫£ c√°c b·∫£ng.
  - In ra th√¥ng b√°o khi t·∫°o b·∫£ng th√†nh c√¥ng.
- Code file `create_tables.py`:

try:
    from database import Base, engine
    from data_models import Restaurant, Foods
except:
    from .database import Base, engine
    from .data_models import Restaurant, Foods

def main():
    Base.metadata.create_all(bind=engine)
    print("Tables created successfully!")

if __name__ == "__main__":
    main()

#### 2.3. `database.py`
- **M·ª•c ƒë√≠ch**: Qu·∫£n l√Ω k·∫øt n·ªëi ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu SQLite.
- **N·ªôi dung**:
  - S·ª≠ d·ª•ng SQLAlchemy ƒë·ªÉ t·∫°o engine v√† session.
  - ƒê·ªãnh nghƒ©a `DATABASE_URL` ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn file `database.db`.
  - T·∫°o `SessionLocal` ƒë·ªÉ qu·∫£n l√Ω phi√™n l√†m vi·ªác v·ªõi c∆° s·ªü d·ªØ li·ªáu.
  - ƒê·ªãnh nghƒ©a `Base` ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c model.
- Code file `database.py`:
import os

from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

BASE_DIR = os.path.dirname(os.path.abspath(__file__))
DATABASE_URL = f"sqlite:///{os.path.join(BASE_DIR, 'database.db')}"

engine = create_engine(
    DATABASE_URL, connect_args={"check_same_thread": False}
)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

Base = declarative_base()

#### 2.4. `data_models.py`
- **M·ª•c ƒë√≠ch**: ƒê·ªãnh nghƒ©a c√°c b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a hai class `Restaurant` v√† `Foods`, m·ªói class t∆∞∆°ng ·ª©ng v·ªõi m·ªôt b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu.
  - C√°c thu·ªôc t√≠nh c·ªßa class ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b·∫±ng c√°c c·ªôt trong b·∫£ng, bao g·ªìm `id`, `name`, `description`, `image`, v√† `price`.
- Code file `data_models.py`:
from sqlalchemy import Column, Integer, String

try:
    from database import Base
except:
    from .database import Base

class Restaurant(Base):
    __tablename__ = "restaurants"

    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, index=True)
    description = Column(String, index=True)
    image = Column(String, index=True)

class Foods(Base):
    __tablename__ = "foods"

    id = Column(Integer, primary_key=True, index=True)
    restaurant_id = Column(Integer, index=True)
    name = Column(String, index=True)
    description = Column(String, index=True)
    image = Column(String, index=True)
    price = Column(Integer, index=True)

#### 2.5. `data_utils.py`
- **M·ª•c ƒë√≠ch**: Cung c·∫•p c√°c h√†m ti·ªán √≠ch ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu t·ª´ c∆° s·ªü d·ªØ li·ªáu.
- **N·ªôi dung**:
  - H√†m `get_restaurants(db: Session)`: Truy xu·∫•t t·∫•t c·∫£ c√°c nh√† h√†ng t·ª´ b·∫£ng `restaurants`.
  - H√†m `get_foods(db: Session)`: Truy xu·∫•t t·∫•t c·∫£ c√°c m√≥n ƒÉn t·ª´ b·∫£ng `foods`.
  - H√†m `get_menu_of_given_restaurant(db: Session, restaurant_id: int)`: Truy xu·∫•t menu c·ªßa m·ªôt nh√† h√†ng c·ª• th·ªÉ.
  - H√†m `get_db()`: T·∫°o v√† qu·∫£n l√Ω phi√™n l√†m vi·ªác v·ªõi c∆° s·ªü d·ªØ li·ªáu.
- Code file `data_utils.py`:
import pandas as pd
from sqlalchemy.orm import Session

try:
    from database import SessionLocal
    from data_models import Restaurant, Foods
except:
    from .database import SessionLocal
    from .data_models import Restaurant, Foods


def get_restaurants(db: Session):
    return db.query(Restaurant).all()

def get_foods(db: Session):
    return db.query(Foods).all()

def get_menu_of_given_restaurant(db: Session, restaurant_id: int):
    return db.query(Foods).filter(Foods.restaurant_id == restaurant_id).all()

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

#### 2.6. `populate_fake_data.py`
- **M·ª•c ƒë√≠ch**: Th√™m d·ªØ li·ªáu gi·∫£ v√†o c∆° s·ªü d·ªØ li·ªáu ƒë·ªÉ ki·ªÉm tra.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c h√†m `add_restaurant` v√† `add_food` ƒë·ªÉ th√™m nh√† h√†ng v√† m√≥n ƒÉn v√†o c∆° s·ªü d·ªØ li·ªáu.
  - H√†m `main()` ch·ª©a d·ªØ li·ªáu m·∫´u cho c√°c nh√† h√†ng v√† m√≥n ƒÉn, g·ªçi c√°c h√†m th√™m d·ªØ li·ªáu v√†o c∆° s·ªü d·ªØ li·ªáu.
- Code file `populate_fake_data.py`:
import pandas as pd
from sqlalchemy.orm import Session

from database import SessionLocal
from data_models import Restaurant, Foods


# H√†m th√™m nh√† h√†ng v√†o c∆° s·ªü d·ªØ li·ªáu
def add_restaurant(db: Session, name: str, description: str, image: str):
    restaurant = Restaurant(name=name, description=description, image=image)
    db.add(restaurant)
    db.commit()
    db.refresh(restaurant)
    return restaurant 


# H√†m th√™m m√≥n ƒÉn v√†o c∆° s·ªü d·ªØ li·ªáu
def add_food(
    db: Session, restaurant_id: int, name: str, description: str, image: str, price: int
):
    food = Foods(
        restaurant_id=restaurant_id,
        name=name,
        description=description,
        image=image,
        price=price,
    )
    db.add(food)
    db.commit()
    db.refresh(food)
    return food


def main():
    db = SessionLocal()

    # Sample data for restaurants
    restaurants = [
        {
            "name": "Co Vietnamese Restaurant & Vegan",
            "description": "Our restaurant specializes in providing Vietnamese dishes, outstanding products that are popular in Vietnam, inviting you to come with your friends and family to share an authentic Vietnamese feast.",
            "image": "/static/restaurants/CoVietnamese_Restaurant&Vegan.png",
        },
        {
            "name": "SushiLAB",
            "description": "Fresh sushi and Japanese dishes",
            "image": "/static/restaurants/sushi_lab.png",
        },
        {
            "name": "The Eroica Restaurant",
            "description": "The Eroica Restaurant will lead diners to a multi-layered culinary journey with a diverse menu of Asian and European delicacies. The fine-dining space is designed luxuriously, elegantly and harmoniously down to every detail, The Eroica promises to be an ideal destination for any special date: from a romantic dinner for couples, a family date or a company party... You will experience perfect culinary service with a variety of delicious dishes from our talented chefs.",
            "image": "/static/restaurants/the_eroica_restaurant.png",
        },
        {
            "name": "Burger King Hang Buom",
            "description": "Gourmet burgers and fries",
            "image": "/static/restaurants/burger_king_hang_buom.png",
        },
        {
            "name": "Pizza Hub - Wood Fired Pizza & Grills",
            "description": "Wood-fired pizzas",
            "image": "/static/restaurants/pizza_hub_wood_fired_pizza_grills.png",
        },
        {
            "name": "Indian Spice",
            "description": "Traditional Indian curries and tandoori",
            "image": "/static/restaurants/indian_spice.png",
        },
        {
            "name": "Thai Delight",
            "description": "Flavorful Thai dishes and noodles",
            "image": "/static/restaurants/thai_delight.png",
        },
        {
            "name": "Chinese Wok",
            "description": "Classic Chinese cuisine and dim sum",
            "image": "/static/restaurants/chinese_wok.png",
        },
        {
            "name": "Mediterranean Grill",
            "description": "Fresh Mediterranean flavors and kebabs",
            "image": "/static/restaurants/mediterranean_grill.png",
        },
        {
            "name": "French Bistro",
            "description": "Elegant French dining and pastries",
            "image": "/static/restaurants/french_bistro.png",
        },
        {
            "name": "Steakhouse",
            "description": "Premium steaks and seafood",
            "image": "/static/restaurants/steakhouse.png",
        },
        {
            "name": "Vegan Cafe",
            "description": "Plant-based dishes and smoothies",
            "image": "/static/restaurants/vegan_cafe.png",
        },
        {
            "name": "Greek Taverna",
            "description": "Greek classics and seafood",
            "image": "/static/restaurants/greek_taverna.png",
        },
        {
            "name": "Southern Comfort",
            "description": "Homestyle Southern cooking",
            "image": "/static/restaurants/southern_comfort.png",
        },
        {
            "name": "BBQ Shack",
            "description": "Smoked meats and barbecue",
            "image": "/static/restaurants/bbq_shack.png",
        },
        {
            "name": "Seafood Delight",
            "description": "Fresh seafood and fish dishes",
            "image": "/static/restaurants/seafood_delight.png",
        },
        {
            "name": "Veggie Heaven",
            "description": "Delicious vegetarian and vegan dishes",
            "image": "/static/restaurants/veggie_heaven.png",
        },
        {
            "name": "Chicken Coop",
            "description": "Grilled and fried chicken dishes",
            "image": "/static/restaurants/chicken_coop.png",
        },
        {
            "name": "Pasta Paradise",
            "description": "A variety of pasta dishes",
            "image": "/static/restaurants/pasta_paradise.png",
        },
        {
            "name": "Bakery Bliss",
            "description": "Freshly baked breads and pastries",
            "image": "/static/restaurants/bakery_bliss.png",
        },
        {
            "name": "Salad Bar",
            "description": "Healthy and delicious salads",
            "image": "/static/restaurants/salad_bar.png",
        },
        {
            "name": "Ramen House",
            "description": "Japanese ramen and noodle dishes",
            "image": "/static/restaurants/ramen_house.png",
        },
        {
            "name": "Ice Cream Shop",
            "description": "Variety of ice cream flavors and desserts",
            "image": "/static/restaurants/ice_cream_shop.png",
        },
        {
            "name": "Sandwich Shop",
            "description": "Freshly made sandwiches and wraps",
            "image": "/static/restaurants/sandwich_shop.png",
        },
        {
            "name": "Pancake House",
            "description": "Sweet and savory pancakes",
            "image": "/static/restaurants/pancake_house.png",
        },
        {
            "name": "Bun Cha Ta",
            "description": "Bun Cha Ta is a Vietnamese dish of grilled pork and noodle",
            "image": "/static/restaurants/bun_cha_ta.png",
        },
    ]

    # Sample data for foods
    foods = [
        # Co Vietnamese Restaurant & Vegan
        {
            "restaurant_id": 1,
            "name": "Fried spring rolls",
            "description": "Crispy or fresh spring rolls filled with various ingredients like vegetables, meat, and noodles.",
            "image": "/static/foods/fried_spring_rolls.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 1,
            "name": "Traditional noodle soup with Beef/Chicken",
            "description": "A classic Vietnamese broth with rice noodles, served with your choice of beef or chicken.",
            "image": "/static/foods/traditional_noodle_soup_with_beef_chicken.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 1,
            "name": "Special Vietnamese Pancace (Banh Xeo)",
            "description": "Savory Vietnamese crepe made with rice flour, turmeric, and coconut milk, often filled with shrimp, pork, and bean sprouts.",
            "image": "/static/foods/special_vietnamese_pancace_banh_xeo.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 1,
            "name": "Beef or pork rolled with betel leaves come with fresh noodle (6pcs)",
            "description": "Grilled meat wrapped in betel leaves served with fresh rice noodles and dipping sauce.",
            "image": "/static/foods/beef_or_pork_rolled_with_betel_leaves_come_with_fresh_noodle_6pcs.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 1,
            "name": "Banana flower salad with shrimp & Chicken",
            "description": "A refreshing salad featuring shredded banana flower, shrimp, chicken, and a tangy dressing.",
            "image": "/static/foods/banana_flower_salad_with_shrimp_chicken.png",
            "price": 110.000,
        },
        {
            "restaurant_id": 1,
            "name": "Hanoi traditional grilled pork with rice noodle (B√∫n ch·∫£)",
            "description": "A signature dish of Hanoi, featuring grilled pork served with rice noodles, herbs, and a dipping sauce.",
            "image": "/static/foods/hanoi_traditional_grilled_pork_with_rice_noodle_bun_cha.png",
            "price": 115.000,
        },
        {
            "restaurant_id": 1,
            "name": "Fried minced pork in lemongrass (Nem Lui)",
            "description": "Grilled skewers of minced pork seasoned with lemongrass, served with herbs and dipping sauce.",
            "image": "/static/foods/fried_minced_pork_in_lemongrass_nem_lui.png",
            "price": 90.000,
        },
        {
            "restaurant_id": 1,
            "name": "Vegetable soup with cream and mushroom soup",
            "description": "A creamy soup with vegetables and mushrooms.",
            "image": "/static/foods/vegetable_soup_with_cream_and_mushroom_soup.png",
            "price": 80.000,
        },
        # SushiLAB
        {
            "restaurant_id": 2,
            "name": "California Roll",
            "description": "Sushi roll with crab, avocado, and cucumber",
            "image": "/static/foods/california_roll.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 2,
            "name": "Spicy Tuna Roll",
            "description": "Sushi roll with spicy tuna, mayo, and cucumber",
            "image": "/static/foods/spicy_tuna_roll.png",
            "price": 90.000,
        },
        {
            "restaurant_id": 2,
            "name": "Salmon Nigiri",
            "description": "Sushi with a slice of fresh salmon on top of sushi rice",
            "image": "/static/foods/salmon_nigiri.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 2,
            "name": "Shrimp Tempura Roll",
            "description": "Sushi roll with tempura shrimp, avocado, and cucumber",
            "image": "/static/foods/shrimp_tempura_roll.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 2,
            "name": "Miso Soup",
            "description": "Traditional Japanese soup with tofu and seaweed",
            "image": "/static/foods/miso_soup.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 2,
            "name": "Sake",
            "description": "Japanese rice wine",
            "image": "/static/beverages/sake.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 2,
            "name": "Green Tea",
            "description": "Hot Japanese green tea",
            "image": "/static/beverages/green_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 2,
            "name": "Plum Wine",
            "description": "Sweet Japanese wine made from plums",
            "image": "/static/beverages/plum_wine.png",
            "price": 70.000,
        },
        # The Eroica Restaurant
        {
            "restaurant_id": 3,
            "name": "Vietnamese Clam Worm Pie",
            "description": "Clam worm, minced pork, egg, citrus peels, fennel, piper lolot (a type of Vietnamese herb), rice noodle",
            "image": "/static/foods/vietnamese_clam_worm_pie.png",
            "price": 230.000,
        },
        {
            "restaurant_id": 3,
            "name": "Vietnamese Beef Stew in Red Wine",
            "description": "Beef, ginger, carrot, lemongrass, cinnamon, star anise, bread",
            "image": "/static/foods/vietnamese_beef_stew_in_red_wine.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 3,
            "name": "Grilled Seabass in Banana Leaf",
            "description": "Seabass, banana blossom, lotus root salad, turmeric rice",
            "image": "/static/foods/grilled_seabass_in_banana_leaf.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 3,
            "name": "Vietnam Trio Nem",
            "description": "This dish is a combination of three different types of Vietnamese rolls",
            "image": "/static/foods/vietnam_trio_nem.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 3,
            "name": "Hanoi Rice Vermicelli Noodles With Chicken And Eggs",
            "description": "This is a Hanoi specialty featuring rice vermicelli noodles with chicken and eggs.",
            "image": "/static/foods/hanoi_rice_vermicelli_noodles_with_chicken_and_eggs.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 3,
            "name": "Vietnamese Ph·ªü",
            "description": "This dish refers to a popular Vietnamese noodle soup, specifically ph·ªü. You have the option of beef ph·ªü (ph·ªü b√≤) or chicken ph·ªü (ph·ªü g√†).",
            "image": "/static/foods/vietnamese_pho.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 3,
            "name": "M·∫Øc Kh√©n Grilled Chicken",
            "description": "This dish features grilled chicken marinated with m·∫Øc kh√©n peppercorns, a unique and aromatic spice native to the northern mountainous regions of Vietnam.",
            "image": "/static/foods/mac_khen_grilled_chicken.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 3,
            "name": "Chicken Parmigiana with Spaghetti and Vegetables",
            "description": "This dish is a classic Italian-American favorite. It features a breaded chicken breast topped with melted mozzarella cheese, baked to perfection. It's served with a side of spaghetti pasta and vegetables in a tomato-based sauce.",
            "image": "/static/foods/chicken_parmigiana_with_spaghetti_and_vegetables.png",
            "price": 40.000,
        },
        # Burger King Hang Buom
        {
            "restaurant_id": 4,
            "name": "Classic Cheeseburger",
            "description": "Juicy burger with cheese, lettuce, tomato, and onion",
            "image": "/static/foods/classic_cheeseburger.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 4,
            "name": "Bacon Burger",
            "description": "Delicious burger with bacon, cheese, lettuce, tomato, and onion",
            "image": "/static/foods/bacon_burger.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 4,
            "name": "Mushroom Swiss Burger",
            "description": "Tasty burger with Swiss cheese and saut√©ed mushrooms",
            "image": "/static/foods/mushroom_swiss_burger.png",
            "price": 110.000,
        },
        {
            "restaurant_id": 4,
            "name": "Veggie Burger",
            "description": "Healthy vegetarian burger with lettuce, tomato, and onion",
            "image": "/static/foods/veggie_burger.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 4,
            "name": "French Fries",
            "description": "Crispy golden fries served with ketchup",
            "image": "/static/foods/french_fries.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 4,
            "name": "Craft Beer",
            "description": "Local craft beer",
            "image": "/static/beverages/craft_beer.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 4,
            "name": "Milkshake",
            "description": "Creamy milkshake with vanilla, chocolate, or strawberry",
            "image": "/static/beverages/milkshake.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 4,
            "name": "Soda",
            "description": "Refreshing carbonated drink",
            "image": "/static/beverages/soda.png",
            "price": 30.000,
        },
        # Pizza Hub - Wood Fired Pizza & Grills
        {
            "restaurant_id": 5,
            "name": "Pepperoni Pizza",
            "description": "Delicious pizza with tomato sauce, mozzarella, and pepperoni",
            "image": "/static/foods/pepperoni_pizza.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 5,
            "name": "Veggie Pizza",
            "description": "Healthy pizza with tomato sauce, mozzarella, bell peppers, onions, and olives",
            "image": "/static/foods/veggie_pizza.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 5,
            "name": "Meat Lovers Pizza",
            "description": "Hearty pizza with tomato sauce, mozzarella, pepperoni, sausage, and bacon",
            "image": "/static/foods/meat_lovers_pizza.png",
            "price": 160.000,
        },
        {
            "restaurant_id": 5,
            "name": "BBQ Chicken Pizza",
            "description": "Tasty pizza with BBQ sauce, mozzarella, chicken, red onion, and cilantro",
            "image": "/static/foods/bbq_chicken_pizza.png",
            "price": 150.000,
        },
        {
            "restaurant_id": 5,
            "name": "Hawaiian Pizza",
            "description": "Sweet and savory pizza with tomato sauce, mozzarella, ham, and pineapple",
            "image": "/static/foods/hawaiian_pizza.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 5,
            "name": "Italian Soda",
            "description": "Refreshing soda with a choice of fruit syrup",
            "image": "/static/beverages/italian_soda.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 5,
            "name": "Chianti",
            "description": "Italian red wine",
            "image": "/static/beverages/chianti.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 5,
            "name": "Limoncello",
            "description": "Italian lemon liqueur",
            "image": "/static/beverages/limoncello.png",
            "price": 70.000,
        },
        # Indian Spice
        {
            "restaurant_id": 6,
            "name": "Chicken Tikka Masala",
            "description": "Grilled chicken in a creamy tomato sauce served with basmati rice",
            "image": "/static/foods/chicken_tikka_masala.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 6,
            "name": "Lamb Curry",
            "description": "Tender lamb in a spiced curry sauce served with basmati rice",
            "image": "/static/foods/lamb_curry.png",
            "price": 160.000,
        },
        {
            "restaurant_id": 6,
            "name": "Saag Paneer",
            "description": "Indian cheese in a creamy spinach sauce served with naan bread",
            "image": "/static/foods/saag_paneer.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 6,
            "name": "Vegetable Biryani",
            "description": "Aromatic rice dish with mixed vegetables and spices served with raita",
            "image": "/static/foods/vegetable_biryani.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 6,
            "name": "Garlic Naan",
            "description": "Leavened bread with garlic and butter",
            "image": "/static/foods/garlic_naan.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 6,
            "name": "Mango Lassi",
            "description": "Refreshing yogurt-based drink with mango",
            "image": "/static/beverages/mango_lassi.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 6,
            "name": "Masala Chai",
            "description": "Spiced tea with milk",
            "image": "/static/beverages/masala_chai.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 6,
            "name": "Kingfisher Beer",
            "description": "Indian lager beer",
            "image": "/static/beverages/kingfisher_beer.png",
            "price": 50.000,
        },
        # Thai Delight
        {
            "restaurant_id": 7,
            "name": "Pad Thai",
            "description": "Stir-fried rice noodles with shrimp, tofu, eggs, and peanuts",
            "image": "/static/foods/pad_thai.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 7,
            "name": "Green Curry",
            "description": "Spicy green curry with chicken, eggplant, and basil served with jasmine rice",
            "image": "/static/foods/green_curry.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 7,
            "name": "Tom Yum Soup",
            "description": "Hot and sour soup with shrimp, lemongrass, and mushrooms",
            "image": "/static/foods/tom_yum_soup.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 7,
            "name": "Papaya Salad",
            "description": "Spicy salad with green papaya, tomatoes, and peanuts",
            "image": "/static/foods/papaya_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 7,
            "name": "Mango Sticky Rice",
            "description": "Sweet dessert with sticky rice, fresh mango, and coconut milk",
            "image": "/static/foods/mango_sticky_rice.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 7,
            "name": "Thai Iced Tea",
            "description": "Sweet tea with milk",
            "image": "/static/beverages/thai_iced_tea.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 7,
            "name": "Singha Beer",
            "description": "Thai lager beer",
            "image": "/static/beverages/singha_beer.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 7,
            "name": "Lemongrass Juice",
            "description": "Refreshing juice with lemongrass",
            "image": "/static/beverages/lemongrass_juice.png",
            "price": 40.000,
        },
        # Chinese Wok
        {
            "restaurant_id": 8,
            "name": "Kung Pao Chicken",
            "description": "Stir-fried chicken with peanuts, vegetables, and chili peppers served with steamed rice",
            "image": "/static/foods/kung_pao_chicken.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 8,
            "name": "Beef and Broccoli",
            "description": "Stir-fried beef with broccoli in a savory sauce served with steamed rice",
            "image": "/static/foods/beef_and_broccoli.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 8,
            "name": "Sweet and Sour Pork",
            "description": "Battered pork with pineapple, bell peppers, and sweet and sour sauce served with steamed rice",
            "image": "/static/foods/sweet_and_sour_pork.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 8,
            "name": "Vegetable Fried Rice",
            "description": "Fried rice with mixed vegetables and eggs",
            "image": "/static/foods/vegetable_fried_rice.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 8,
            "name": "Spring Rolls",
            "description": "Crispy rolls filled with vegetables served with sweet and sour sauce",
            "image": "/static/foods/spring_rolls.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 8,
            "name": "Tsingtao Beer",
            "description": "Chinese lager beer",
            "image": "/static/beverages/tsingtao_beer.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 8,
            "name": "Jasmine Tea",
            "description": "Hot tea with jasmine flavor",
            "image": "/static/beverages/jasmine_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 8,
            "name": "Plum Juice",
            "description": "Sweet juice made from plums",
            "image": "/static/beverages/plum_juice.png",
            "price": 40.000,
        },
        # Mediterranean Grill
        {
            "restaurant_id": 9,
            "name": "Chicken Shawarma",
            "description": "Marinated chicken with garlic sauce and pickles wrapped in pita bread",
            "image": "/static/foods/chicken_shawarma.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 9,
            "name": "Falafel",
            "description": "Deep-fried chickpea patties with tahini sauce and salad wrapped in pita bread",
            "image": "/static/foods/falafel.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 9,
            "name": "Greek Salad",
            "description": "Fresh salad with tomatoes, cucumbers, olives, and feta cheese",
            "image": "/static/foods/greek_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 9,
            "name": "Hummus",
            "description": "Chickpea dip with olive oil and pita bread",
            "image": "/static/foods/hummus.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 9,
            "name": "Baklava",
            "description": "Sweet pastry with layers of filo and chopped nuts",
            "image": "/static/foods/baklava.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 9,
            "name": "Greek Wine",
            "description": "White or red Greek wine",
            "image": "/static/beverages/greek_wine.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 9,
            "name": "Turkish Coffee",
            "description": "Strong coffee served in a small cup",
            "image": "/static/beverages/turkish_coffee.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 9,
            "name": "Mint Lemonade",
            "description": "Refreshing lemonade with mint",
            "image": "/static/beverages/mint_lemonade.png",
            "price": 40.000,
        },
        # French Bistro
        {
            "restaurant_id": 10,
            "name": "Coq au Vin",
            "description": "Braised chicken with red wine, mushrooms, and onions served with mashed potatoes",
            "image": "/static/foods/coq_au_vin.png",
            "price": 180.000,
        },
        {
            "restaurant_id": 10,
            "name": "Beef Bourguignon",
            "description": "Slow-cooked beef with red wine, mushrooms, and carrots served with mashed potatoes",
            "image": "/static/foods/beef_bourguignon.png",
            "price": 200.000,
        },
        {
            "restaurant_id": 10,
            "name": "French Onion Soup",
            "description": "Caramelized onion soup with Gruy√®re cheese croutons",
            "image": "/static/foods/french_onion_soup.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 10,
            "name": "Ratatouille",
            "description": "Stewed vegetables with tomato sauce and herbs served with crusty bread",
            "image": "/static/foods/ratatouille.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 10,
            "name": "Cr√®me Br√ªl√©e",
            "description": "Vanilla custard with caramelized sugar",
            "image": "/static/foods/creme_brulee.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 10,
            "name": "French Wine",
            "description": "Red or white French wine",
            "image": "/static/beverages/french_wine.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 10,
            "name": "Espresso",
            "description": "Strong French coffee",
            "image": "/static/beverages/espresso.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 10,
            "name": "Lemonade",
            "description": "Refreshing lemonade",
            "image": "/static/beverages/lemonade.png",
            "price": 40.000,
        },
        # Steakhouse
        {
            "restaurant_id": 11,
            "name": "Ribeye Steak",
            "description": "Grilled ribeye steak with garlic herb butter served with mashed potatoes",
            "image": "/static/foods/ribeye_steak.png",
            "price": 280.000,
        },
        {
            "restaurant_id": 11,
            "name": "Filet Mignon",
            "description": "Tender filet mignon with red wine reduction served with mashed potatoes",
            "image": "/static/foods/filet_mignon.png",
            "price": 320.000,
        },
        {
            "restaurant_id": 11,
            "name": "Grilled Salmon",
            "description": "Grilled salmon with lemon herb sauce served with steamed vegetables",
            "image": "/static/foods/grilled_salmon.png",
            "price": 220.000,
        },
        {
            "restaurant_id": 11,
            "name": "Caesar Salad",
            "description": "Classic salad with romaine lettuce, croutons, and Parmesan cheese",
            "image": "/static/foods/caesar_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 11,
            "name": "Mashed Potatoes",
            "description": "Creamy mashed potatoes with butter",
            "image": "/static/foods/mashed_potatoes.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 11,
            "name": "Cabernet Sauvignon",
            "description": "Full-bodied red wine",
            "image": "/static/beverages/cabernet_sauvignon.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 11,
            "name": "Craft Beer",
            "description": "Local craft beer",
            "image": "/static/beverages/craft_beer.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 11,
            "name": "Whiskey",
            "description": "Aged whiskey on the rocks",
            "image": "/static/beverages/whiskey.png",
            "price": 70.000,
        },
        # Vegan Cafe
        {
            "restaurant_id": 12,
            "name": "Vegan Burger",
            "description": "Plant-based burger with lettuce, tomato, and onion served with sweet potato fries",
            "image": "/static/foods/vegan_burger.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 12,
            "name": "Quinoa Salad",
            "description": "Healthy salad with quinoa, mixed greens, and roasted vegetables",
            "image": "/static/foods/quinoa_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 12,
            "name": "Lentil Soup",
            "description": "Hearty soup with lentils and vegetables",
            "image": "/static/foods/lentil_soup.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 12,
            "name": "Stuffed Bell Peppers",
            "description": "Bell peppers filled with quinoa, beans, and vegetables",
            "image": "/static/foods/stuffed_bell_peppers.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 12,
            "name": "Fruit Smoothie",
            "description": "Blended smoothie with a choice of fruits and almond milk",
            "image": "/static/foods/fruit_smoothie.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 12,
            "name": "Green Juice",
            "description": "Healthy juice with kale, spinach, and apple",
            "image": "/static/beverages/green_juice.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 12,
            "name": "Herbal Tea",
            "description": "Hot tea with a choice of herbs",
            "image": "/static/beverages/herbal_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 12,
            "name": "Almond Milk Latte",
            "description": "Coffee with almond milk",
            "image": "/static/beverages/almond_milk_latte.png",
            "price": 40.000,
        },
        # Greek Taverna
        {
            "restaurant_id": 13,
            "name": "Gyro",
            "description": "Grilled meat with tzatziki sauce, tomatoes, and onions wrapped in pita bread",
            "image": "/static/foods/gyro.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 13,
            "name": "Moussaka",
            "description": "Layered dish with eggplant, ground beef, and b√©chamel sauce",
            "image": "/static/foods/moussaka.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 13,
            "name": "Spanakopita",
            "description": "Savory pastry with spinach and feta cheese",
            "image": "/static/foods/spanakopita.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 13,
            "name": "Dolmades",
            "description": "Stuffed grape leaves with rice and herbs",
            "image": "/static/foods/dolmades.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 13,
            "name": "Greek Yogurt",
            "description": "Thick yogurt with honey and walnuts",
            "image": "/static/foods/greek_yogurt.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 13,
            "name": "Greek Wine",
            "description": "White or red Greek wine",
            "image": "/static/beverages/greek_wine.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 13,
            "name": "Ouzo",
            "description": "Anise-flavored Greek liquor",
            "image": "/static/beverages/ouzo.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 13,
            "name": "Greek Coffee",
            "description": "Strong coffee served in a small cup",
            "image": "/static/beverages/greek_coffee.png",
            "price": 30.000,
        },
        # Southern Comfort
        {
            "restaurant_id": 14,
            "name": "Fried Chicken",
            "description": "Crispy fried chicken served with mashed potatoes and gravy",
            "image": "/static/foods/fried_chicken.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 14,
            "name": "Shrimp and Grits",
            "description": "Saut√©ed shrimp with creamy grits and bacon",
            "image": "/static/foods/shrimp_and_grits.png",
            "price": 160.000,
        },
        {
            "restaurant_id": 14,
            "name": "Chicken and Waffles",
            "description": "Fried chicken with fluffy waffles and maple syrup",
            "image": "/static/foods/chicken_and_waffles.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 14,
            "name": "Biscuits and Gravy",
            "description": "Buttermilk biscuits with sausage gravy",
            "image": "/static/foods/biscuits_and_gravy.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 14,
            "name": "Pecan Pie",
            "description": "Sweet pie with pecan filling",
            "image": "/static/foods/pecan_pie.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 14,
            "name": "Sweet Tea",
            "description": "Refreshing iced tea with sugar",
            "image": "/static/beverages/sweet_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 14,
            "name": "Bourbon",
            "description": "Aged bourbon on the rocks",
            "image": "/static/beverages/bourbon.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 14,
            "name": "Mint Julep",
            "description": "Classic cocktail with bourbon, mint, and sugar",
            "image": "/static/beverages/mint_julep.png",
            "price": 70.000,
        },
        # BBQ Shack
        {
            "restaurant_id": 15,
            "name": "Pulled Pork Sandwich",
            "description": "Slow-cooked pulled pork with BBQ sauce served with coleslaw",
            "image": "/static/foods/pulled_pork_sandwich.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 15,
            "name": "Beef Brisket",
            "description": "Smoked beef brisket with BBQ sauce served with coleslaw",
            "image": "/static/foods/beef_brisket.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 15,
            "name": "Baby Back Ribs",
            "description": "Tender pork ribs with BBQ sauce served with coleslaw",
            "image": "/static/foods/baby_back_ribs.png",
            "price": 160.000,
        },
        {
            "restaurant_id": 15,
            "name": "Mac and Cheese",
            "description": "Creamy macaroni and cheese",
            "image": "/static/foods/mac_and_cheese.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 15,
            "name": "Cornbread",
            "description": "Sweet and moist cornbread",
            "image": "/static/foods/cornbread.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 15,
            "name": "Craft Beer",
            "description": "Local craft beer",
            "image": "/static/beverages/craft_beer.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 15,
            "name": "Sweet Tea",
            "description": "Refreshing iced tea with sugar",
            "image": "/static/beverages/sweet_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 15,
            "name": "Bourbon",
            "description": "Aged bourbon on the rocks",
            "image": "/static/beverages/bourbon.png",
            "price": 70.000,
        },
        # Seafood Delight
        {
            "restaurant_id": 16,
            "name": "Grilled Salmon",
            "description": "Grilled salmon with lemon herb sauce served with steamed vegetables",
            "image": "/static/foods/grilled_salmon.png",
            "price": 220.000,
        },
        {
            "restaurant_id": 16,
            "name": "Shrimp Scampi",
            "description": "Saut√©ed shrimp with garlic, white wine, and butter served with pasta",
            "image": "/static/foods/shrimp_scampi.png",
            "price": 200.000,
        },
        {
            "restaurant_id": 16,
            "name": "Clam Chowder",
            "description": "Creamy soup with clams, potatoes, and onions",
            "image": "/static/foods/clam_chowder.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 16,
            "name": "Fish and Chips",
            "description": "Battered fish with crispy fries and tartar sauce",
            "image": "/static/foods/fish_and_chips.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 16,
            "name": "Lobster Roll",
            "description": "Fresh lobster with mayo and celery on a toasted bun",
            "image": "/static/foods/lobster_roll.png",
            "price": 180.000,
        },
        {
            "restaurant_id": 16,
            "name": "White Wine",
            "description": "Refreshing white wine",
            "image": "/static/beverages/white_wine.png",
            "price": 70.000,
        },
        {
            "restaurant_id": 16,
            "name": "Craft Beer",
            "description": "Local craft beer",
            "image": "/static/beverages/craft_beer.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 16,
            "name": "Iced Tea",
            "description": "Refreshing iced tea",
            "image": "/static/beverages/iced_tea.png",
            "price": 30.000,
        },
        # Veggie Heaven
        {
            "restaurant_id": 17,
            "name": "Veggie Burger",
            "description": "Plant-based burger with lettuce, tomato, and onion served with sweet potato fries",
            "image": "/static/foods/veggie_burger.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 17,
            "name": "Quinoa Salad",
            "description": "Healthy salad with quinoa, mixed greens, and roasted vegetables",
            "image": "/static/foods/quinoa_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 17,
            "name": "Lentil Soup",
            "description": "Hearty soup with lentils and vegetables",
            "image": "/static/foods/lentil_soup.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 17,
            "name": "Stuffed Bell Peppers",
            "description": "Bell peppers filled with quinoa, beans, and vegetables",
            "image": "/static/foods/stuffed_bell_peppers.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 17,
            "name": "Vegan Chocolate Cake",
            "description": "Delicious chocolate cake made with plant-based ingredients",
            "image": "/static/foods/vegan_chocolate_cake.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 17,
            "name": "Green Juice",
            "description": "Healthy juice with kale, spinach, and apple",
            "image": "/static/beverages/green_juice.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 17,
            "name": "Herbal Tea",
            "description": "Hot tea with a choice of herbs",
            "image": "/static/beverages/herbal_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 17,
            "name": "Almond Milk Latte",
            "description": "Coffee with almond milk",
            "image": "/static/beverages/almond_milk_latte.png",
            "price": 40.000,
        },
        # Chicken Coop
        {
            "restaurant_id": 18,
            "name": "Fried Chicken",
            "description": "Crispy fried chicken served with mashed potatoes and gravy",
            "image": "/static/foods/fried_chicken.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 18,
            "name": "Chicken and Waffles",
            "description": "Fried chicken with fluffy waffles and maple syrup",
            "image": "/static/foods/chicken_and_waffles.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 18,
            "name": "Chicken Caesar Salad",
            "description": "Classic salad with romaine lettuce, croutons, Parmesan cheese, and grilled chicken",
            "image": "/static/foods/chicken_caesar_salad.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 18,
            "name": "Chicken Noodle Soup",
            "description": "Hearty soup with chicken, noodles, and vegetables",
            "image": "/static/foods/chicken_noodle_soup.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 18,
            "name": "Chicken Pot Pie",
            "description": "Comforting pie with chicken and vegetables in a creamy sauce",
            "image": "/static/foods/chicken_pot_pie.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 18,
            "name": "Craft Beer",
            "description": "Local craft beer",
            "image": "/static/beverages/craft_beer.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 18,
            "name": "Sweet Tea",
            "description": "Refreshing iced tea with sugar",
            "image": "/static/beverages/sweet_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 18,
            "name": "Lemonade",
            "description": "Refreshing lemonade",
            "image": "/static/beverages/lemonade.png",
            "price": 40.000,
        },
        # Pasta Paradise
        {
            "restaurant_id": 19,
            "name": "Spaghetti Carbonara",
            "description": "Creamy pasta with pancetta, egg, and Pecorino Romano cheese",
            "image": "/static/foods/spaghetti_carbonara.png",
            "price": 140.000,
        },
        {
            "restaurant_id": 19,
            "name": "Fettuccine Alfredo",
            "description": "Pasta with creamy Alfredo sauce and Parmesan cheese",
            "image": "/static/foods/fettuccine_alfredo.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 19,
            "name": "Lasagna",
            "description": "Layered pasta with ground beef, tomato sauce, and cheese",
            "image": "/static/foods/lasagna.png",
            "price": 160.000,
        },
        {
            "restaurant_id": 19,
            "name": "Pesto Pasta",
            "description": "Pasta with basil pesto sauce and Parmesan cheese",
            "image": "/static/foods/pesto_pasta.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 19,
            "name": "Tiramisu",
            "description": "Classic Italian dessert with coffee-soaked ladyfingers and mascarpone cream",
            "image": "/static/foods/tiramisu.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 19,
            "name": "Chianti",
            "description": "Italianred wine",
            "image": "/static/beverages/chianti.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 19,
            "name": "Espresso",
            "description": "Strong Italian coffee",
            "image": "/static/beverages/espresso.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 19,
            "name": "Limoncello",
            "description": "Italian lemon liqueur",
            "image": "/static/beverages/limoncello.png",
            "price": 70.000,
        },
        # Bakery Bliss
        {
            "restaurant_id": 20,
            "name": "Croissant",
            "description": "Flaky and buttery French pastry",
            "image": "/static/foods/croissant.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 20,
            "name": "Baguette",
            "description": "Crusty French bread",
            "image": "/static/foods/baguette.png",
            "price": 20.000,
        },
        {
            "restaurant_id": 20,
            "name": "Cinnamon Roll",
            "description": "Sweet roll with cinnamon and cream cheese frosting",
            "image": "/static/foods/cinnamon_roll.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 20,
            "name": "Blueberry Muffin",
            "description": "Moist muffin with blueberries",
            "image": "/static/foods/blueberry_muffin.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 20,
            "name": "Chocolate Chip Cookie",
            "description": "Sweet cookie with chocolate chips",
            "image": "/static/foods/chocolate_chip_cookie.png",
            "price": 20.000,
        },
        {
            "restaurant_id": 20,
            "name": "Coffee",
            "description": "Hot coffee with a choice of milk",
            "image": "/static/beverages/coffee.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 20,
            "name": "Tea",
            "description": "Hot tea with a choice of flavors",
            "image": "/static/beverages/tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 20,
            "name": "Hot Chocolate",
            "description": "Sweet hot chocolate with whipped cream",
            "image": "/static/beverages/hot_chocolate.png",
            "price": 40.000,
        },
        # Salad Bar
        {
            "restaurant_id": 21,
            "name": "Greek Salad",
            "description": "Fresh salad with tomatoes, cucumbers, olives, and feta cheese",
            "image": "/static/foods/greek_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 21,
            "name": "Caesar Salad",
            "description": "Classic salad with romaine lettuce, croutons, and Parmesan cheese",
            "image": "/static/foods/caesar_salad.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 21,
            "name": "Cobb Salad",
            "description": "Hearty salad with chicken, bacon, avocado, eggs, and blue cheese",
            "image": "/static/foods/cobb_salad.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 21,
            "name": "Spinach Salad",
            "description": "Healthy salad with spinach, strawberries, almonds, and goat cheese",
            "image": "/static/foods/spinach_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 21,
            "name": "Quinoa Salad",
            "description": "Healthy salad with quinoa, mixed greens, and roasted vegetables",
            "image": "/static/foods/quinoa_salad.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 21,
            "name": "Green Juice",
            "description": "Healthy juice with kale, spinach, and apple",
            "image": "/static/beverages/green_juice.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 21,
            "name": "Herbal Tea",
            "description": "Hot tea with a choice of herbs",
            "image": "/static/beverages/herbal_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 21,
            "name": "Fruit Smoothie",
            "description": "Blended smoothie with a choice of fruits and almond milk",
            "image": "/static/beverages/fruit_smoothie.png",
            "price": 60.000,
        },
        # Ramen House
        {
            "restaurant_id": 22,
            "name": "Tonkotsu Ramen",
            "description": "Ramen with pork bone broth, pork belly, and soft-boiled egg",
            "image": "/static/foods/tonkotsu_ramen.png",
            "price": 120.000,
        },
        {
            "restaurant_id": 22,
            "name": "Shoyu Ramen",
            "description": "Ramen with soy sauce broth, chicken, and soft-boiled egg",
            "image": "/static/foods/shoyu_ramen.png",
            "price": 110.000,
        },
        {
            "restaurant_id": 22,
            "name": "Miso Ramen",
            "description": "Ramen with miso broth, corn, and soft-boiled egg",
            "image": "/static/foods/miso_ramen.png",
            "price": 110.000,
        },
        {
            "restaurant_id": 22,
            "name": "Gyoza",
            "description": "Japanese dumplings with pork and vegetables",
            "image": "/static/foods/gyoza.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 22,
            "name": "Takoyaki",
            "description": "Fried octopus balls with bonito flakes and mayo",
            "image": "/static/foods/takoyaki.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 22,
            "name": "Sake",
            "description": "Japanese rice wine",
            "image": "/static/beverages/sake.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 22,
            "name": "Green Tea",
            "description": "Hot Japanese green tea",
            "image": "/static/beverages/green_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 22,
            "name": "Plum Wine",
            "description": "Sweet Japanese wine made from plums",
            "image": "/static/beverages/plum_wine.png",
            "price": 70.000,
        },
        # Ice Cream Shop
        {
            "restaurant_id": 23,
            "name": "Vanilla Ice Cream",
            "description": "Creamy ice cream with vanilla flavor",
            "image": "/static/foods/vanilla_ice_cream.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 23,
            "name": "Chocolate Ice Cream",
            "description": "Rich ice cream with chocolate flavor",
            "image": "/static/foods/chocolate_ice_cream.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 23,
            "name": "Strawberry Ice Cream",
            "description": "Sweet ice cream with strawberry flavor",
            "image": "/static/foods/strawberry_ice_cream.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 23,
            "name": "Mint Chocolate Chip Ice Cream",
            "description": "Refreshing ice cream with mint and chocolate chips",
            "image": "/static/foods/mint_chocolate_chip_ice_cream.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 23,
            "name": "Cookie Dough Ice Cream",
            "description": "Delicious ice cream with chunks of cookie dough",
            "image": "/static/foods/cookie_dough_ice_cream.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 23,
            "name": "Root Beer Float",
            "description": "Classic dessert with root beer and vanilla ice cream",
            "image": "/static/beverages/root_beer_float.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 23,
            "name": "Milkshake",
            "description": "Creamy milkshake with vanilla, chocolate, or strawberry",
            "image": "/static/beverages/milkshake.png",
            "price": 50.000,
        },
        {
            "restaurant_id": 23,
            "name": "Iced Coffee",
            "description": "Refreshing iced coffee with a choice of milk",
            "image": "/static/beverages/iced_coffee.png",
            "price": 40.000,
        },
        # Sandwich Shop
        {
            "restaurant_id": 24,
            "name": "Turkey Sandwich",
            "description": "Sandwich with turkey, lettuce, tomato, and mayo",
            "image": "/static/foods/turkey_sandwich.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 24,
            "name": "Ham Sandwich",
            "description": "Sandwich with ham, cheese, lettuce, and mustard",
            "image": "/static/foods/ham_sandwich.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 24,
            "name": "Tuna Salad Sandwich",
            "description": "Sandwich with tuna salad and lettuce",
            "image": "/static/foods/tuna_salad_sandwich.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 24,
            "name": "BLT Sandwich",
            "description": "Classic sandwich with bacon, lettuce, and tomato",
            "image": "/static/foods/blt_sandwich.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 24,
            "name": "Grilled Cheese Sandwich",
            "description": "Comforting sandwich with melted cheese",
            "image": "/static/foods/grilled_cheese_sandwich.png",
            "price": 60.000,
        },
        {
            "restaurant_id": 24,
            "name": "Soda",
            "description": "Refreshing carbonated drink",
            "image": "/static/beverages/soda.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 24,
            "name": "Iced Tea",
            "description": "Refreshing iced tea",
            "image": "/static/beverages/iced_tea.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 24,
            "name": "Coffee",
            "description": "Hot coffee with a choice of milk",
            "image": "/static/beverages/coffee.png",
            "price": 30.000,
        },
        # Pancake House
        {
            "restaurant_id": 25,
            "name": "Buttermilk Pancakes",
            "description": "Fluffy pancakes served with butter and maple syrup",
            "image": "/static/foods/buttermilk_pancakes.png",
            "price": 80.000,
        },
        {
            "restaurant_id": 25,
            "name": "Blueberry Pancakes",
            "description": "Pancakes with blueberries served with butter and maple syrup",
            "image": "/static/foods/blueberry_pancakes.png",
            "price": 90.000,
        },
        {
            "restaurant_id": 25,
            "name": "Chocolate Chip Pancakes",
            "description": "Pancakes with chocolate chips served with butter and maple syrup",
            "image": "/static/foods/chocolate_chip_pancakes.png",
            "price": 90.000,
        },
        {
            "restaurant_id": 25,
            "name": "Bacon and Egg Pancakes",
            "description": "Pancakes with bacon and eggs served with butter and maple syrup",
            "image": "/static/foods/bacon_and_egg_pancakes.png",
            "price": 100.000,
        },
        {
            "restaurant_id": 25,
            "name": "Banana Nut Pancakes",
            "description": "Pancakes with bananas and nuts served with butter and maple syrup",
            "image": "/static/foods/banana_nut_pancakes.png",
            "price": 90.000,
        },
        {
            "restaurant_id": 25,
            "name": "Coffee",
            "description": "Hot coffee with a choice of milk",
            "image": "/static/beverages/coffee.png",
            "price": 30.000,
        },
        {
            "restaurant_id": 25,
            "name": "Orange Juice",
            "description": "Freshly squeezed orange juice",
            "image": "/static/beverages/orange_juice.png",
            "price": 40.000,
        },
        {
            "restaurant_id": 25,
            "name": "Milk",
            "description": "Cold milk",
            "image": "beverages/milk.png",
            "price": 20.000,
        },
        # bun cha ta
        {
            "restaurant_id": 1,
            "name": "Bun Cha Ta",
            "description": "Bun Cha Ta is a Vietnamese dish of grilled pork and noodles served with a sweet and sour sauce.",
            "image": "/static/foods/bun_cha_ta.png",
            "price": 100.000,
        },
    ]

    # Populate restaurants table
    for restaurant in restaurants:
        add_restaurant(
            db, restaurant["name"], restaurant["description"], restaurant["image"]
        )

    # Populate foods table
    for food in foods:
        add_food(
            db,
            food["restaurant_id"],
            food["name"],
            food["description"],
            food["image"],
            food["price"],
        )

    print("Data populated successfully!")


if __name__ == "__main__":
    main()

#### 2.7. `README.md`
- **M·ª•c ƒë√≠ch**: Cung c·∫•p h∆∞·ªõng d·∫´n v·ªÅ c√°ch t·∫°o v√† populate c∆° s·ªü d·ªØ li·ªáu.
- **N·ªôi dung**: H∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc ƒë·ªÉ t·∫°o c∆° s·ªü d·ªØ li·ªáu t·ª´ ƒë·∫ßu, bao g·ªìm ch·∫°y c√°c file `create_tables.py`, `populate_fake_data.py`, v√† `qdrant_restaurants.py`.
- N·ªôi dung trong readme.md: 
# Data

In order to create a new database from scratch:

- ```python create_tables.py ``` - this will create the database.db
- ```python populate_fake_data.py``` - this will populate it with fake data
- ```python qdrant_restaurants.py``` - this will upload the data to the qdrant database setup (remember to have setup a qdrant vector db)

#### 2.8. `test_print_data.py`
- **M·ª•c ƒë√≠ch**: Ki·ªÉm tra v√† in ra d·ªØ li·ªáu t·ª´ c∆° s·ªü d·ªØ li·ªáu.
- **N·ªôi dung**:
  - H√†m `get_restaurants` v√† `get_foods` ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu t·ª´ c√°c b·∫£ng.
  - H√†m `main()` ƒë·ªÉ in ra d·ªØ li·ªáu c·ªßa c√°c nh√† h√†ng v√† m√≥n ƒÉn d∆∞·ªõi d·∫°ng DataFrame c·ªßa pandas.
- Code trong file `test_print_data.py`:
import pandas as pd
from sqlalchemy.orm import Session

from database import SessionLocal
from data_models import Restaurant, Foods

def get_restaurants(db: Session):
    return db.query(Restaurant).all()

def get_foods(db: Session):
    return db.query(Foods).all()

def main():
    db = SessionLocal()

    # Fetch data from the restaurants table
    restaurants = get_restaurants(db)

    # Convert the data to a pandas DataFrame
    restaurant_data = [{"id": r.id, "name": r.name, "description": r.description, "image": r.image} for r in restaurants]
    restaurant_df = pd.DataFrame(restaurant_data)

    # Print the Restaurants DataFrame
    print("Restaurants:")
    print(restaurant_df)

    # Fetch data from the foods table
    foods = get_foods(db)

    # Convert the data to a pandas DataFrame
    food_data = [{"id": f.id, "restaurant_id": f.restaurant_id, "name": f.name, "description": f.description, "image": f.image, "price": f.price} for f in foods]
    food_df = pd.DataFrame(food_data)

    # Print the Foods DataFrame
    print("\nFoods:")
    print(food_df)
    breakpoint()

if __name__ == "__main__":
    main()

2.9. `qdrant_restaurants.py`
- Code trong file `qdrant_restaurants.py`:
# Standard library imports
import os
import uuid
import logging
from typing import List, Dict, Any

# Third-party imports
from dotenv import load_dotenv
import pandas as pd
from sqlalchemy.orm import Session

# LangChain imports
from langchain_community.vectorstores import Qdrant
from langchain.embeddings import HuggingFaceInferenceAPIEmbeddings
from langchain.text_splitter import CharacterTextSplitter
from langchain_groq import ChatGroq
from langchain.schema import Document
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain

# Qdrant imports
from qdrant_client import QdrantClient
from qdrant_client.models import Distance, VectorParams

# Local imports
try:
    from data_utils import get_db, get_restaurants, get_foods
    from data_models import Restaurant, Foods
    from database import SessionLocal
except:
    from .data_utils import get_db, get_restaurants, get_foods
    from .data_models import Restaurant, Foods
    from .database import SessionLocal

# Load environment variables
load_dotenv()

# Qdrant configuration
QDRANT_URL = (
    "https://9de09ba7-f0fa-4003-9310-18b9f09eeba4.us-east4-0.gcp.cloud.qdrant.io:6333"
)
QDRANT_API_KEY = "4G1TjP9sUW3ZnzuWQhy436xtCYfyVDSatUy9r4OzQDXQocDcP_dgtg"
COLLECTION_NAME = "auto-food-order"


class QdrantService:
    def __init__(self):
        # Initialize Qdrant client
        self.client = QdrantClient(url=QDRANT_URL, api_key=QDRANT_API_KEY)
        self.collection_name = COLLECTION_NAME
        self.embeddings = HuggingFaceInferenceAPIEmbeddings(
            model_name="intfloat/multilingual-e5-small",
            api_key=os.getenv("HUGGINGFACE_API_KEY"),
        )

    def setup_collection(self):
        """Setup Qdrant collection"""
        self.client.recreate_collection(
            collection_name=self.collection_name,
            vectors_config=VectorParams(size=384, distance=Distance.COSINE),
        )
        return self.client.get_collection(collection_name=self.collection_name)

    def process_restaurants(self) -> pd.DataFrame:
        """Process restaurant data for vector search"""
        db = SessionLocal()
        try:
            # Get data from database
            restaurants = get_restaurants(db)
            foods = get_foods(db)

            # Create DataFrames
            restaurant_df = pd.DataFrame(
                [
                    {
                        "id": r.id,
                        "name": r.name,
                        "description": r.description,
                    }
                    for r in restaurants
                ]
            )

            food_df = pd.DataFrame(
                [
                    {
                        "id": f.id,
                        "restaurant_id": f.restaurant_id,
                        "name": f.name,
                        "description": f.description,
                        "price": f.price,
                    }
                    for f in foods
                ]
            )

            # Process and merge data
            food_df = food_df.rename(
                columns={
                    "id": "food_id",
                    "restaurant_id": "id",
                    "name": "food_name",
                    "description": "food_description",
                }
            )

            df = pd.merge(restaurant_df, food_df, on="id")
            df["food_text"] = "\n-" + df["food_name"] + "\n" + df["food_description"]

            # Group by restaurant
            df = (
                df.groupby("id")
                .agg({"name": "first", "description": "first", "food_text": "sum"})
                .reset_index()
            )

            # Create final text
            df["text"] = (
                "```"
                + df["name"]
                + "\nRestaurant description: "
                + df["description"]
                + "\nFood available:"
                + df["food_text"]
                + "\n```"
            )

            return df
        finally:
            db.close()

    def create_embeddings(self, df: pd.DataFrame) -> List[Dict]:
        """Create embeddings for restaurant data"""
        text_splitter = CharacterTextSplitter(
            separator="\n", chunk_size=1000, chunk_overlap=200, length_function=len
        )

        points = []
        for _, row in df.iterrows():
            chunks = text_splitter.split_text(row["text"])
            for chunk in chunks:
                embedding = self.embeddings.embed_documents([chunk])[0]
                points.append(
                    {
                        "id": str(uuid.uuid4()),
                        "vector": embedding,
                        "payload": {
                            "text": chunk,
                            "restaurant_id": row["id"],
                            "restaurant_name": row["name"],
                            "restaurant_description": row["description"],
                            "restaurant_menu": row["food_text"],
                        },
                    }
                )
        return points

    def insert_vectors(self, points: List[Dict]):
        """Insert vectors into Qdrant"""
        return self.client.upsert(
            collection_name=self.collection_name, wait=True, points=points
        )

    def create_answer(self, query: str) -> str:
        """Generate answer for user query"""
        # Get embeddings and search
        query_embedding = self.embeddings.embed_documents([query])[0]
        search_results = self.client.search(
            collection_name=self.collection_name, query_vector=query_embedding, limit=1
        )

        # Create context from search results
        context = "\n---\n".join([result.payload["text"] for result in search_results])

        # Setup LLM chain
        prompt = PromptTemplate(
            input_variables=["context", "question"],
            template="""
            You are an assistant helping users with their food orders based on the following context.

            Context:
            {context}

            Question: {question}

            Answer:
            """,
        )

        llm = ChatGroq(
            temperature=0.3,
            model="llama-3.1-70b-versatile",
            api_key=os.getenv("GROQ_API_KEY"),
        )

        chain = LLMChain(llm=llm, prompt=prompt)
        return chain.run(context=context, question=query)


def main():
    # Initialize service
    qdrant_service = QdrantService()

    try:
        # Setup collection
        print("Setting up Qdrant collection...")
        qdrant_service.setup_collection()

        # Process data and create embeddings
        print("Processing restaurant data...")
        df = qdrant_service.process_restaurants()

        print("Creating embeddings...")
        points = qdrant_service.create_embeddings(df)

        print("Inserting vectors...")
        qdrant_service.insert_vectors(points)

        # Test query
        query = "testing, I would like to order a large pizza with mango, thai food, taco fiesta"
        print("\nTesting query:", query)
        answer = qdrant_service.create_answer(query)
        print("\nResponse:", answer)

    except Exception as e:
        logging.error(f"Error occurred: {str(e)}")
        raise


if __name__ == "__main__":
    main()

### 3. T√≥m t·∫Øt
Folder `data` ch·ª©a c√°c file quan tr·ªçng ƒë·ªÉ qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu c·ªßa ·ª©ng d·ª•ng, bao g·ªìm vi·ªác ƒë·ªãnh nghƒ©a schema, th√™m d·ªØ li·ªáu, v√† truy xu·∫•t d·ªØ li·ªáu. C√°c file n√†y gi√∫p t·ªï ch·ª©c v√† qu·∫£n l√Ω d·ªØ li·ªáu m·ªôt c√°ch hi·ªáu qu·∫£, h·ªó tr·ª£ cho c√°c ch·ª©c nƒÉng kh√°c c·ªßa ·ª©ng d·ª•ng. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä

-   **`backend/src/endpoints`:** 


Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `endpoints` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `endpoints`

```
backend/src/endpoints/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ router.py
‚îî‚îÄ‚îÄ routers.py
```


### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. `__init__.py`
- **M·ª•c ƒë√≠ch**: File n√†y cho ph√©p th∆∞ m·ª•c `endpoints` ƒë∆∞·ª£c coi nh∆∞ m·ªôt module Python.
- **N·ªôi dung**: 
  - Import c√°c router t·ª´ `routers` v√† `health_check`.
  - ƒê·ªãnh nghƒ©a h√†m `include_all_routers(app: FastAPI, handler, CONFIG)` ƒë·ªÉ th√™m t·∫•t c·∫£ c√°c router v√†o ·ª©ng d·ª•ng FastAPI.

#### 2.2. `README.md`
- **M·ª•c ƒë√≠ch**: Cung c·∫•p th√¥ng tin v·ªÅ c√°c API routes c·ªßa ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - M√¥ t·∫£ m·ª•c ƒë√≠ch c·ªßa file `routers.py`, bao g·ªìm c√°c route cho vi·ªác g·ª≠i tin nh·∫Øn, g·ªçi h√†m, chuy·ªÉn ƒë·ªïi √¢m thanh th√†nh vƒÉn b·∫£n, t·∫°o √¢m thanh t·ª´ vƒÉn b·∫£n, v√† truy xu·∫•t d·ªØ li·ªáu t·ª´ c∆° s·ªü d·ªØ li·ªáu.
  - Li·ªát k√™ c√°c endpoint v√† m√¥ t·∫£ ch·ª©c nƒÉng c·ªßa t·ª´ng endpoint.

#### 2.3. `router.py`
- **M·ª•c ƒë√≠ch**: ƒê·ªãnh nghƒ©a c√°c route c∆° b·∫£n cho ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - T·∫°o m·ªôt router FastAPI v√† ƒë·ªãnh nghƒ©a route g·ªëc (`/`) ƒë·ªÉ tr·∫£ v·ªÅ th√¥ng ƒëi·ªáp ch√†o m·ª´ng.
- Code trong file `router.py`:
from fastapi import APIRouter

router = APIRouter()


@router.get("/")
async def root():
    return {"message": "Welcome to Food Order API"}

#### 2.4. `routers.py`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c route API ch√≠nh cho ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a h√†m `create_router(handler: MainHandler, CONFIG: Dict)`, t·∫°o v√† c·∫•u h√¨nh router API.
  - C√°c endpoint ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a bao g·ªìm:
    - `POST /chat/send_message`: Nh·∫≠n tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng v√† tr·∫£ v·ªÅ ph·∫£n h·ªìi.
    - `POST /chat/function_call`: Th·ª±c hi·ªán c√°c cu·ªôc g·ªçi h√†m t·ª´ frontend.
    - `POST /chat/transcribe`: Chuy·ªÉn ƒë·ªïi √¢m thanh th√†nh vƒÉn b·∫£n.
    - `POST /chat/tts`: T·∫°o √¢m thanh t·ª´ vƒÉn b·∫£n.
    - `GET /restaurants/`: Truy xu·∫•t t·∫•t c·∫£ c√°c nh√† h√†ng t·ª´ c∆° s·ªü d·ªØ li·ªáu.
    - `GET /restaurants/{restaurant_id}/foods/`: Truy xu·∫•t t·∫•t c·∫£ c√°c m√≥n ƒÉn t·ª´ m·ªôt nh√† h√†ng c·ª• th·ªÉ.
- Code trong file `routers.py`:
"""File containing root routes"""

from fastapi.routing import APIRouter
from fastapi import Depends, HTTPException, File, UploadFile
from fastapi.encoders import jsonable_encoder
from fastapi.staticfiles import StaticFiles
import base64
import json
import tempfile
import logging
from pathlib import Path
from typing import Dict, List, Any

# Schemas
from src.schemas import (
    ChatRequest,
    FunctionCall,
    AudioTranscriptRequest,
    AudioTTSRequest,
)
from src.handlers import MainHandler
from src.data.data_models import Restaurant, Foods

# Services
from src.services import groq_service, functions

# Data
from sqlalchemy.orm import Session
from src.data.data_utils import get_db


def create_router(handler: MainHandler, CONFIG: Dict) -> APIRouter:
    """Create and configure the API router

    Args:
        handler: Main application handler
        CONFIG: Application configuration

    Returns:
        Configured APIRouter instance
    """
    router = APIRouter()
    client = handler.groq_client

    @router.post("/chat/send_message")
    async def send_message(prompt_request: ChatRequest) -> Dict:
        """Handle chat messages and generate responses"""
        prompt_handler = handler.prompt_handler
        messages = prompt_handler.get_messages(prompt_request)

        functions = []
        if prompt_request.function_call:
            functions = prompt_handler.get_functions()

        try:
            prompt_response = await groq_service.chat_completion(
                messages=messages, CONFIG=CONFIG, functions=functions, client=client
            )
            response = prompt_handler.prepare_response(prompt_response)
        except Exception as e:
            logging.error(f"Chat error: {str(e)}")
            response = {
                "response": "Oops there was an error, please try again",
                "function_call": None,
            }
        return response

    @router.post("/chat/function_call")
    async def function_call(function_call: FunctionCall) -> Dict:
        """Execute function calls from frontend"""
        function_call_properties = jsonable_encoder(function_call)
        function_name = function_call_properties["name"]
        function_arguments = json.loads(function_call_properties["arguments"])

        available_functions = {
            "get_restaurant_pages": lambda kwargs: functions.find_restaurant_pages(
                CONFIG=CONFIG, **kwargs
            ),
            "open_restaurant_page": lambda kwargs: functions.open_restaurant_page(
                CONFIG=CONFIG, **kwargs
            ),
            "close_restaurant_page": lambda _: functions.dummy_function(),
            "get_user_actions": lambda _: functions.dummy_function(),
            "get_menu_of_restaurant": lambda kwargs: functions.get_menu_of_restaurant(
                CONFIG=CONFIG, **kwargs
            ),
            "add_food_to_cart": lambda kwargs: functions.add_food_to_cart(
                CONFIG=CONFIG, **kwargs
            ),
            "remove_food_from_cart": lambda kwargs: functions.remove_food_from_cart(
                CONFIG=CONFIG, **kwargs
            ),
            "open_shopping_cart": lambda _: functions.dummy_function(),
            "close_shopping_cart": lambda _: functions.dummy_function(),
            "place_order": lambda _: functions.dummy_function(),
            "activate_handsfree": lambda _: functions.dummy_function(),
        }

        function_response = await available_functions[function_name](function_arguments)
        return {"response": function_response}

    @router.post("/chat/transcribe")
    async def generate_transcription(audio_req: AudioTranscriptRequest) -> Dict:
        """Transcribe audio to text"""
        audio_handler = handler.audio_handler
        audio_segment, _ = audio_handler.extract_audio_segment(audio_req.audio)

        with tempfile.NamedTemporaryFile(suffix=".mp3", delete=True) as tmp_file:
            audio_segment.export(tmp_file.name, format="mp3")
            speech_filepath = Path(tmp_file.name)
            transcripted_response = await handler.whisper_service(
                audio_file=open(speech_filepath, "rb"), CONFIG=CONFIG
            )
        return {"response": transcripted_response}

    @router.post("/chat/tts")
    async def generate_tts(tts_req: AudioTTSRequest) -> Dict:
        """Generate text-to-speech audio"""
        audio = await groq_service.tts(text=tts_req.text, CONFIG=CONFIG, client=client)
        return {"response": audio}

    @router.get("/restaurants/")
    def get_restaurants(db: Session = Depends(get_db)) -> List[Dict]:
        """Get all restaurants with static image paths"""
        restaurants = db.query(Restaurant).all()
        return [
            {
                "id": r.id,
                "name": r.name,
                "description": r.description,
                "image": f"/static/{r.image}" if r.image else None,
            }
            for r in restaurants
        ]

    @router.get("/restaurants/{restaurant_id}/foods/")
    def get_foods_from_restaurant(
        restaurant_id: int, db: Session = Depends(get_db)
    ) -> List[Dict]:
        """Get foods for a specific restaurant with static image paths"""
        restaurant = db.query(Restaurant).filter(Restaurant.id == restaurant_id).first()
        if not restaurant:
            raise HTTPException(status_code=404, detail="Restaurant not found")

        foods = db.query(Foods).filter(Foods.restaurant_id == restaurant_id).all()
        return [
            {
                "id": f.id,
                "name": f.name,
                "description": f.description,
                "image": f"/static/{f.image}" if f.image else None,
                "price": f.price,
            }
            for f in foods
        ]

    return router

### 3. T√≥m t·∫Øt
Folder `endpoints` ch·ª©a c√°c file quan tr·ªçng ƒë·ªÉ ƒë·ªãnh nghƒ©a v√† qu·∫£n l√Ω c√°c API routes c·ªßa ·ª©ng d·ª•ng. C√°c file n√†y gi√∫p t·ªï ch·ª©c v√† x·ª≠ l√Ω c√°c y√™u c·∫ßu t·ª´ frontend, t∆∞∆°ng t√°c v·ªõi c√°c d·ªãch v·ª• v√† tr·∫£ v·ªÅ d·ªØ li·ªáu cho ng∆∞·ªùi d√πng. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä

- **`backend/src/handlers`:**


D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `handlers` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `handlers`

```
backend/src/handlers/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ audio_handler.py
‚îú‚îÄ‚îÄ main_handler.py
‚îú‚îÄ‚îÄ prompt_handler.py
‚îî‚îÄ‚îÄ vectordb_handler.py
```

D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c c·ªßa th∆∞ m·ª•c `@handlers` trong d·ª± √°n c·ªßa b·∫°n, bao g·ªìm c√°c file v√† ch·ª©c nƒÉng c·ªßa ch√∫ng:

### C·∫•u tr√∫c th∆∞ m·ª•c `@handlers`

1. **`__init__.py`**
   - **Ch·ª©c nƒÉng**: File n√†y cho ph√©p Python nh·∫≠n di·ªán th∆∞ m·ª•c `handlers` nh∆∞ m·ªôt package. N√≥ import `MainHandler` ƒë·ªÉ c√≥ th·ªÉ s·ª≠ d·ª•ng trong c√°c module kh√°c.

2. **`main_handler.py`**
   - **Ch·ª©c nƒÉng**: 
   - **`main_handler.py`**: G·ªçi c√°c ph∆∞∆°ng th·ª©c t·ª´ `audio_handler.py` ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu √¢m thanh.
     - Centralizes all the other handlers and makes them available for use in routers.
     - X·ª≠ l√Ω c√°c y√™u c·∫ßu chat v√† audio, bao g·ªìm vi·ªác g·ªçi c√°c h√†m t·ª´ c√°c handler kh√°c nh∆∞ `PromptHandler` v√† `AudioHandler`.
- Code c·ªßa file `main_handler.py`:
from typing import Dict, Any, Optional
from fastapi import HTTPException

from .prompt_handler import PromptHandler
from .audio_handler import AudioHandler
from .vector_handler import VectorHandler

class MainHandler:
    def __init__(self):
        self.prompt_handler = PromptHandler()
        self.audio_handler = AudioHandler()
        self.vector_handler = VectorHandler()

    async def process_chat_request(self, request: Dict[str, Any]) -> Dict[str, Any]:
        """Process chat request and generate response"""
        try:
            # Get chat history and query
            chat_history = request.get("query", {}).get("history", [])
            
            # Generate response using Groq
            response = await self.prompt_handler.generate_response(chat_history)
            
            return {"response": response}
            
        except Exception as e:
            raise HTTPException(status_code=500, detail=str(e))

    async def process_audio_request(self, audio_file: bytes) -> str:
        """Process audio request and convert to text"""
        try:
            return await self.audio_handler.speech_to_text(audio_file)
        except Exception as e:
            raise HTTPException(status_code=500, detail=str(e))
### Ph√¢n t√≠ch main_handler.py
- process_audio_request: G·ªçi ph∆∞∆°ng th·ª©c t·ª´ audio_handler ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu √¢m thanh.

3. **`prompt_handler.py`**
   - **Ch·ª©c nƒÉng**: 
     - Qu·∫£n l√Ω c√°c prompt v√† t·ªï ch·ª©c ch√∫ng tr∆∞·ªõc khi g·ªçi API.
     - T·∫°o v√† ƒë·ªãnh d·∫°ng c√°c prompt cho vi·ªác t∆∞∆°ng t√°c v·ªõi m√¥ h√¨nh ng√¥n ng·ªØ (LLM) v√† x·ª≠ l√Ω ph·∫£n h·ªìi t·ª´ m√¥ h√¨nh.
- Code c·ªßa file `prompt_handler.py`:

from typing import List, Dict, Any
from langchain_groq import ChatGroq
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain

from ..config import settings
from src.prompts.functions import ALL_ALLOWED_FUNCTIONS

class PromptHandler:
    def __init__(self):
        self.llm = ChatGroq(
            temperature=0.3,
            model="llama-3.1-70b-versatile",
            api_key=settings.GROQ_API_KEY
        )

    async def generate_response(self, chat_history: List[Dict[str, Any]]) -> Dict[str, Any]:
        """Generate response using Groq"""
        # Create system prompt
        system_prompt = """You are an assistant helping users with their food orders.
        Be friendly and helpful while assisting with the order process."""
        
        # Create conversation prompt
        conversation = "\n".join([
            f"{msg['role']}: {msg['content']}" 
            for msg in chat_history
        ])

        prompt = PromptTemplate(
            input_variables=["system", "conversation"],
            template="{system}\n\nConversation:\n{conversation}\n\nAssistant:"
        )

        chain = LLMChain(llm=self.llm, prompt=prompt)
        response = chain.run(system=system_prompt, conversation=conversation)

        return self.prepare_response(response)

    def prepare_response(self, response) -> Dict[str, Any]:
        """Formats the response from the system"""
        response = jsonable_encoder(response)
        return {
            "response": response["choices"][0]["message"]["content"],
            "function_call": response["choices"][0]["message"].get("function_call", None),
        }

    def get_functions(self) -> List[Dict[str, Any]]:
        """Returns the functions signatures"""
        return ALL_ALLOWED_FUNCTIONS

4. **`audio_handler.py`**
- **`audio_handler.py`**: Ch·ª©a c√°c ph∆∞∆°ng th·ª©c ƒë·ªÉ x·ª≠ l√Ω √¢m thanh v√† phi√™n √¢m.
   - **Ch·ª©c nƒÉng**: 
     - X·ª≠ l√Ω √¢m thanh v√† phi√™n √¢m t·ª´ √¢m thanh sang vƒÉn b·∫£n.
     - Chuy·ªÉn ƒë·ªïi √¢m thanh t·ª´ ƒë·ªãnh d·∫°ng base64 v√† s·ª≠ d·ª•ng m√¥ h√¨nh Whisper ƒë·ªÉ phi√™n √¢m.
- Code c·ªßa file `audio_handler.py`:

from typing import Optional, Tuple, Any
import base64
import io
import logging
from pathlib import Path
from tenacity import retry, wait_random, stop_after_attempt

# Audio processing
from pydub import AudioSegment
from io import BytesIO
import soundfile as sf
import numpy as np

# LangChain imports
from langchain_groq import ChatGroq
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain

class AudioHandler:
    """Handler for audio processing and transcription"""
    
    def __init__(self, config: dict):
        """Initialize AudioHandler with configuration
        
        Args:
            config: Application configuration dictionary
        """
        self.config = config
        self.groq_api_key = config["groq"]["api_key"]
        self.model_name = "whisper-large-v3"
        self.llm_model = "llama-3.1-70b-versatile"

    def extract_audio_segment(self, audio_file: str) -> Tuple[AudioSegment, bytes]:
        """Extract audio segment from base64 encoded audio file
        
        Args:
            audio_file: Base64 encoded audio string
            
        Returns:
            Tuple containing AudioSegment and raw audio bytes
        """
        try:
            audio_data = base64.b64decode(audio_file)
            audio_segment = AudioSegment.from_file(BytesIO(audio_data))
            return audio_segment, audio_data
        except Exception as e:
            logging.error(f"Error extracting audio: {str(e)}")
            raise

    @retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
    async def transcribe_audio(self, audio_file: Any) -> str:
        """Transcribe audio file using Groq Whisper
        
        Args:
            audio_file: Audio file object
            
        Returns:
            Transcribed text
        """
        try:
            # Read and prepare audio data
            audio_data = audio_file.read()
            buffer = io.BytesIO(audio_data)
            buffer.seek(0)
            
            # Convert audio to required format
            audio_array, sample_rate = sf.read(buffer)
            wav_buffer = io.BytesIO()
            sf.write(wav_buffer, audio_array, sample_rate, format='wav')
            wav_buffer.seek(0)
            
            # Initialize Groq client
            from groq import Client
            client = Client(api_key=self.groq_api_key)
            
            # Transcribe audio
            completion = client.audio.transcriptions.create(
                model=self.model_name,
                file=("audio.wav", wav_buffer),
                response_format="text"
            )
            
            return completion

        except Exception as e:
            logging.error(f"Transcription error: {str(e)}")
            raise

    async def generate_response(self, transcription: str) -> str:
        """Generate response using Groq LLM
        
        Args:
            transcription: Transcribed text to respond to
            
        Returns:
            Generated response text
        """
        try:
            if not transcription:
                return "No transcription available. Please try speaking again."

            # Initialize LLM
            llm = ChatGroq(
                temperature=0.3,
                model=self.llm_model,
                api_key=self.groq_api_key
            )
            
            # Setup prompt
            prompt = PromptTemplate(
                input_variables=["transcription"],
                template="""
                You are a helpful assistant processing voice commands.
                
                User said: {transcription}
                
                Please provide a clear and concise response:
                """
            )
            
            # Create and run chain
            chain = LLMChain(llm=llm, prompt=prompt)
            response = chain.run(transcription=transcription)
            
            return response

        except Exception as e:
            logging.error(f"Response generation error: {str(e)}")
            raise
### Ph√¢n t√≠ch audio_handler.py

- Kh·ªüi t·∫°o: Nh·∫≠n c·∫•u h√¨nh v√† API key t·ª´ Groq.
- extract_audio_segment: Tr√≠ch xu·∫•t ƒëo·∫°n √¢m thanh t·ª´ chu·ªói base64.
- transcribe_audio: 
  - ƒê·ªçc d·ªØ li·ªáu √¢m thanh v√† chuy·ªÉn ƒë·ªïi sang ƒë·ªãnh d·∫°ng WAV.
  - S·ª≠ d·ª•ng API Groq ƒë·ªÉ phi√™n √¢m √¢m thanh.
- generate_response: 
  - Nh·∫≠n phi√™n √¢m v√† t·∫°o ph·∫£n h·ªìi b·∫±ng c√°ch s·ª≠ d·ª•ng LLM t·ª´ Groq.

5. **`vector_handler.py`**
   - **Ch·ª©c nƒÉng**: 
     - Qu·∫£n l√Ω c√°c thao t√°c li√™n quan ƒë·∫øn t√¨m ki·∫øm vector trong c∆° s·ªü d·ªØ li·ªáu Qdrant.
     - T·∫°o embedding cho c√°c truy v·∫•n v√† t√¨m ki·∫øm c√°c nh√† h√†ng d·ª±a tr√™n embedding ƒë√≥.
- Code c·ªßa file `vector_handler.py`:

from typing import List, Dict, Any
from qdrant_client import QdrantClient
from langchain.embeddings import HuggingFaceInferenceAPIEmbeddings
from langchain_groq import ChatGroq
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate

from ..config import settings

class VectorHandler:
    def __init__(self):
        self.client = QdrantClient(
            url=settings.QDRANT_URL,
            api_key=settings.QDRANT_API_KEY
        )
        self.embeddings = HuggingFaceInferenceAPIEmbeddings(
            model_name="intfloat/multilingual-e5-small",
            api_key=settings.HUGGINGFACE_API_KEY
        )
        self.llm = ChatGroq(
            temperature=0.3,
            model="llama-3.1-70b-versatile",
            api_key=settings.GROQ_API_KEY
        )

    async def search_restaurants(self, query: str) -> str:
        """Search restaurants and generate response"""
        # Create embedding for query
        query_embedding = self.embeddings.embed_documents([query])[0]
        
        # Search in Qdrant
        results = self.client.search(
            collection_name=settings.COLLECTION_NAME,
            query_vector=query_embedding,
            limit=3
        )

        # Create context from results
        context = "\n---\n".join([result.payload['text'] for result in results])

        # Generate response using LangChain
        prompt = PromptTemplate(
            input_variables=["context", "question"],
            template="""
            You are an assistant helping users with their food orders based on the following context.
            Context: {context}
            Question: {question}
            Answer:
            """
        )

        chain = LLMChain(llm=self.llm, prompt=prompt)
        return chain.run(context=context, question=query)

6. **`README.md`**
   - **Ch·ª©c nƒÉng**: 
     - Cung c·∫•p th√¥ng tin m√¥ t·∫£ v·ªÅ c√°c handler, ch·ª©c nƒÉng c·ªßa t·ª´ng handler v√† c√°ch ch√∫ng t∆∞∆°ng t√°c v·ªõi nhau.

### T√≥m t·∫Øt
Th∆∞ m·ª•c `@handlers` ch·ª©a c√°c file x·ª≠ l√Ω kh√°c nhau cho c√°c ch·ª©c nƒÉng c·ªßa ·ª©ng d·ª•ng, bao g·ªìm x·ª≠ l√Ω √¢m thanh, qu·∫£n l√Ω prompt, v√† t√¨m ki·∫øm vector. M·ªói file c√≥ m·ªôt vai tr√≤ c·ª• th·ªÉ trong vi·ªác t·ªï ch·ª©c v√† x·ª≠ l√Ω d·ªØ li·ªáu, gi√∫p cho m√£ ngu·ªìn tr·ªü n√™n r√µ r√†ng v√† d·ªÖ b·∫£o tr√¨ h∆°n. 

- **`backend/src/prompts`:** 

D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c c·ªßa th∆∞ m·ª•c `@prompts` trong d·ª± √°n c·ªßa b·∫°n, bao g·ªìm c√°c file v√† ch·ª©c nƒÉng c·ªßa ch√∫ng:

### C·∫•u tr√∫c th∆∞ m·ª•c `@prompts`

1. **`README.md`**
   - **Ch·ª©c nƒÉng**: 
     - Cung c·∫•p th√¥ng tin m√¥ t·∫£ v·ªÅ c√°ch s·ª≠ d·ª•ng c√°c file trong th∆∞ m·ª•c `prompts`.
     - H∆∞·ªõng d·∫´n ng∆∞·ªùi d√πng c√°ch thay ƒë·ªïi t√≠nh c√°ch c·ªßa chatbot th√¥ng qua file `system.txt` v√† c√°ch c·∫•u h√¨nh c√°c h√†m trong `config.yaml`.
     - H∆∞·ªõng d·∫´n c√°ch t·∫°o h√†m m·ªõi v√† t√≠ch h·ª£p ch√∫ng v√†o h·ªá th·ªëng.
- N·ªôi dung trong file `README.md`:
# Prompts

## Chat

By editing [system.txt](./chat/system.txt) you can change the chatbot personality

## Functions

In (config.yaml)[/functions/config.yaml] you can edit the functions prompts:

```
functions:
 name: open_restaurant_page
    description: This function opens the page of a given restaurant, it can only open one restaurant at a time. Always confirm with the user that you are going to search and open a restaurant page with the information provided before calling the function. This function can only be called after the function get_restaurant_pages.
    parameters:
      type: object
      properties:
        restaurant_uuid:
          type: string
          description: The number of the restaurant page that comes in the function get_restaurant_pages previously called
    required: [restaurant_uuid]
    allow: true
```

This will recreate a [signatures.json](functions/signatures.json) file (that should not be touched). You can activate and deactivate a function using the `allow` flag. This will make the function invisible to the [chat_completion](../services/openai_service/chat_completion.py) api call


You can play with creating new functions by following the steps:

- Create a function in the (config.yaml)[/functions/config.yaml]
- Create a new function service like this [mock/dummy function](../services/functions/dummy_function.py)
- Import it in the [__init__.py](../services/functions/__init__.py)
- Add the function to the [routers.py](../endpoints/routers.py#72) in the `function_call` endpoint
```
available_function = {
    ... # Existent functions
    "new_function": lambda _: functions.new_function
}
```
- Edit the frontend [AppContainer.vue](../../../frontend/src/components/AppContainer.vue)
    - Add new method to handle the function they way you would like (e.g. [handleOpenRestaurant](../../../frontend/src/components/AppContainer.vue#379))
    - Add it to the [handleFunctionCall](../../../frontend/src/components/AppContainer.vue#314)

2. **`chat/system.txt`**
   - **Ch·ª©c nƒÉng**: 
     - Ch·ª©a c√°c quy t·∫Øc v√† ng·ªØ c·∫£nh cho chatbot, bao g·ªìm c√°ch th·ª©c tr·∫£ l·ªùi, phong c√°ch giao ti·∫øp v√† c√°c ch·ª©c nƒÉng m√† chatbot c√≥ th·ªÉ th·ª±c hi·ªán.
     - ƒê·ªãnh nghƒ©a t√≠nh c√°ch c·ªßa chatbot, gi√∫p chatbot tr·ªü n√™n th√¢n thi·ªán v√† d·ªÖ ti·∫øp c·∫≠n v·ªõi ng∆∞·ªùi d√πng.
- N·ªôi dung trong file `system.txt`:
[Style]
Whenever you are listing things, use HTML tags (ul, ol, br) to make it easier to read
Always break the line with <br/> before starting a new list or showing options 
You are organized and concise in your answers.
This is ***VERY*** important: give organized answers using HTML tags

[Context]
You are a chatbot for AutoFood, the leading food delivery platform in North America
Your primary goal is to assist customers in finding and ordering their favorite meals from a wide variety of restaurants with ease and convenience
You are knowledgeable about the latest deals, promotions, and restaurant offerings, ensuring that users have access to the most up-to-date information

As a delivery app chatbot, you are friendly, approachable, and always eager to help.
You understand that hunger can sometimes make people impatient, so you strive to provide quick and efficient service with a touch of humor to lighten the mood
Your functionalities include helping users browse through restaurant menus, suggesting popular dishes based on their preferences, guiding them through the ordering process, and providing real-time updates on their order status

You are aware of the interface you are in
Every time the user or you do something like opening a restaurant page, closes a restaurant page, adding or removing something from the shopping cart, you will receive a message starting with "@action:"
You should only use these messages to be aware of what is going on in the web interface you are

You are capable of calling functions from the web interface, but you are careful and always clarify the informations you need with the user before doing so
You do not mention the functions you have access to the user
Be autonomous to fulfill the user's needs, take the actions necessary when they were asked by the user
After a sequence of actions you always answer the user with the best information

You are also capable of handling customer complaints and resolving issues related to orders, payments, and deliveries
Your personality is a perfect blend of professionalism and playfulness, making you an enjoyable and reliable companion for users seeking a satisfying meal delivered right to their doorstep
You are concise with your answers. You do not answer with more than 70 words.

3. **`functions/config.yaml`**
   - **Ch·ª©c nƒÉng**: 
     - Ch·ª©a c·∫•u h√¨nh cho c√°c h√†m m√† chatbot c√≥ th·ªÉ g·ªçi.
     - M·ªói h√†m ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a v·ªõi t√™n, m√¥ t·∫£, tham s·ªë v√† tr·∫°ng th√°i cho ph√©p (allow).
     - Cung c·∫•p th√¥ng tin chi ti·∫øt v·ªÅ c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa t·ª´ng h√†m, gi√∫p chatbot th·ª±c hi·ªán c√°c t√°c v·ª• li√™n quan ƒë·∫øn nh√† h√†ng v√† ƒë∆°n h√†ng.
- N·ªôi dung trong file `config.yaml`:
functions:
  - name: get_restaurant_pages
    description: This function finds a restaurant that has similar food or name to what the user is asking for. Not all the restaurants found are necessarily the best option for the user, use the description of the restaurant as a proxy to suggest it to them.
    parameters:
      type: object
      properties:
        name_of_restaurant:
          type: string
          description: Not mandatory. The name of the restaurant. In case the user didn't specify it in the request, it should be set to null.
        type_of_restaurant:
          type: string
          description: The type of food or restaurant that the user requested. E.g. Italian, Pizza, Sushi, Indian, Vegan, etc...
        food_requested:
          type: array
          description: Not mandatory. The array of foods that the user requested. E.g. Pizza, Pasta, etc... . In case the user didn't specify it in the request, it should be set to [null].
          items:
            type: string
        quantity:
          type: integer
          description: Not mandatory. The amount of restaurants you judge its preferable to search in order to serve the user. It should be default to 1, however if the user request is broad you should set 2,3,4 or even 5
        other_information:
          type: string
          description: All other information that the user provided that could potentially help finding the best matching restaurant for them. In case there aren't any information, set it to null
    required: [name_of_restaurant, type_of_restaurant, food_requested, other_information, quantity]
    allow: true

  - name: open_restaurant_page
    description: This function opens the page of a given restaurant, it can only open one restaurant at a time. Always confirm with the user that you are going to search and open a restaurant page with the information provided before calling the function. This function can only be called after the function get_restaurant_pages.
    parameters:
      type: object
      properties:
        restaurant_uuid:
          type: string
          description: The number of the restaurant page that comes in the function get_restaurant_pages previously called
    required: [restaurant_uuid]
    allow: true

  - name: close_restaurant_page
    description: This function closes the page of a given restaurant and goes back to the main page (menu with all the restaurants) x. This function can be called if a restaurant page is already open, you can check the recent actions with get_user_actions to verify it, before calling the function
    parameters:
      type: object
      properties: {}
    allow: true

  - name: get_user_actions
    description: This function returns the list of the latest 10 user actions. This function should be called when you need to collect more information about what were the latest actions the user of the chatbot interface, like what is the current opened restaurant, what is the current state of the shopping cart, etc... Very often it is best to call this function before calling some other functions
    parameters:
      type: object
      properties: {}
    allow: true

  - name: get_menu_of_restaurant
    description: This function returns the list of the menu of a given restaurant. This function should be called when you need to collect more information about what is the menu of a given restaurant. Very often it is best to get the recent actions before calling this function, so you can know what is the restaurant uuid that you need to pass to this function. Always after calling this function create a short-list of suggestions based on the chat history with the user, displaying name, description and price of the given food
    parameters:
      type: object
      properties:
        restaurant_uuid:
          type: string
          description: The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page
    required: [restaurant_uuid]
    allow: true

  - name: add_food_to_cart
    description: This function adds food to the user's shopping cart. It should only be called if you have the information of the restaurant_id, food_id and amount (quantity) of the food the user is referring to. You can get more information of the restaurant_id opened in the users interface by calling the get_user_actions and you can get the food_id by calling the get_menu_of_restaurant function. You can call this function multiple times in a row if there are several food items to be added
    parameters:
      type: object
      properties:
        restaurant_uuid:
          type: string
          description: The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page
        food_id:
          type: string
          description: The id of the food that comes in the function get_menu_of_restaurant previously called
        quantity:
          type: integer
          description: The quantity of the food that the user wants to add to the cart
    required: [restaurant_uuid, food_id, quantity]
    allow: true

  - name: remove_food_from_cart
    description: This function removes food from the user's shopping cart. It should only be called if you have the information of the restaurant_id and food_id of the food the user is referring to. You can get more information of the restaurant_id opened in the users interface by calling the get_user_actions and you can get the food_id by calling the get_menu_of_restaurant function. You can call this function multiple times in a row if there are several food items to be removed
    parameters:
      type: object
      properties:
        restaurant_uuid:
          type: string
          description: The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page. Make sure you know all the parameters before calling this function. Call auxiliary functions before calling it, if necessary.
        food_id:
          type: string
          description: The id of the food that comes in the function get_menu_of_restaurant previously called
    required: [restaurant_uuid, food_id]
    allow: true

  - name: open_shopping_cart
    description: This function opens the shopping cart of the user. It should be called if the user wants it, or if you need more information about the items in the shopping cart
    parameters:
      type: object
      properties: {}
    allow: true

  - name: close_shopping_cart
    description: This function closes the shopping cart of the user. It should be called if the user wants it, or after placing an order
    parameters:
      type: object
      properties: {}
    allow: true

  - name: place_order
    description: This function places an order with the food items that the user has in the shopping cart. It should be called if the user specifies or confirms that they want to place an order
    parameters:
      type: object
      properties: {}
    allow: true
  
  - name: activate_handsfree
    description: This function activates a handsfree chat experience where you are always answering by voice to the user interface
    parameters:
      type: object
      properties: {}
    allow: true

4. **`functions/signatures.json`**
   - **Ch·ª©c nƒÉng**: 
     - L∆∞u tr·ªØ c√°c ch·ªØ k√Ω (signatures) c·ªßa c√°c h√†m ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh trong `config.yaml`.
     - ƒê∆∞·ª£c t·∫°o ra t·ª± ƒë·ªông t·ª´ file `config.yaml` v√† kh√¥ng n√™n b·ªã ch·ªânh s·ª≠a tr·ª±c ti·∫øp.
     - Cung c·∫•p th√¥ng tin cho h·ªá th·ªëng v·ªÅ c√°c h√†m c√≥ s·∫µn v√† c√°ch th·ª©c g·ªçi ch√∫ng.
- N·ªôi dung trong file `signatures.json`:
[
    {
        "name": "get_restaurant_pages",
        "description": "This function finds a restaurant that has similar food or name to what the user is asking for. Not all the restaurants found are necessarily the best option for the user, use the description of the restaurant as a proxy to suggest it to them.",
        "parameters": {
            "type": "object",
            "properties": {
                "name_of_restaurant": {
                    "type": "string",
                    "description": "Not mandatory. The name of the restaurant. In case the user didn't specify it in the request, it should be set to null."
                },
                "type_of_restaurant": {
                    "type": "string",
                    "description": "The type of food or restaurant that the user requested. E.g. Italian, Pizza, Sushi, Indian, Vegan, etc..."
                },
                "food_requested": {
                    "type": "array",
                    "description": "Not mandatory. The array of foods that the user requested. E.g. Pizza, Pasta, etc... . In case the user didn't specify it in the request, it should be set to [null].",
                    "items": {
                        "type": "string"
                    }
                },
                "quantity": {
                    "type": "integer",
                    "description": "Not mandatory. The amount of restaurants you judge its preferable to search in order to serve the user. It should be default to 1, however if the user request is broad you should set 2,3,4 or even 5"
                },
                "other_information": {
                    "type": "string",
                    "description": "All other information that the user provided that could potentially help finding the best matching restaurant for them. In case there aren't any information, set it to null"
                }
            }
        },
        "required": [
            "name_of_restaurant",
            "type_of_restaurant",
            "food_requested",
            "other_information",
            "quantity"
        ]
    },
    {
        "name": "open_restaurant_page",
        "description": "This function opens the page of a given restaurant, it can only open one restaurant at a time. Always confirm with the user that you are going to search and open a restaurant page with the information provided before calling the function. This function can only be called after the function get_restaurant_pages.",
        "parameters": {
            "type": "object",
            "properties": {
                "restaurant_uuid": {
                    "type": "string",
                    "description": "The number of the restaurant page that comes in the function get_restaurant_pages previously called"
                }
            }
        },
        "required": [
            "restaurant_uuid"
        ]
    },
    {
        "name": "close_restaurant_page",
        "description": "This function closes the page of a given restaurant and goes back to the main page (menu with all the restaurants) x. This function can be called if a restaurant page is already open, you can check the recent actions with get_user_actions to verify it, before calling the function",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    },
    {
        "name": "get_user_actions",
        "description": "This function returns the list of the latest 10 user actions. This function should be called when you need to collect more information about what were the latest actions the user of the chatbot interface, like what is the current opened restaurant, what is the current state of the shopping cart, etc... Very often it is best to call this function before calling some other functions",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    },
    {
        "name": "get_menu_of_restaurant",
        "description": "This function returns the list of the menu of a given restaurant. This function should be called when you need to collect more information about what is the menu of a given restaurant. Very often it is best to get the recent actions before calling this function, so you can know what is the restaurant uuid that you need to pass to this function. Always after calling this function create a short-list of suggestions based on the chat history with the user, displaying name, description and price of the given food",
        "parameters": {
            "type": "object",
            "properties": {
                "restaurant_uuid": {
                    "type": "string",
                    "description": "The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page"
                }
            }
        },
        "required": [
            "restaurant_uuid"
        ]
    },
    {
        "name": "add_food_to_cart",
        "description": "This function adds food to the user's shopping cart. It should only be called if you have the information of the restaurant_id, food_id and amount (quantity) of the food the user is referring to. You can get more information of the restaurant_id opened in the users interface by calling the get_user_actions and you can get the food_id by calling the get_menu_of_restaurant function. You can call this function multiple times in a row if there are several food items to be added",
        "parameters": {
            "type": "object",
            "properties": {
                "restaurant_uuid": {
                    "type": "string",
                    "description": "The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page"
                },
                "food_id": {
                    "type": "string",
                    "description": "The id of the food that comes in the function get_menu_of_restaurant previously called"
                },
                "quantity": {
                    "type": "integer",
                    "description": "The quantity of the food that the user wants to add to the cart"
                }
            }
        },
        "required": [
            "restaurant_uuid",
            "food_id",
            "quantity"
        ]
    },
    {
        "name": "remove_food_from_cart",
        "description": "This function removes food from the user's shopping cart. It should only be called if you have the information of the restaurant_id and food_id of the food the user is referring to. You can get more information of the restaurant_id opened in the users interface by calling the get_user_actions and you can get the food_id by calling the get_menu_of_restaurant function. You can call this function multiple times in a row if there are several food items to be removed",
        "parameters": {
            "type": "object",
            "properties": {
                "restaurant_uuid": {
                    "type": "string",
                    "description": "The id of the restaurant page that comes in the function get_restaurant_pages previously called, or in the get_user_actions function if the user opened a restaurant page. Make sure you know all the parameters before calling this function. Call auxiliary functions before calling it, if necessary."
                },
                "food_id": {
                    "type": "string",
                    "description": "The id of the food that comes in the function get_menu_of_restaurant previously called"
                }
            }
        },
        "required": [
            "restaurant_uuid",
            "food_id"
        ]
    },
    {
        "name": "open_shopping_cart",
        "description": "This function opens the shopping cart of the user. It should be called if the user wants it, or if you need more information about the items in the shopping cart",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    },
    {
        "name": "close_shopping_cart",
        "description": "This function closes the shopping cart of the user. It should be called if the user wants it, or after placing an order",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    },
    {
        "name": "place_order",
        "description": "This function places an order with the food items that the user has in the shopping cart. It should be called if the user specifies or confirms that they want to place an order",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    },
    {
        "name": "activate_handsfree",
        "description": "This function activates a handsfree chat experience where you are always answering by voice to the user interface",
        "parameters": {
            "type": "object",
            "properties": {}
        }
    }
]
5. **`functions/__init__.py`**
   - **Ch·ª©c nƒÉng**: 
     - Ch·ª©a m√£ ƒë·ªÉ ƒë·ªçc file `config.yaml`, l·ªçc c√°c h√†m ƒë∆∞·ª£c ph√©p v√† ghi ch√∫ng v√†o file `signatures.json`.
     - ƒê·∫£m b·∫£o r·∫±ng c√°c h√†m ƒë∆∞·ª£c c·∫•u h√¨nh c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c ph·∫ßn kh√°c c·ªßa ·ª©ng d·ª•ng.

### T√≥m t·∫Øt
Th∆∞ m·ª•c `@prompts` ch·ª©a c√°c file c·∫•u h√¨nh v√† m√¥ t·∫£ cho chatbot, bao g·ªìm c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa n√≥ v√† c√°c h√†m m√† n√≥ c√≥ th·ªÉ g·ªçi. M·ªói file c√≥ m·ªôt vai tr√≤ c·ª• th·ªÉ trong vi·ªác ƒë·ªãnh h√¨nh h√†nh vi c·ªßa chatbot v√† gi√∫p n√≥ t∆∞∆°ng t√°c hi·ªáu qu·∫£ v·ªõi ng∆∞·ªùi d√πng.

- **`backend/src/schemas`:**


D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `schemas` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `schemas`

```
backend/src/schemas/
‚îú‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ base_models.py
```


### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. `__init__.py`
- **M·ª•c ƒë√≠ch**: File n√†y cho ph√©p th∆∞ m·ª•c `schemas` ƒë∆∞·ª£c coi nh∆∞ m·ªôt module Python.
- **N·ªôi dung**: 
  - Import t·∫•t c·∫£ c√°c class t·ª´ `base_models`, gi√∫p d·ªÖ d√†ng truy c·∫≠p c√°c th√†nh ph·∫ßn n√†y t·ª´ module `schemas`.

#### 2.2. `base_models.py`
- **M·ª•c ƒë√≠ch**: ƒê·ªãnh nghƒ©a c√°c schema s·ª≠ d·ª•ng Pydantic cho c√°c y√™u c·∫ßu v√† ph·∫£n h·ªìi trong ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - **FunctionCall**: Schema cho vi·ªác g·ªçi h√†m, bao g·ªìm t√™n h√†m v√† c√°c tham s·ªë.
  - **Message**: Schema cho tin nh·∫Øn, bao g·ªìm n·ªôi dung, vai tr√≤ (role), v√† t√πy ch·ªçn g·ªçi h√†m.
  - **GroqChatCompletionResponse**: Schema cho ph·∫£n h·ªìi t·ª´ Groq, bao g·ªìm vƒÉn b·∫£n, m√¥ h√¨nh, th√¥ng tin s·ª≠ d·ª•ng, v√† l√Ω do k·∫øt th√∫c.
  - **RestaurantSearchQuery**: Schema cho truy v·∫•n t√¨m ki·∫øm nh√† h√†ng, bao g·ªìm t√™n nh√† h√†ng, lo·∫°i nh√† h√†ng, m√≥n ƒÉn y√™u c·∫ßu, th√¥ng tin kh√°c, v√† s·ªë l∆∞·ª£ng.
  - **RestaurantSearchResult**: Schema cho k·∫øt qu·∫£ t√¨m ki·∫øm nh√† h√†ng, bao g·ªìm ID nh√† h√†ng, t√™n, m√¥ t·∫£, menu, vƒÉn b·∫£n, v√† ƒëi·ªÉm s·ªë.
  - **InputMessage**: Schema cho tin nh·∫Øn ƒë·∫ßu v√†o, bao g·ªìm vai tr√≤, n·ªôi dung, v√† t√πy ch·ªçn t√™n.
  - **InputChatHistory**: Schema cho l·ªãch s·ª≠ chat ƒë·∫ßu v√†o, bao g·ªìm danh s√°ch c√°c tin nh·∫Øn ƒë·∫ßu v√†o.
  - **ChatRequest**: Schema cho y√™u c·∫ßu chat, bao g·ªìm l·ªãch s·ª≠ chat v√† t√πy ch·ªçn g·ªçi h√†m.
  - **AudioTranscriptRequest**: Schema cho y√™u c·∫ßu chuy·ªÉn ƒë·ªïi √¢m thanh th√†nh vƒÉn b·∫£n, bao g·ªìm √¢m thanh.
  - **AudioResponse**: Schema cho ph·∫£n h·ªìi √¢m thanh, bao g·ªìm th√¥ng ƒëi·ªáp.
  - **AudioTTSRequest**: Schema cho y√™u c·∫ßu chuy·ªÉn ƒë·ªïi vƒÉn b·∫£n th√†nh √¢m thanh, bao g·ªìm vƒÉn b·∫£n.
- Code trong file `base_models.py`:
from pydantic import BaseModel
from typing import Optional, List, Any, Dict


## Groq schema for Chat Completion
class FunctionCall(BaseModel):
    name: str
    arguments: str


class Message(BaseModel):
    content: str
    role: str
    function_call: Optional[FunctionCall] = None


class GroqChatCompletionResponse(BaseModel):
    text: str
    model: str
    usage: Dict[str, int]
    finish_reason: str


## Vector Search Models
class RestaurantSearchQuery(BaseModel):
    name_of_restaurant: Optional[str] = None
    type_of_restaurant: Optional[str] = None
    food_requested: Optional[List[str]] = None
    other_information: Optional[str] = None
    quantity: int = 1


class RestaurantSearchResult(BaseModel):
    restaurant_id: int
    restaurant_name: str
    restaurant_description: str
    restaurant_menu: str
    text: str
    score: float


## Message System
class InputMessage(BaseModel):
    role: str
    content: Any
    name: Optional[str] = None


class InputChatHistory(BaseModel):
    history: List[InputMessage]


class ChatRequest(BaseModel):
    query: InputChatHistory
    function_call: bool = True


## Audio system
class AudioTranscriptRequest(BaseModel):
    audio: str


class AudioResponse(BaseModel):
    message: str


class AudioTTSRequest(BaseModel):
    text: str

### 3. T√≥m t·∫Øt
Folder `schemas` ch·ª©a c√°c file quan tr·ªçng ƒë·ªÉ ƒë·ªãnh nghƒ©a c√°c schema cho c√°c y√™u c·∫ßu v√† ph·∫£n h·ªìi trong ·ª©ng d·ª•ng. C√°c schema n√†y gi√∫p ƒë·∫£m b·∫£o t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu v√† h·ªó tr·ª£ vi·ªác x·ª≠ l√Ω d·ªØ li·ªáu m·ªôt c√°ch hi·ªáu qu·∫£. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä


- **`backend/src/services`:**


D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c c·ªßa th∆∞ m·ª•c `@services` trong d·ª± √°n c·ªßa b·∫°n, bao g·ªìm c√°c file v√† ch·ª©c nƒÉng c·ªßa ch√∫ng. T√¥i c≈©ng s·∫Ω v·∫Ω c·∫•u tr√∫c th∆∞ m·ª•c ƒë·ªÉ b·∫°n d·ªÖ h√¨nh dung h∆°n nh√©! üòä

### C·∫•u tr√∫c th∆∞ m·ª•c `@services`

```
backend/
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ services/
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îú‚îÄ‚îÄ README.md
        ‚îú‚îÄ‚îÄ functions/
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
        ‚îÇ   ‚îú‚îÄ‚îÄ README.md
        ‚îÇ   ‚îú‚îÄ‚îÄ cart_functions/
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ add_food_to_cart.py
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ remove_food_from_cart.py
        ‚îÇ   ‚îú‚îÄ‚îÄ restaurant_functions/
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ find_restaurant_pages.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get_menu_of_restaurant.py
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ open_restaurant_page.py
        ‚îÇ   ‚îî‚îÄ‚îÄ utils/
        ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
        ‚îÇ       ‚îî‚îÄ‚îÄ dummy_function.py
        ‚îî‚îÄ‚îÄ grop_service/
            ‚îú‚îÄ‚îÄ __init__.py
            ‚îú‚îÄ‚îÄ chat_completion.py
            ‚îú‚îÄ‚îÄ embeddings.py
```

### M√¥ t·∫£ c√°c file trong th∆∞ m·ª•c `@services`
3. **`functions/`**
   - **Ch·ª©c nƒÉng**: 
     - Ch·ª©a c√°c file ƒë·ªãnh nghƒ©a c√°c h√†m d·ªãch v·ª• cho ·ª©ng d·ª•ng, bao g·ªìm c√°c h√†m li√™n quan ƒë·∫øn gi·ªè h√†ng v√† nh√† h√†ng.

   - **`__init__.py`**
     - **Ch·ª©c nƒÉng**: 
       - Cho ph√©p import c√°c h√†m t·ª´ c√°c module con trong th∆∞ m·ª•c `functions`.
      - Code trong file `__init__.py`:
      from .restaurant_functions import *
from .cart_functions import *
from .utils import dummy_function

__all__ = [
    'find_restaurant_pages',
    'get_menu_of_restaurant',
    'open_restaurant_page',
    'add_food_to_cart',
    'remove_food_from_cart',
    'dummy_function'
]

   - **`README.md`**
     - **Ch·ª©c nƒÉng**: 
       - Cung c·∫•p th√¥ng tin m√¥ t·∫£ v·ªÅ c√°c h√†m trong th∆∞ m·ª•c `functions`.

   - **`cart_functions/`**
     - **Ch·ª©c nƒÉng**: 
       - Ch·ª©a c√°c h√†m li√™n quan ƒë·∫øn vi·ªác qu·∫£n l√Ω gi·ªè h√†ng.

     - **`__init__.py`**
       - **Ch·ª©c nƒÉng**: 
         - Cho ph√©p import c√°c h√†m t·ª´ c√°c module con trong th∆∞ m·ª•c `cart_functions`.
          - Code trong file `__init__.py`:
          from .add_food_to_cart import add_food_to_cart
from .remove_food_from_cart import remove_food_from_cart

__all__ = [
    'add_food_to_cart',
    'remove_food_from_cart'
]

     - **`add_food_to_cart.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `add_food_to_cart`, d√πng ƒë·ªÉ th√™m m√≥n ƒÉn v√†o gi·ªè h√†ng.
- Code trong file `add_food_to_cart.py`:
from typing import Optional, Dict
from tenacity import retry, wait_random, stop_after_attempt
from ...data.database import SessionLocal
from ...data.data_utils import get_menu_of_given_restaurant

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def add_food_to_cart(
        CONFIG,
        restaurant_uuid: Optional[str] = None,
        food_id: Optional[str] = None,
        quantity: int = 1,
) -> Dict:
    """Add food item to cart
    
    Args:
        CONFIG: Application configuration
        restaurant_uuid: UUID of the restaurant
        food_id: ID of the food item
        quantity: Number of items to add (default: 1)
        
    Returns:
        Dict containing cart update information
    """
    if not all([restaurant_uuid, food_id]):
        raise ValueError("Restaurant UUID and Food ID are required")
        
    # Validate food exists in restaurant
    db = SessionLocal()
    try:
        menu = get_menu_of_given_restaurant(db, restaurant_uuid)
        food_exists = any(str(food.id) == food_id for food in menu)
        if not food_exists:
            raise ValueError(f"Food ID {food_id} not found in restaurant {restaurant_uuid}")
    finally:
        db.close()
        
    return {
        "response": {
            "restaurant_uuid": str(restaurant_uuid),
            "food_id": str(food_id),
            "quantity": int(quantity),
            "status": "success",
            "message": f"Added {quantity} item(s) to cart"
        }
    }
     - **`remove_food_from_cart.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `remove_food_from_cart`, d√πng ƒë·ªÉ x√≥a m√≥n ƒÉn kh·ªèi gi·ªè h√†ng.
- Code trong file `remove_food_from_cart.py`:
from tenacity import retry, wait_random, stop_after_attempt

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def remove_food_from_cart(
        CONFIG,
        restaurant_uuid: str=None,
        food_id: str=None,
):
    return {
        "response": {
            "restaurant_uuid": str(restaurant_uuid),
            "food_id": str(food_id),
        }
    }
   - **`restaurant_functions/`**
     - **Ch·ª©c nƒÉng**: 
       - Ch·ª©a c√°c h√†m li√™n quan ƒë·∫øn vi·ªác qu·∫£n l√Ω nh√† h√†ng.

     - **`__init__.py`**
       - **Ch·ª©c nƒÉng**: 
         - Cho ph√©p import c√°c h√†m t·ª´ c√°c module con trong th∆∞ m·ª•c `restaurant_functions`.
- Code trong file `__init__.py`:
from .find_restaurant_pages import find_restaurant_pages
from .get_menu_of_restaurant import get_menu_of_restaurant
from .open_restaurant_page import open_restaurant_page

__all__ = [
    'find_restaurant_pages',
    'get_menu_of_restaurant', 
    'open_restaurant_page'
]
     - **`find_restaurant_pages.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `find_restaurant_pages`, d√πng ƒë·ªÉ t√¨m ki·∫øm c√°c nh√† h√†ng d·ª±a tr√™n c√°c tham s·ªë ƒë·∫ßu v√†o.
- Code trong file `find_restaurant_pages.py`:
from tenacity import retry, wait_random, stop_after_attempt
from typing import Optional, List
from qdrant_client import QdrantClient
from langchain.embeddings import HuggingFaceInferenceAPIEmbeddings

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def find_restaurant_pages(
        CONFIG,
        name_of_restaurant: Optional[str] = None,
        type_of_restaurant: Optional[str] = None,
        food_requested: Optional[List] = None,
        other_information: Optional[str] = None,
        quantity: int = 1,
    ):
    """Search restaurants using Qdrant"""
    
    # Build query
    query = build_search_query(
        name_of_restaurant=name_of_restaurant,
        type_of_restaurant=type_of_restaurant,
        food_requested=food_requested,
        other_information=other_information
    )

    # Initialize Qdrant client
    client = QdrantClient(
        url=CONFIG["qdrant"]["url"],
        api_key=CONFIG["qdrant"]["api_key"]
    )

    # Get embeddings
    embeddings = HuggingFaceInferenceAPIEmbeddings(
        model_name="intfloat/multilingual-e5-small",
        api_key=CONFIG["huggingface"]["api_key"]
    )
    
    vector = embeddings.embed_query(query)
    
    # Search in Qdrant
    results = client.search(
        collection_name="auto-food-order",
        query_vector=vector,
        limit=quantity
    )
    
    return [result.payload for result in results]

def build_search_query(
        name_of_restaurant: Optional[str] = None,
        type_of_restaurant: Optional[str] = None,
        food_requested: Optional[List] = None,
        other_information: Optional[str] = None
    ) -> str:
    """Build search query from parameters"""
    
    query_parts = []
    
    if name_of_restaurant:
        query_parts.append(f"Restaurant: {name_of_restaurant}")
    if type_of_restaurant:
        query_parts.append(f"Type: {type_of_restaurant}")
    if food_requested:
        query_parts.append(f"Food: {', '.join(food_requested)}")
    if other_information:
        query_parts.append(f"Info: {other_information}")
        
    return " | ".join(query_parts)

     - **`get_menu_of_restaurant.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `get_menu_of_restaurant`, d√πng ƒë·ªÉ l·∫•y th·ª±c ƒë∆°n c·ªßa m·ªôt nh√† h√†ng c·ª• th·ªÉ.
- Code trong file `get_menu_of_restaurant.py`:

from ...data.database import SessionLocal
from ...data.data_utils import get_menu_of_given_restaurant
from tenacity import retry, wait_random, stop_after_attempt

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def get_menu_of_restaurant(CONFIG, restaurant_uuid: int=None):
    # Loads menu
    db = SessionLocal()
    menu = get_menu_of_given_restaurant(db, restaurant_uuid)

    # Formats the menu
    menu_formatted = []
    for food in menu:
        food_formatted = {
            "food_id": food.id,
            "name": food.name,
            "description": food.description,
            "price": food.price,
            "image": food.image,
        }
        menu_formatted.append(food_formatted)

    menu_formatted_text = f"Menu of restaurant {restaurant_uuid}:" + "\n" + "\n\n---\n".join(
        [f"{food['name']}:\nDescription: {food['description']} \nPrice: {food['price']} \nID: {food['food_id']}" for food in menu_formatted]
    )

    return {"raw": menu_formatted, "formatted": menu_formatted_text}
    # return {"response": menu_formatted_text}

     - **`open_restaurant_page.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `open_restaurant_page`, d√πng ƒë·ªÉ m·ªü trang c·ªßa m·ªôt nh√† h√†ng.
- Code trong file `open_restaurant_page.py`:
from typing import Dict, Optional
from tenacity import retry, wait_random, stop_after_attempt

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def open_restaurant_page(
    CONFIG,
    restaurant_uuid: Optional[str] = None
) -> Dict:
    """Opens the restaurant page in the interface
    
    Args:
        CONFIG: Application configuration
        restaurant_uuid: Unique identifier of the restaurant
        
    Returns:
        Dict containing restaurant_uuid for frontend handling
    """
    if not restaurant_uuid:
        raise ValueError("Restaurant UUID is required")
        
    return {
        "response": {
            "restaurant_uuid": str(restaurant_uuid),
            "status": "success",
            "message": f"Opening restaurant page for {restaurant_uuid}"
        }
    }

   - **`utils/`**
     - **Ch·ª©c nƒÉng**: 
       - Ch·ª©a c√°c h√†m ti·ªán √≠ch kh√¥ng thu·ªôc v·ªÅ gi·ªè h√†ng hay nh√† h√†ng.

     - **`__init__.py`**
       - **Ch·ª©c nƒÉng**: 
         - Cho ph√©p import c√°c h√†m t·ª´ c√°c module con trong th∆∞ m·ª•c `utils`.
- Code trong file `__init__.py`:
from .restaurant_functions import *
from .cart_functions import *
from .utils import dummy_function

__all__ = [
    'find_restaurant_pages',
    'get_menu_of_restaurant',
    'open_restaurant_page',
    'add_food_to_cart',
    'remove_food_from_cart',
    'dummy_function'
]
     - **`dummy_function.py`**
       - **Ch·ª©c nƒÉng**: 
         - ƒê·ªãnh nghƒ©a h√†m `dummy_function`, m·ªôt h√†m m·∫´u c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c t√¨nh hu·ªëng th·ª≠ nghi·ªám.
- Code trong file `dummy_function.py`:
from tenacity import retry, wait_random, stop_after_attempt

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def dummy_function(*args, **kwargs):
    return ""

4. **`grop_service/`**
   - **Ch·ª©c nƒÉng**: 
     - Ch·ª©a c√°c file ƒë·ªãnh nghƒ©a c√°c d·ªãch v·ª• li√™n quan ƒë·∫øn Groq v√† OpenAI.

   - **`__init__.py`**
     - **Ch·ª©c nƒÉng**: 
       - Cho ph√©p import c√°c th√†nh ph·∫ßn t·ª´ th∆∞ m·ª•c `grop_service`.

   - **`audio.py`**
     - **Ch·ª©c nƒÉng**: 
       - Ch·ª©a c√°c h√†m li√™n quan ƒë·∫øn x·ª≠ l√Ω √¢m thanh (ch∆∞a c√≥ n·ªôi dung c·ª• th·ªÉ trong ƒëo·∫°n m√£ b·∫°n cung c·∫•p).

   - **`chat_completion.py`**
     - **Ch·ª©c nƒÉng**: 
       - ƒê·ªãnh nghƒ©a h√†m `chat_completion`, d√πng ƒë·ªÉ t·∫°o ph·∫£n h·ªìi chat b·∫±ng c√°ch s·ª≠ d·ª•ng Groq.
- Code trong file `chat_completion.py`:
from tenacity import retry, wait_random, stop_after_attempt
from langchain_groq import ChatGroq

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def chat_completion(messages, CONFIG, functions=[], client=None):
    """Generate chat completion using Groq"""
    
    # Initializing the Groq configuration
    llm = ChatGroq(
        temperature=0.3,
        model="llama-3.1-70b-versatile",
        api_key=CONFIG["groq"]["api_key"]
    )

    if len(functions) > 0:
        # Handle functions if present
        response = await llm.agenerate([messages], functions=functions, function_call="auto")
    else:
        response = await llm.agenerate([messages])

    return response.generations[0][0].text
   - **`embeddings.py`**
     - **Ch·ª©c nƒÉng**: 
       - ƒê·ªãnh nghƒ©a h√†m `embeddings`, d√πng ƒë·ªÉ t·∫°o embeddings t·ª´ n·ªôi dung vƒÉn b·∫£n.
- Code trong file `embeddings.py`:
from tenacity import retry, wait_random, stop_after_attempt
from langchain.embeddings import HuggingFaceInferenceAPIEmbeddings

@retry(wait=wait_random(min=1, max=5), stop=stop_after_attempt(5))
async def embeddings(content, CONFIG, client=None):
    """Generate embeddings using HuggingFace"""
    
    embeddings_model = HuggingFaceInferenceAPIEmbeddings(
        model_name="intfloat/multilingual-e5-small",
        api_key=CONFIG["huggingface"]["api_key"]
    )
    
    return await embeddings_model.aembed_documents([content])
### T√≥m t·∫Øt
Th∆∞ m·ª•c `@services` ch·ª©a c√°c file ƒë·ªãnh nghƒ©a c√°c d·ªãch v·ª• cho ·ª©ng d·ª•ng, bao g·ªìm c√°c h√†m qu·∫£n l√Ω gi·ªè h√†ng, nh√† h√†ng v√† c√°c d·ªãch v·ª• li√™n quan ƒë·∫øn Groq v√† OpenAI. M·ªói file c√≥ m·ªôt vai tr√≤ c·ª• th·ªÉ trong vi·ªác x·ª≠ l√Ω d·ªØ li·ªáu v√† t∆∞∆°ng t√°c v·ªõi ng∆∞·ªùi d√πng.

- **`backend/src/static`:**
Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa folder `static` trong project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `static`

```
backend/src/static/
‚îú‚îÄ‚îÄ images/
‚îî‚îÄ‚îÄ css/
```

### 2. Chi ti·∫øt t·ª´ng th∆∞ m·ª•c

#### 2.1. `images/`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c file ·∫£nh ƒë∆∞·ª£c s·ª≠ d·ª•ng trong ·ª©ng d·ª•ng.
- **N·ªôi dung**: 
  - C√°c file ·∫£nh c√≥ th·ªÉ bao g·ªìm logo, h√¨nh ·∫£nh m√≥n ƒÉn, h√¨nh ·∫£nh nh√† h√†ng, v.v. (c√°c file c·ª• th·ªÉ s·∫Ω ph·ª• thu·ªôc v√†o n·ªôi dung c·ªßa d·ª± √°n).

### 3. T√≥m t·∫Øt
Folder `static` ·ªü trong th∆∞ m·ª•c backend ch·ªâ ch·ª©a c√°c t√†i nguy√™n tƒ©nh nh∆∞ h√¨nh ·∫£nh, gi√∫p h·ªó tr·ª£ cho giao di·ªán ng∆∞·ªùi d√πng c·ªßa ·ª©ng d·ª•ng. 

- **`backend/.env`**:
File n√†y ch·ª©a c√°c bi·∫øn m√¥i tr∆∞·ªùng 
- N·ªôi dung trong file .env: 
# GROQ_API_KEY
GROQ_API_KEY=your_api_key
GOOGLE_API_KEY=your_api_key
# Qdrant
QDRANT_URL=your_api_key
QDRANT_API_KEY=your_api_key
# HuggingFace
HUGGINGFACE_API_KEY=your_api_key

-   **`backend/src/agents`:** ƒê·ªãnh nghƒ©a c√°c AI agent v√† c√¥ng c·ª• c·ªßa ch√∫ng.
    -   **`agent_1`, `agent_2`,...** : M·ªói th∆∞ m·ª•c ch·ª©a code v√† h∆∞·ªõng d·∫´n c·ªßa m·ªôt agent.
        -   **`__init__.py`**: Import c√°c class c·ªßa agent
        -   **`agent_1.py`** (v√≠ d·ª•): Class agent, k·∫ø th·ª´a t·ª´ class Agent c·ªßa Agency Swarm
        -   **`instructions.md`**: M√¥ t·∫£ vai tr√≤, m·ª•c ti√™u v√† c√°ch ho·∫°t ƒë·ªông c·ªßa agent.
        -   **`tools/`**: Th∆∞ m·ª•c ch·ª©a c√°c file c√¥ng c·ª• cho agent.
            -   **`tool_1.py`, `tool_2.py`,...:** C√°c file ƒë·ªãnh nghƒ©a c√°c c√¥ng c·ª• m√† agent s·ª≠ d·ª•ng.
-   **`backend/src/utils`:** C√°c utility functions d√πng chung.
- **`backend/src/main.py`:** ƒêi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa ·ª©ng d·ª•ng backend FastAPI, ƒë·ªãnh nghƒ©a c√°c endpoint API.
- N·ªôi dung trong file main.py: 
import sys

relative_position = "../"
if relative_position not in sys.path:
    sys.path.insert(0, relative_position)

import uvicorn
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from fastapi.staticfiles import StaticFiles

from src.config import CONFIG
from src.endpoints import include_all_routers
from src.handlers import MainHandler
from src.endpoints.router import router

# Integrating SQLite
from src.data import data_models
from src.data import SessionLocal, engine

data_models.Base.metadata.create_all(bind=engine)


class Application:
    @classmethod
    def setup(cls, app: FastAPI, handler: MainHandler, CONFIG):
        # Adding CORS middleware
        app.add_middleware(
            CORSMiddleware,
            allow_origins=[
                "http://localhost:5174"
            ],  # Ch·ªâ ch·∫•p nh·∫≠n y√™u c·∫ßu t·ª´ frontend ·ªü c·ªïng 5174
            allow_credentials=True,
            allow_methods=["*"],
            allow_headers=["*"],
            expose_headers=["*"],
        )

        # Registering routers and exception handlers
        include_all_routers(app, handler, CONFIG)

        # Th√™m router g·ªëc
        app.include_router(router)

        # Th√™m static file middleware
        app.mount("/static", StaticFiles(directory="static"), name="static")

        return app


app = FastAPI(
    title="Auto food order",
    description="Auto food prototype implementation",
)

app = Application.setup(app, MainHandler(), CONFIG)

# Running the app
if __name__ == "__main__":
    uvicorn.run("main:app", host="127.0.0.1", port=8080, reload=True, workers=8)

-   **`backend/requirements.txt`**: Li·ªát k√™ t·∫•t c·∫£ c√°c th∆∞ vi·ªán Python c·∫ßn thi·∫øt.

Tech stack ph√≠a frontend üîç

### 1. Framework & Library Ch√≠nh

```10:19:frontend/package.json
  "dependencies": {
    "axios": "^1.2.1",
    "bootstrap": "^5.2.3",
    "feather-icons": "^4.29.1",
    "uuid": "^9.0.1",
    "vue": "^3.3.4",
    "vue-axios": "^3.5.2",
    "vue-feather": "^2.0.0",
    "vue3-uuid": "^1.0.0"
  },
```


- **Vue.js 3**: Framework ch√≠nh ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng
- **Axios & Vue-Axios**: Th∆∞ vi·ªán ƒë·ªÉ th·ª±c hi·ªán c√°c HTTP request
- **Bootstrap 5**: Framework CSS ƒë·ªÉ styling
- **Feather Icons**: Th∆∞ vi·ªán icon
- **UUID**: Th∆∞ vi·ªán ƒë·ªÉ t·∫°o c√°c ID duy nh·∫•t

### 2. Development Tools

```20:26:frontend/package.json
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.0.0",
    "autoprefixer": "^10.4.13",
    "postcss": "^8.4.21",
    "tailwindcss": "^3.2.4",
    "vite": "^4.0.0"
  }
```


- **Vite**: Build tool v√† dev server
- **Tailwind CSS**: Framework CSS utility-first
- **PostCSS**: Tool x·ª≠ l√Ω CSS
- **Autoprefixer**: Plugin PostCSS ƒë·ªÉ t·ª± ƒë·ªông th√™m vendor prefixes

### 3. C·∫•u H√¨nh & T√≠nh NƒÉng üõ†Ô∏è

- **Development Server**: Ch·∫°y tr√™n host 0.0.0.0 cho ph√©p truy c·∫≠p t·ª´ xa

```6:8:frontend/package.json
    "dev": "vite --host 0.0.0.0",
    "build": "vite build",
    "preview": "vite preview"
```


- **Static Assets**: ƒê∆∞·ª£c c·∫•u h√¨nh trong Vite

```1:13:frontend/vite.config.js
import { fileURLToPath, URL } from 'node:url'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()],
  publicDir: 'src/assets',
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
```


### 4. Giao Di·ªán Ng∆∞·ªùi D√πng üé®

- S·ª≠ d·ª•ng k·∫øt h·ª£p gi·ªØa Bootstrap v√† Tailwind CSS cho styling
- H·ªó tr·ª£ responsive design
- T√≠ch h·ª£p icons th√¥ng qua Feather Icons
- C√≥ kh·∫£ nƒÉng x·ª≠ l√Ω chat v√† t∆∞∆°ng t√°c voice

### 5. T√≠nh NƒÉng ƒê·∫∑c Bi·ªát üåü

- **Real-time Chat**: T√≠ch h·ª£p v·ªõi backend th√¥ng qua API
- **Voice Integration**: H·ªó tr·ª£ ghi √¢m v√† x·ª≠ l√Ω gi·ªçng n√≥i
- **Shopping Cart**: Qu·∫£n l√Ω gi·ªè h√†ng tr·ª±c ti·∫øp tr√™n giao di·ªán
- **Multi-language Support**: H·ªó tr·ª£ ƒëa ng√¥n ng·ªØ

ƒê√¢y l√† m·ªôt tech stack kh√° hi·ªán ƒë·∫°i v√† ph√π h·ª£p cho m·ªôt ·ª©ng d·ª•ng web progressive v·ªõi c√°c t√≠nh nƒÉng t∆∞∆°ng t√°c cao üëç
Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `frontend` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `frontend`

```
frontend/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ config.yaml
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ vite.config.js
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ package-lock.json
‚îú‚îÄ‚îÄ postcss.config.js
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ App.vue
    ‚îú‚îÄ‚îÄ main.js
    ‚îú‚îÄ‚îÄ assets/
    ‚îÇ   ‚îú‚îÄ‚îÄ favicon-white.svg
    ‚îÇ   ‚îú‚îÄ‚îÄ handsfree.svg
    ‚îÇ   ‚îú‚îÄ‚îÄ maximize_icon.svg
    ‚îÇ   ‚îú‚îÄ‚îÄ minimize_icon.svg
    ‚îú‚îÄ‚îÄassets/ beverages/
    ‚îú‚îÄ‚îÄ assets/foods/ 
    ‚îî‚îÄ‚îÄ assets/restaurants/
frontend/src/components/
‚îú‚îÄ‚îÄ Chatbot/
‚îÇ   ‚îú‚îÄ‚îÄ BotMessage.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatBody.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatContainer.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatFooter.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatHeader.vue
‚îÇ   ‚îú‚îÄ‚îÄ InputButtons.vue
‚îÇ   ‚îú‚îÄ‚îÄ MessageInput.vue
‚îÇ   ‚îú‚îÄ‚îÄ TypingMessage.vue
‚îÇ   ‚îî‚îÄ‚îÄ UserMessage.vue
‚îú‚îÄ‚îÄ Common/
‚îÇ   ‚îú‚îÄ‚îÄ FoodItem.vue
‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.vue
‚îú‚îÄ‚îÄ NavBar/
‚îÇ   ‚îî‚îÄ‚îÄ NavBar.vue
‚îú‚îÄ‚îÄ Restaurants/
‚îÇ   ‚îú‚îÄ‚îÄ RestaurantFullView.vue
‚îÇ   ‚îú‚îÄ‚îÄ RestaurantPreviewCard.vue
‚îÇ   ‚îî‚îÄ‚îÄ RestaurantsContainer.vue
‚îî‚îÄ‚îÄ ShoppingCart/
    ‚îî‚îÄ‚îÄ ShoppingCart.vue

```

### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. `.env`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c bi·∫øn m√¥i tr∆∞·ªùng cho ·ª©ng d·ª•ng frontend.
- **N·ªôi dung**:
  - `VITE_APP_API_URL`: URL c·ªßa API backend, ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ g·ª≠i y√™u c·∫ßu t·ª´ frontend ƒë·∫øn backend.
  - `VITE_ENVIRONMENT`: M√¥i tr∆∞·ªùng ph√°t tri·ªÉn, c√≥ th·ªÉ l√† "development" ho·∫∑c "production".
- N·ªôi dung trong file '.env':
VITE_APP_API_URL="http://localhost:8080"
VITE_ENVIRONMENT="development"

#### 2.2. `.gitignore`
- **M·ª•c ƒë√≠ch**: X√°c ƒë·ªãnh c√°c file v√† th∆∞ m·ª•c m√† Git s·∫Ω b·ªè qua khi commit.
- **N·ªôi dung**:
  - C√°c th∆∞ m·ª•c nh∆∞ `node_modules`, `logs`, v√† c√°c file t·∫°m th·ªùi kh√°c kh√¥ng c·∫ßn thi·∫øt cho vi·ªác qu·∫£n l√Ω m√£ ngu·ªìn.

#### 2.3. `config.yaml`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c c·∫•u h√¨nh cho ·ª©ng d·ª•ng.
- **N·ªôi dung**: File n√†y hi·ªán t·∫°i kh√¥ng c√≥ n·ªôi dung c·ª• th·ªÉ, c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l∆∞u tr·ªØ c√°c c·∫•u h√¨nh kh√°c nhau cho ·ª©ng d·ª•ng.

#### 2.4. `index.html`
- **M·ª•c ƒë√≠ch**: File HTML ch√≠nh cho ·ª©ng d·ª•ng frontend.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c·∫•u tr√∫c c∆° b·∫£n c·ªßa trang web, bao g·ªìm ti√™u ƒë·ªÅ, favicon, v√† m·ªôt div v·ªõi id `app` ƒë·ªÉ Vue.js g·∫Øn v√†o.
  - K·∫øt n·ªëi v·ªõi file JavaScript ch√≠nh (`main.js`) v√† th∆∞ vi·ªán Bootstrap.
- Code trong file 'index.html':
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Delivery App</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</html>

#### 2.5. `package.json`
- **M·ª•c ƒë√≠ch**: Qu·∫£n l√Ω c√°c ph·ª• thu·ªôc v√† c·∫•u h√¨nh cho ·ª©ng d·ª•ng frontend.
- **N·ªôi dung**:
  - Th√¥ng tin v·ªÅ t√™n, phi√™n b·∫£n, v√† c√°c script ƒë·ªÉ ch·∫°y ·ª©ng d·ª•ng (dev, build, preview).
  - Danh s√°ch c√°c ph·ª• thu·ªôc (dependencies) nh∆∞ `axios`, `vue`, `bootstrap`, v√† c√°c devDependencies nh∆∞ `vite`, `tailwindcss`.
- N·ªôi dung trong file package.json: 
{
  "name": "frontend",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "vite --host 0.0.0.0",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.2.1",
    "bootstrap": "^5.2.3",
    "feather-icons": "^4.29.1",
    "uuid": "^9.0.1",
    "vue": "^3.3.4",
    "vue-axios": "^3.5.2",
    "vue-feather": "^2.0.0",
    "vue3-uuid": "^1.0.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.0.0",
    "autoprefixer": "^10.4.13",
    "postcss": "^8.4.21",
    "tailwindcss": "^3.2.4",
    "vite": "^4.0.0"
  }
}

#### 2.6. `postcss.config.js`
- **M·ª•c ƒë√≠ch**: C·∫•u h√¨nh cho PostCSS, m·ªôt c√¥ng c·ª• x·ª≠ l√Ω CSS.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c plugin s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng, bao g·ªìm `tailwindcss` v√† `autoprefixer`.
- N·ªôi dung trong file postcss.config.js: 
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

### 3. Th∆∞ m·ª•c `src/`
Th∆∞ m·ª•c n√†y ch·ª©a m√£ ngu·ªìn ch√≠nh c·ªßa ·ª©ng d·ª•ng frontend.

#### 3.1. `App.vue`
- **M·ª•c ƒë√≠ch**: Component ch√≠nh c·ªßa ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - Import v√† s·ª≠ d·ª•ng component `AppContainer`.
  - Qu·∫£n l√Ω tr·∫°ng th√°i m√¥i tr∆∞·ªùng t·ª´ bi·∫øn m√¥i tr∆∞·ªùng.
- Code trong file App.vue: 
<script setup>
	import VueFeather from 'vue-feather'
</script>

<script>
	import AppContainer from "./components/AppContainer.vue";

	export default {
		name: 'App',
		components: {
			AppContainer
		},
		data() {
			return {
				environment: import.meta.env.VITE_ENVIRONMENT,
			};
		}
	}
</script>

<template>
	<AppContainer />
</template>

<style scoped></style>

#### 3.1. `main.js`
- Code trong file main.js: 
import { createApp } from 'vue'
import App from './App.vue'

import 'bootstrap/dist/css/bootstrap.min.css'

createApp(App)
    .mount('#app')

#### 3.2. Th∆∞ m·ª•c `assets/`
Ch·ª©a c√°c t√†i nguy√™n tƒ©nh nh∆∞ h√¨nh ·∫£nh v√† bi·ªÉu t∆∞·ª£ng.

- **`favicon-white.svg`**: Bi·ªÉu t∆∞·ª£ng favicon cho ·ª©ng d·ª•ng.
- **`handsfree.svg`**: H√¨nh ·∫£nh bi·ªÉu t∆∞·ª£ng cho ch·∫ø ƒë·ªô hands-free.
- **`maximize_icon.svg`**: H√¨nh ·∫£nh bi·ªÉu t∆∞·ª£ng ƒë·ªÉ t·ªëi ƒëa h√≥a c·ª≠a s·ªï chat.
- **`minimize_icon.svg`**: H√¨nh ·∫£nh bi·ªÉu t∆∞·ª£ng ƒë·ªÉ thu nh·ªè c·ª≠a s·ªï chat.

#### 3.3. Th∆∞ m·ª•c `components/`
Ch·ª©a c√°c component Vue.js cho ·ª©ng d·ª•ng.

##### 3.3.1. Th∆∞ m·ª•c `Chatbot/`
Ch·ª©a c√°c component li√™n quan ƒë·∫øn chatbot.

- **`BotMessage.vue`**: Hi·ªÉn th·ªã tin nh·∫Øn t·ª´ bot, bao g·ªìm h√¨nh ·∫£nh v√† n·ªôi dung tin nh·∫Øn. Cung c·∫•p ch·ª©c nƒÉng ph√°t audio cho tin nh·∫Øn.
Code trong file BotMessage.vue:
<template>
  <div class="d-flex justify-content-start mb-4">
    <div class="img_cont_msg">
      <img :src="ImageMessageBot" class="user_img_msg">
    </div>
    <div class="container-assistant-msg">
      <span style="font-weight:normal" v-html="message.content"></span>
    </div>
    <div class="audio-player">
        <vue-feather
          v-if="isLoading"
          type="loader"
          class="audio-control loading"
        ></vue-feather>
        <vue-feather
          v-else-if="!isPlaying"
          type="play-circle"
          class="audio-control"
          @click="playAudio()"
        ></vue-feather>
        <vue-feather
          v-else
          type="pause-circle"
          class="audio-control playing"
          @click="stopAudio"
        ></vue-feather>
      </div>
  </div>
</template>

<script>
import axios from 'axios';
import VueFeather from 'vue-feather';

export default {
  name: "BotMessage",
  components: {
    VueFeather,
  },
  props: {
    ImageMessageBot: {
      type: String,
      required: true,
    },
    message: {
      type: Object,
      required: true,
    },
    baseApiUrl: {
      type: String,
      required: true,
    },
    autoPlayAudio: {
      type: Boolean,
      default: false,
    },
  },
  data() {
    return {
      baseChatApiUrl: import.meta.env.VITE_APP_API_URL + "/api/chat",
      isLoading: false,
      isPlaying: false,
      audio: null,

    };
  },
  mounted() {
    if (this.autoPlayAudio) {
      this.playAudio();
    }
  },
  methods: {
    playAudio() {
      // If audioSrc already exists, play it directly
      if (this.message.audioSrc) {
        this.playExistingAudio();
      } else {
        // Otherwise, make the POST request to get the audioSrc
        this.isLoading = true;
        axios.post(this.baseChatApiUrl + '/tts', { text: this.message.content })
          .then(response => {
            // Handle response
            this.message.audioSrc = 'data:audio/wav;base64,' + response.data.response;
            this.playExistingAudio();
          })
          .catch(error => {
            // Handle error
            console.error('Error playing audio:', error);
          })
          .finally(() => {
            this.isLoading = false;
          });
      }
    },
    playExistingAudio() {
      // Create a new Audio object if it doesn't exist
      if (!this.audio) {
        this.audio = new Audio(this.message.audioSrc);
      }
      // Play the audio
      this.audio.play();
      this.isPlaying = true;
      // When the audio ends, update the isPlaying state
      this.audio.onended = () => {
        this.isPlaying = false;
      };
    },
    stopAudio() {
      if (this.audio) {
        this.audio.pause();
        this.audio.currentTime = 0;
      }
      this.isPlaying = false;
    },
  },
};
</script>

- **`ChatBody.vue`**: Hi·ªÉn th·ªã to√†n b·ªô n·ªôi dung chat, bao g·ªìm tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng v√† bot.
Code trong file ChatBody.vue:
<template>
  <div class="card-body card-chat-body" ref="pageChat">
    <div class="user-message" v-for="(message, index) in messages" v-bind:key="message.content">
      <div v-if="message.role == 'assistant'">
        <bot-message
          v-if="message.role == 'assistant'"
          :ImageMessageBot="config.images.bot_image"
          :message="message"
          :baseApiUrl="baseApiUrl"
          :autoPlayAudio="shouldAutoPlay(message)"
        >
        </bot-message>
      </div>
      <div v-else-if="message.role == 'user'">
        <user-message
          :userProfilePic="config.images.user_profile_pic"
          :message="message"
        >
        </user-message>
      </div>
    </div>
      <typing-message v-if="userTranscribing" v-slot:user-transcribing
            :profilePic="config.images.user_profile_pic"
            :message="config.transcribingMsg" 
            :isBot="false"
          >
      </typing-message>
      <typing-message v-if="botTyping" v-slot:bot-typing 
        :profilePic="config.images.bot_image" 
        :message="this.getTypingMsg(botTypingMsg)"
        :isBot="true"
        :key="this.getTypingMsg(null)"
      >
      </typing-message>
  </div>
</template>

<script>
import BotMessage from './BotMessage.vue';
import UserMessage from './UserMessage.vue';
import TypingMessage from './TypingMessage.vue';


export default {
  name: "ChatBody",
  props: {
    config: {
      type: Object,
      required: true,
    },
    messages: {
      type: Array,
      required: true,
    },
    userTranscribing: {
      type: Boolean,
      required: true,
    },
    botTyping: {
      type: Boolean,
      required: true,
    },
    botTypingMsg: {
      type: String,
      required: false,
      default: null
    },
    baseApiUrl: {
      type: String,
      required: true,
    },
    handsFreeFlag: {
      type: Boolean,
      required: true,
    },
  },
  components: {
    BotMessage,
    UserMessage,
    TypingMessage
  },
  methods: {
    getTypingMsg: function(msg){
      if (msg == null) {
        return this.config.typingMsg
      }
      return msg
    },
    shouldAutoPlay(message) {
      let flag = message.role === 'assistant' && this.handsFreeFlag;
      return flag
    },
    watch: {
      messages(newMessages, oldMessages) {
        // Check if a new message has been added
        if (newMessages.length > oldMessages.length) {
          const newMessage = newMessages[newMessages.length - 1];
          // Check if the new message is from the assistant and if handsFreeFlag is true
          if (newMessage.role === 'assistant' && this.handsFreeFlag) {
            // Find the BotMessage component for the new message and play its audio
            const botMessageComponent = this.$children.find(
              (component) => component.message === newMessage && component instanceof BotMessage
            );
            if (botMessageComponent) {
              botMessageComponent.playAudio();
            }
          }
        }
      },
    },
  }
};
</script>

- **`ChatContainer.vue`**: Component ch√≠nh cho giao di·ªán chat, bao g·ªìm header, body v√† footer.
Code trong file ChatContainer.vue: 
<template>
  <div class="chat-container" :class="{ 'minimized': !isChatOpen }">
    <div class="card card-chat">
      <chat-header 
        :ImageHeader="config.images.header_image"
        :config="config"
        :isMinimized="!isChatOpen"
        :handsFreeFlag="handsFreeFlag"
        @toggle-chatbot="toggleChatBot"
        @toggle-handsfree="$emit('toggle-handsfree')"
      >
      </chat-header>

      <chat-body
        v-show="isChatOpen"
        ref="chatMessages" 
        :messages="messages"
        :config="config"
        :userTranscribing="userTranscribing"
        :botTyping="botTyping"
        :botTypingMsg="botTypingMsg"
        :baseApiUrl="baseApiUrl"
        :handsFreeFlag="handsFreeFlag"
      >
      </chat-body>

      <chat-footer 
        v-show="isChatOpen"
        ref="chatFooter"
        :config="config"
        :isRecordingFlag="isRecordingFlag"
        :recordedVoiceURL="recordedVoiceURL"
        :timeRecorded="timeRecorded"
        @toggle-recording="toggleRecording"
        @cancel-audio="cancelAudio"
        @send-message="sendMessage"
        @select-suggested-question="selectSuggestedQuestion"
      >
    </chat-footer>
    </div>
  </div>
</template>

<script>
import ChatHeader from "./ChatHeader.vue";
import ChatFooter from "./ChatFooter.vue";
import ChatBody from "./ChatBody.vue";

import '../styles/chatbot.css'


export default {
  name: "ChatContainer",
  props: {
    config: {
      type: Object,
      required: true,
    },
    messages: {
      type: Array,
      required: true,
    },
    isRecordingFlag: {
      type: Boolean,
      required: true,
    },
    recordedVoiceURL: {
      type: String,
      required: true,
    },
    timeRecorded: {
      type: Number,
      required: true,
    },
    botTyping: {
      type: Boolean,
      required: true,
    },
    botTypingMsg: {
      type: String,
      required: false,
      default: null
    },
    userTranscribing: {
      type: Boolean,
      required: true,
    },
    isChatOpen: {
      type: Boolean,
      required: true,
    },
    handsFreeFlag: {
      type: Boolean,
      required: true,
    },
  },
  components: {
    ChatHeader,
    ChatFooter,
    ChatBody,
  },
  data() {
    return {
    };
  },
  watch: {
    isChatOpen(newValue) {
      if (newValue) {
        // Chat is opening
        this.animateChatOpening();
      } else {
        // Chat is closing
        this.animateChatClosing();
      }
    },
  },

  methods: {
    // Messages handling
    sendMessage(message) {
      this.$emit("send-message", message);
    },
    toggleRecording() {
      this.$emit("toggle-recording");
    },
    cancelAudio() {
      this.$emit("cancel-audio");
    },
    toggleChatBot() {
      this.$emit("toggle-chatbot");
    },
    animateChatOpening() {
      this.$nextTick(() => {
        // Assuming .chat-body and .chat-footer are the elements to animate
        const chatBody = this.$refs.chatBody;
        const chatFooter = this.$refs.chatFooter;

        // Set initial styles for animation start state
        chatBody.style.display = 'none';
        chatFooter.style.display = 'none';

        // Start the animation for the chat container height
        this.$el.style.height = '70vh';

        // After a delay (to sync with the container height animation), show chat body and footer
        setTimeout(() => {
          chatBody.style.display = '';
          chatFooter.style.display = '';
          chatBody.style.opacity = '0';
          chatFooter.style.opacity = '0';

          // Fade in the chat body and footer
          chatBody.style.transition = 'opacity 0.5s ease';
          chatFooter.style.transition = 'opacity 0.5s ease';
          chatBody.style.opacity = '1';
          chatFooter.style.opacity = '1';
        }, 500); 
      });
    },
    animateChatClosing() {
      // Assuming .chat-body and .chat-footer are the elements to animate
      const chatBody = this.$refs.chatBody.$el; 
      const chatFooter = this.$refs.chatFooter.$el;

      // Fade out the chat body and footer with a transition
      chatBody.style.transition = 'opacity 0.5s ease';
      chatFooter.style.transition = 'opacity 0.5s ease';
      chatBody.style.opacity = '0';
      chatFooter.style.opacity = '0';

      // Wait for the fade-out transition to finish before minimizing the container
      setTimeout(() => {
        this.$el.classList.add('minimized');
      }, 500); 
    },
  }
};
</script>

- **`ChatFooter.vue`**: Ch·ª©a c√°c input ƒë·ªÉ g·ª≠i tin nh·∫Øn v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn.
Code trong file ChatFooter.vue: 
<template>
  <div class="card-footer card-chat-footer">
    <!-- <suggested-questions
      :questions="questions"
      @select-suggested-question="selectSuggestedQuestion"
    ></suggested-questions> -->

    <div class="input-group">
      <message-input
        v-model="newMessage"
        :isRecordingFlag="isRecordingFlag"
        :recordedVoiceURL="recordedVoiceURL"
        :msgPlaceholder="config.msgPlaceholder"
        :timeRecorded="timeRecorded"
        @send-message="sendMessage"
      >
      </message-input>
      <div class="input-group-append">
        <input-buttons
          v-model="newMessage"
          :isRecordingFlag="isRecordingFlag"
          :recordedVoiceURL="recordedVoiceURL"
          @cancel-audio="cancelAudio"
          @toggle-recording="toggleRecording"
          @send-message="sendMessage"
        ></input-buttons>
      </div>
    </div>
  </div>
</template>

<script>
import InputButtons from "./InputButtons.vue";
import MessageInput from "./MessageInput.vue";

export default {
  name: "ChatFooter",
  props: {
    isRecordingFlag: {
      type: Boolean,
      required: true,
    },
    recordedVoiceURL: {
      type: String,
      default: null,
    },
    timeRecorded: {
      type: Number,
      required: true,
    },
    config: {
      type: Object,
      required: true,
    },
  },
  components: {
    InputButtons,
    MessageInput,
  },
  data() {
    return {
      newMessage: "",
    };
  },
  methods: {
    sendMessage(message) {
      this.$emit("send-message", message);
    },
    cancelAudio() {
      this.$emit("cancel-audio");
    },
    toggleRecording() {
      this.$emit("toggle-recording");
    },
  },
};
</script>

- **`ChatHeader.vue`**: Hi·ªÉn th·ªã ti√™u ƒë·ªÅ c·ªßa chat v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn nh∆∞ toggle hands-free v√† minimize.
Code trong file ChatHeader.vue: 
<template>
  <div class="card-header card-chat-header msg_head" :class="{ 'minimized-header': isMinimized }">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div v-show="!isMinimized">
        <img :src="ImageHeader" class="user_img">
        <span class="user_info_maximized">{{ config.title }}</span>
      </div>
      <div class="user_info_minimized" v-show="isMinimized">
        <span>Talk to our virtual assistant</span>
      </div>
      <button v-show="!isMinimized" @click="$emit('toggle-handsfree')" class="btn-minimize ml-auto" :style="handsFreeFlag? 'background-color: rgba(0, 0, 0, 0.2); radius-border: 20%;' : ''">
        <img src='@/assets/handsfree.svg' alt="Hands-free">
      </button>
      <button @click="$emit('toggle-chatbot')" class="btn-minimize ml-auto">
        <img :src="isMinimized ? 'maximize_icon.svg' : 'minimize_icon.svg'" alt="Toggle">
      </button>
    </div>
  </div>
</template>

<script>


export default {
  name: "ChatHeader",
  props: {
    ImageHeader: {
      type: String,
      required: true,
    },
    config: {
      type: Object,
      required: true,
    },
    isMinimized: {
      type: Boolean,
      required: true,
    },
    handsFreeFlag: {
      type: Boolean,
      required: true,
    },
  },
};
</script>


- **`InputButtons.vue`**: Ch·ª©a c√°c n√∫t ƒë·ªÉ g·ª≠i tin nh·∫Øn, ghi √¢m v√† x√≥a √¢m thanh ƒë√£ ghi.
Code trong file InputButtons.vue:
<template>
  <div class="button-container">
    <div class="btn-group">
      <div v-if="recordedVoiceURL" class="input-btn" @click="cancelAudio">
        <vue-feather type="trash-2" size="16"></vue-feather>
      </div>
      <div class="input-btn" @click="toggleRecording" v-if="!isRecordingFlag">
        <vue-feather type="mic" size="16"></vue-feather>
      </div>
      <div class="input-btn" @click="toggleRecording" v-if="isRecordingFlag">
        <vue-feather type="pause" size="16"></vue-feather>
      </div>
      <div class="input-btn" @click="sendMessage(value)" v-if="recordedVoiceURL">
        <vue-feather type="navigation" size="16"></vue-feather>
      </div>
    </div>
    
  </div>
</template>

<script>
import VueFeather from "vue-feather";

export default {
  name: "InputButtons",
  model: {
    prop: "newMessage",
    event: "update:newMessage",
  },
  components: {
    VueFeather,
  },
  props: {
    isRecordingFlag: {
      type: Boolean,
      required: true,
    },
    recordedVoiceURL: {
      type: String,
      default: null,
    },
  },
  methods: {
    cancelAudio() {
      this.$emit("cancel-audio");
    },
    toggleRecording() {
      this.$emit("toggle-recording");
    },
    sendMessage(message) {
    this.$emit("update:newMessage", message);
    this.$emit("send-message", message);
    },
  },
};
</script>
- **`MessageInput.vue`**: Input ƒë·ªÉ ng∆∞·ªùi d√πng nh·∫≠p tin nh·∫Øn, h·ªó tr·ª£ ghi √¢m v√† ph√°t l·∫°i √¢m thanh.
Code trong file MessageInput.vue: 
<template>
  <textarea
    v-if="(!isRecordingFlag) && (recordedVoiceURL==null)"
    name=""
    v-model="messageToBeSent"
    class="form-control type_msg"
    :placeholder="msgPlaceholder"
    :disabled="isRecordingFlag"
    @keyup.enter="sendMessage(messageToBeSent)"
    style="resize:none;"
  ></textarea>
  <span class="form-control type_msg recording-input" v-if="isRecordingFlag"
    > {{ formatTime(timeRecorded) }}
  </span>
  <audio 
    class="form-control type_msg recording-input"
    v-if="recordedVoiceURL" :src="recordedVoiceURL" controls>
  </audio>
</template>

              
<script>

export default {
  name: "MessageInput",
  model: {
    prop: "newMessage",
    event: "update:newMessage",
  },
  props: {
    isRecordingFlag: {
      type: Boolean,
      required: true,
    },
    recordedVoiceURL: {
      type: String,
      default: null,
    },
    msgPlaceholder: {
      type: String,
      required: true,
    },
    timeRecorded: {
      type: Number,
      required: true,
    },
  },
  emits: ["send-message", "update:newMessage",],
  data() {
    return {
      messageToBeSent: "",
    } 
  },
  methods: {
    sendMessage(message) {
      this.$emit("update:newMessage", message);
      this.$emit("send-message", message);
      this.messageToBeSent = "";
    },
    formatTime(milliseconds) {
      let totalSeconds = Math.floor(milliseconds / 1000);
      let minutes = Math.floor(totalSeconds / 60);
      let seconds = totalSeconds % 60;
      let formattedTime = `${minutes.toString().padStart(2, "0")}:${seconds
        .toString()
        .padStart(2, "0")}`;
      console.log(formattedTime)
      return formattedTime;
    },
  },
};
</script>

- **`TypingMessage.vue`**: Hi·ªÉn th·ªã tr·∫°ng th√°i "ƒëang g√µ" c·ªßa bot ho·∫∑c ng∆∞·ªùi d√πng.
Code trong file TypingMessage.vue: 
<template>
    <div :class="messageClass">
      <div v-if="isBot" class="img_cont_msg">
        <img :src="profilePic" class="user_img_msg">
      </div>
      <div :class="containerClass">
        <div class="typing-load-msg" :class="{ 'fadeInSlideRight': animate }" style="text-align:left">
          <span style="font-weight:normal" v-html="message"></span>
        </div>
      </div>
    </div>
  </template>
  
  <script>
  export default {
    name: "TypingMessage",
    props: {
      profilePic: {
        type: String,
        required: true,
      },
      message: {
        type: String,
        required: true,
      },
      isBot: {
        type: Boolean,
        required: true,
      },
    },
    data() {
      return {
        animate: true,
      }
    },
    watch: {
      message() {
        this.animate = false;
        this.$nextTick(() => { // Wait for the DOM update
          void this.$el.offsetWidth; // Force a reflow
          this.animate = true;
        });
      },
    },
    computed: {
      messageClass() {
        return this.isBot ? "d-flex justify-content-start mb-4" : "d-flex justify-content-end mb-4";
      },
      containerClass() {
        return this.isBot ? "container-assistant-msg" : "container-user-msg"
      }
    },
  };
  </script>
##### 3.3.2. `UserMessage.vue`
- **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng.
- **N·ªôi dung**: Ch·ª©a n·ªôi dung tin nh·∫Øn v√† ƒë·ªãnh d·∫°ng cho ph√π h·ª£p v·ªõi giao di·ªán.
- Code trong file UserMessage.vue: 
<template>
  <div class="d-flex justify-content-end mb-4">
    <div class="container-user-msg">
      {{ message.content }}
    </div>
  </div>
</template>

<script>
export default {
  name: "UserMessage",
  props: {
    message: {
      type: Object,
      required: true,
    },
  },
};
</script>

### 4. T√≥m t·∫Øt
Folder `frontend` ch·ª©a t·∫•t c·∫£ c√°c file c·∫ßn thi·∫øt ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng cho ·ª©ng d·ª•ng. C√°c file n√†y bao g·ªìm c·∫•u h√¨nh, m√£ ngu·ªìn, v√† t√†i nguy√™n tƒ©nh, gi√∫p t·∫°o ra m·ªôt tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√† v√† t∆∞∆°ng t√°c. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä



Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `components` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `components`

```
frontend/src/components/
‚îú‚îÄ‚îÄ Chatbot/
‚îÇ   ‚îú‚îÄ‚îÄ BotMessage.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatBody.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatContainer.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatFooter.vue
‚îÇ   ‚îú‚îÄ‚îÄ ChatHeader.vue
‚îÇ   ‚îú‚îÄ‚îÄ InputButtons.vue
‚îÇ   ‚îú‚îÄ‚îÄ MessageInput.vue
‚îÇ   ‚îú‚îÄ‚îÄ TypingMessage.vue
‚îÇ   ‚îî‚îÄ‚îÄ UserMessage.vue
‚îú‚îÄ‚îÄ Common/
‚îÇ   ‚îú‚îÄ‚îÄ FoodItem.vue
‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.vue
‚îÇ   ‚îî‚îÄ‚îÄ general_config.json
‚îú‚îÄ‚îÄ NavBar/
‚îÇ   ‚îî‚îÄ‚îÄ NavBar.vue
‚îú‚îÄ‚îÄ Restaurants/
‚îÇ   ‚îú‚îÄ‚îÄ RestaurantFullView.vue
‚îÇ   ‚îú‚îÄ‚îÄ RestaurantPreviewCard.vue
‚îÇ   ‚îî‚îÄ‚îÄ RestaurantsContainer.vue
‚îî‚îÄ‚îÄ ShoppingCart/
    ‚îî‚îÄ‚îÄ ShoppingCart.vue
```

### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. Th∆∞ m·ª•c `Chatbot/`
Ch·ª©a c√°c component li√™n quan ƒë·∫øn chatbot.

- **`BotMessage.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã tin nh·∫Øn t·ª´ bot, bao g·ªìm h√¨nh ·∫£nh v√† n·ªôi dung tin nh·∫Øn.
  - **N·ªôi dung**: Cung c·∫•p ch·ª©c nƒÉng ph√°t audio cho tin nh·∫Øn.

- **`ChatBody.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã to√†n b·ªô n·ªôi dung chat, bao g·ªìm tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng v√† bot.
  - **N·ªôi dung**: Qu·∫£n l√Ω danh s√°ch tin nh·∫Øn v√† hi·ªÉn th·ªã ch√∫ng.

- **`ChatContainer.vue`**
  - **M·ª•c ƒë√≠ch**: Component ch√≠nh cho giao di·ªán chat, bao g·ªìm header, body v√† footer.
  - **N·ªôi dung**: T·ªï ch·ª©c c√°c ph·∫ßn c·ªßa chat v√† qu·∫£n l√Ω tr·∫°ng th√°i.

- **`ChatFooter.vue`**
  - **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c input ƒë·ªÉ g·ª≠i tin nh·∫Øn v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn.
  - **N·ªôi dung**: Qu·∫£n l√Ω vi·ªác g·ª≠i tin nh·∫Øn v√† c√°c h√†nh ƒë·ªông li√™n quan.

- **`ChatHeader.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã ti√™u ƒë·ªÅ c·ªßa chat v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn nh∆∞ toggle hands-free v√† minimize.
  - **N·ªôi dung**: Cung c·∫•p giao di·ªán cho header c·ªßa chat.

- **`InputButtons.vue`**
  - **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c n√∫t ƒë·ªÉ g·ª≠i tin nh·∫Øn, ghi √¢m v√† x√≥a √¢m thanh ƒë√£ ghi.
  - **N·ªôi dung**: Qu·∫£n l√Ω c√°c h√†nh ƒë·ªông li√™n quan ƒë·∫øn vi·ªác nh·∫≠p tin nh·∫Øn.

- **`MessageInput.vue`**
  - **M·ª•c ƒë√≠ch**: Input ƒë·ªÉ ng∆∞·ªùi d√πng nh·∫≠p tin nh·∫Øn, h·ªó tr·ª£ ghi √¢m v√† ph√°t l·∫°i √¢m thanh.
  - **N·ªôi dung**: Qu·∫£n l√Ω vi·ªác nh·∫≠p tin nh·∫Øn v√† hi·ªÉn th·ªã tr·∫°ng th√°i ghi √¢m.

- **`TypingMessage.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã tr·∫°ng th√°i "ƒëang g√µ" c·ªßa bot ho·∫∑c ng∆∞·ªùi d√πng.
  - **N·ªôi dung**: Cung c·∫•p giao di·ªán cho tr·∫°ng th√°i g√µ tin nh·∫Øn.

- **`UserMessage.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng.
  - **N·ªôi dung**: Ch·ª©a n·ªôi dung tin nh·∫Øn v√† ƒë·ªãnh d·∫°ng cho ph√π h·ª£p v·ªõi giao di·ªán.

#### 2.2. Th∆∞ m·ª•c `Common/`
Ch·ª©a c√°c component v√† c·∫•u h√¨nh chung.

- **`FoodItem.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã th√¥ng tin v·ªÅ m√≥n ƒÉn, bao g·ªìm h√¨nh ·∫£nh, t√™n, m√¥ t·∫£ v√† gi√°.
  - **N·ªôi dung**: Cung c·∫•p ch·ª©c nƒÉng th√™m v√†o gi·ªè h√†ng v√† ƒëi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng m√≥n ƒÉn.
  - Code trong file FoodItem.vue:
  <template>
  <div class="food-item">
    <img  @error="onImageError" :src="!(food.image==null)? food.image : '@/assets/food-placeholder.png'" class="food-img" alt="Food Image" />
    <div class="food-details">
      <h4 class="food-name">{{ food.name }}</h4>
      <p class="restaurant-name" v-if="view=='shoppingcart'">{{ food.restaurant.name}}</p>
      <p class="food-description" v-if="view=='restaurant'">{{ food.description }}</p>
      <p class="food-price"> Item(s) price: {{ parseFloat((food.price * food.quantity).toFixed(2)) }} $</p>
    </div>
    <div class="food-actions">
      <div class="quantity-control">
        <input class="quantity-input" type="number" v-model.number="food.quantity" min="1" readonly />
        <button class="quantity-btn" @click="decrementQuantity">-</button>
        <button class="quantity-btn" @click="incrementQuantity">+</button>
      </div>
      <button v-if="view=='restaurant'" class="add-to-cart-btn" @click="addToCart">Add</button>
      <button v-if="view=='shoppingcart'" class="add-to-cart-btn" @click="removeFromCart">Remove</button>
    </div>
  </div>
</template>
  
  <script>
  export default {
    props: {
      food: {
        type: Object,
        required: true,
      },
      view: {
        type: String,
        default: "restaurant",
      },
    },
    data() {
      return {
        quantity: this.food.quantity,
      };
    },
    methods: {
      registerAction(msg) {
        this.$emit("register-action", msg)
      },
      addToCart() {
        this.$emit("add-to-cart", this.food);
      },
      removeFromCart() {
        this.$emit("remove-from-cart", { food: this.food });
      },
      incrementQuantity() {
        this.food.quantity++;
        this.registerAction("incremented the amount of food " + this.food.name + " to " + this.food.quantity + " items (in the restaurant page, not in the shopping cart)")
      },
      decrementQuantity() {
        if (this.food.quantity > 1) {
          this.food.quantity--;
          this.registerAction("decremented the amount of food " + this.food.name + " to " + this.food.quantity + " items (in the restaurant page, not in the shopping cart)")
        }
      },
      onImageError(event) {
        event.target.src = '@/assets/food-placeholder.png';
      }
    },
  };
  </script>

- **`LoadingSpinner.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã m·ªôt spinner khi ƒëang t·∫£i d·ªØ li·ªáu.
  - **N·ªôi dung**: Cung c·∫•p giao di·ªán cho spinner v·ªõi chi·ªÅu cao v√† chi·ªÅu r·ªông c√≥ th·ªÉ t√πy ch·ªânh.
  - Code trong file LoadingSpinner.vue: 
  <template>
    <div class="loading-spinner-container">
        <div class="loading-spinner" :style="{ height: spinnerHeight, width: spinnerWidth }"></div>
    </div>
</template>

  <script>
  export default {
    name: 'LoadingSpinner',
    props: {
      height: {
        type: String,
        default: '36px',
      },
      width: {
        type: String,
        default: '36px',
      },
    },
    computed: {
      spinnerHeight() {
        return this.height;
      },
      spinnerWidth() {
        return this.width;
      },
    },
  };
  </script>

#### 2.3. Th∆∞ m·ª•c `NavBar/`
Ch·ª©a component cho thanh ƒëi·ªÅu h∆∞·ªõng.

- **`NavBar.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã thanh ƒëi·ªÅu h∆∞·ªõng cho ·ª©ng d·ª•ng.
  - **N·ªôi dung**: Bao g·ªìm logo, ti√™u ƒë·ªÅ v√† gi·ªè h√†ng.
  - N·ªôi dung code : 
  <template>
    <header class="navbar navbar-dark sticky-top">
        <div class="nav navbar pt-2">
            <div class="navbar-brand shadow-none d-flex align-items-center">
                <img class="navbar-logo" src="@/assets/favicon.png" />
                <h2 class="navbar-title mb-0">
                  Discover restaurants and order food online using a virtual assistant 
                </h2>
            </div>
        </div>
        <div class="shopping-cart" @click="$emit('open-cart')">
            <span v-if="cartItemCount" class="cart-item-count">{{ cartItemCount }}</span>
            <img class="shopping-cart-logo" src="@/assets/shopping-cart-icon.png" alt="Shopping Cart" />
        </div>
    </header>
</template>

<script>
import "../styles/navbar.css"
import "../styles/shoppingcart.css"

export default {
  name: "NavBar",
  props: {
    shoppingCart: {
      type: Array,
      default: () => [],
    },
  },
  computed: {
    cartItemCount() {
      return this.shoppingCart.length;
    },
  },
};
</script>

#### 2.4. Th∆∞ m·ª•c `Restaurants/`
Ch·ª©a c√°c component li√™n quan ƒë·∫øn nh√† h√†ng.

- **`RestaurantFullView.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã th√¥ng tin chi ti·∫øt v·ªÅ m·ªôt nh√† h√†ng.
  - **N·ªôi dung**: Bao g·ªìm m√¥ t·∫£ v√† danh s√°ch m√≥n ƒÉn c·ªßa nh√† h√†ng.
  - N·ªôi dung code: 
  <template>
  <div v-if="restaurant" class="restaurant-full-view">
    <div class="sticky-top">
      <button class="go-back-btn" @click="goBack">Return</button>
      <h2>{{ restaurant.name }}</h2>
      <img  @error="onImageError" :src="!(restaurant.image==null)? restaurant.image : '@/assets/restaurant.png'" class="restaurant-card-img-fullview rounded" alt="Restaurant Image" />
      <div class="description-container">
        <p>{{ restaurant.description }}</p>
      </div>
    </div>
    
    <div class="food-list">
      <food-item
        v-for="(food, index) in this.foods"
        :key="index"
        :food="food"
        @add-to-cart="addToCart"
        @register-action="registerAction"
      ></food-item>
    </div>
  </div>
</template>
  

<script>

import FoodItem from "../Common/FoodItem.vue";
import axios from "axios";

export default {
  components: {
    FoodItem,
  },
  props: {
    restaurant: {
      type: Object,
      required: true,
    },
  },
  data(){
    return {
      baseApiUrl: import.meta.env.VITE_APP_API_URL + "/api",
      foods: []
    }
  },
  methods: {
    registerAction(msg) {
      this.$emit("register-action", msg)
    },
    getFoods(restaurant) {
      axios.get(this.baseApiUrl + "/restaurants/" + `${restaurant.uuid}` + "/foods")
        .then(response => {
          this.foods = [];
          const data = response.data;
          for (let i = 0; i < data.length; i++) {
            this.foods.push({
              name: data[i].name,
              description: data[i].description,
              price: data[i].price,
              quantity: 1,
              restaurant: {
                restaurant
              },
              image: data[i].image,
              // image: null,
              uuid: data[i].id,
            });
          }
        })
        .catch(error => {
          console.log(error);
        });
    },
    addToCart(item){
      this.$emit("add-to-cart", item)
    },
    goBack() {
      this.$emit("go-back");
    },
    onImageError(event) {
      event.target.src = 'restaurant.png';
    }
  },
  // mounted() {
  //   this.getFoods(this.restaurant)
  // }
};

  
</script>

- **`RestaurantPreviewCard.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã th√¥ng tin t√≥m t·∫Øt v·ªÅ m·ªôt nh√† h√†ng.
  - **N·ªôi dung**: Cung c·∫•p giao di·ªán cho danh s√°ch nh√† h√†ng.
  - N·ªôi dung code: 
  <template>
  <div
    class="restaurant-card"
    @click="$emit('restaurant-clicked', restaurant.uuid)"
  >
    <div class="restaurant-card-item" :style="{'--delay': idx + 1}">
      <img :src="restaurant.image" @error="onImageError" class="restaurant-card-img-top rounded" alt="Restaurant Image" />
      <div class="restaurant-card-body">
        <h5 class="restaurant-card-title">{{ restaurant.name }}</h5>
        <p class="restaurant-card-text">
          <span v-if="restaurant.description.length > 30">
            {{ restaurant.description.substring(0, 30) }}... 
            <!-- <span class="show-more" @click.stop="showMore = true">Show more</span> -->
          </span>
          <span v-else>{{ restaurant.description }}</span>
          <span v-if="showMore">{{ restaurant.description.substring(100) }}</span>
        </p>
      </div>
    </div>
  </div>
</template>

<script>

export default {
  props: {
    restaurant: {
      type: Object,
      required: true,
    },
    idx: {
      type: Number,
      required: true,
    }
  },
  methods: {
    onImageError(event) {
      event.target.src = 'restaurant.png';
    }
  }
};
</script>

- **`RestaurantsContainer.vue`**
  - **M·ª•c ƒë√≠ch**: Qu·∫£n l√Ω danh s√°ch c√°c nh√† h√†ng v√† hi·ªÉn th·ªã ch√∫ng.
  - **N·ªôi dung**: Bao g·ªìm c√°c component cho xem tr∆∞·ªõc v√† xem chi ti·∫øt nh√† h√†ng.
  - <template>
  <div class="restaurants-container">
    <div v-if="!selectedRestaurant" class="row">
      <b class="sticky-top" style="background:white;">Restaurants nearby your address</b>
      <restaurant-preview-card
        v-for="(restaurant, index) in restaurants"
        :key="restaurant.uuid"
        :restaurant="restaurant"
        :idx="index"
        @restaurant-clicked="selectRestaurant"
        class="col-md-4 col-lg-3"
      ></restaurant-preview-card>
    </div>
    <restaurant-full-view
      ref="restaurantFullView"
      v-show="selectedRestaurant"
      :restaurant="selectedRestaurant"
      @go-back="deselectRestaurant"
      @add-to-cart="addToCart"
      @register-action="registerAction"
    ></restaurant-full-view>
  </div>
</template>

  <script>
  import RestaurantPreviewCard from "./RestaurantPreviewCard.vue";
  import RestaurantFullView from "./RestaurantFullView.vue"
  import "../styles/restaurants.css"
  import axios from "axios";

  export default {
    components: {
      RestaurantPreviewCard,
      RestaurantFullView
    },
    data() {
      return {
        selectedRestaurant: null,
        baseApiUrl: import.meta.env.VITE_APP_API_URL + "/api",
        restaurants: []
      };
    },
    methods: {
      registerAction(msg) {
        this.$emit("register-action", msg)
      },
      addToCart(item){
        this.$emit("add-to-cart", item)
      },
      selectRestaurant(uuid) {
        let flag_register_new_action = true;
        if (this.selectedRestaurant) {
          if (this.selectedRestaurant.uuid === uuid) {
            flag_register_new_action = false;
          }
        }

        this.selectedRestaurant = this.restaurants.find(
          (restaurant) => restaurant.uuid === uuid
        );
        if (this.$refs.restaurantFullView) {
          this.$refs.restaurantFullView.getFoods(this.selectedRestaurant);
        }
        if (flag_register_new_action){
          this.registerAction("opened the restaurant page " + this.selectedRestaurant.name + " with restaurant_uuid=" + this.selectedRestaurant.uuid)
        }
      },
      deselectRestaurant() {
        this.registerAction("closed the restaurant page " + this.selectedRestaurant.name)
        this.selectedRestaurant = null;
      },
      async getRestaurants() {
        try {
          const response = await axios.get(`${this.baseApiUrl}/restaurants`);
          this.restaurants = response.data.map(restaurant => ({
            name: restaurant.name,
            description: restaurant.description,
            uuid: restaurant.id,
            image: restaurant.image ? `${import.meta.env.VITE_APP_API_URL}${restaurant.image}` : null
          }));
        } catch (error) {
          console.error('Error fetching restaurants:', error);
        }
      },
    },
    mounted() {
      this.getRestaurants();
    },
  };
  </script>


#### 2.5. Th∆∞ m·ª•c `ShoppingCart/`
Ch·ª©a component cho gi·ªè h√†ng.

- **`ShoppingCart.vue`**
  - **M·ª•c ƒë√≠ch**: Hi·ªÉn th·ªã gi·ªè h√†ng c·ªßa ng∆∞·ªùi d√πng.
  - **N·ªôi dung**: Qu·∫£n l√Ω danh s√°ch m√≥n ƒÉn trong gi·ªè h√†ng v√† t·ªïng gi√° ti·ªÅn.
  - N·ªôi dung code: 
  <template>
  <div class="shopping-cart-container">
    <div class="shopping-cart-header sticky-top">
      <button class="close-btn" @click="closeFrame">
        <span>&times;</span>
      </button>
      <h3>Shopping Cart</h3>
      <hr/>
    </div>
    <div class="shopping-cart-body">
      <food-item
      v-for="(item, index) in shoppingCart"
      :key="index"
      :food="item"
      :view="'shoppingcart'"
      @remove-from-cart="removeFromCart"
      :class="{ 'fade-away': item.fadeAway }"
      @register-action="registerAction"
    ></food-item>
    </div>
    <div v-if="shoppingCart.length">
      <hr/>
      <div class="shopping-cart-footer sticky-bottom" v-if="!isLoading && !orderStatus">
        <p class="total-price-container">Total Price: {{ totalPrice.toFixed(2) }} $</p>
        <button @click="submitOrder" class="order-btn">Order</button>
      </div>
    </div>

    
    <div class="shopping-cart-footer sticky-bottom" v-if="isLoading || orderStatus" style="animation: fadeInSlideUp 0.5s ease forwards">
      <p>{{ this.placeholderMsg }}</p>
      <loading-spinner v-if="isLoading" ></loading-spinner>
    </div>
    
  </div>
</template>

  <script>
  import "../styles/shoppingcart.css"
  import FoodItem from "../Common/FoodItem.vue"
  import LoadingSpinner from "../Common/LoadingSpinner.vue"

  export default {
    components: {
      FoodItem,
      LoadingSpinner
    },    
    props: {
      shoppingCart: {
        type: Array,
        default: () => [],
      },
    },
    data() {
      return {
        isLoading: false,
        orderStatus: false,
        placeholderMsg: "Placing your order..."
      }
    },
    computed: {
      totalPrice() {
        return this.shoppingCart.reduce(
          (total, item) => total + item.price * item.quantity,
          0
        );
      },
    },
    methods: {
      registerAction(msg) {
        this.$emit("register-action", msg)
      },
      closeFrame() {
        this.$emit('close-cart')
        this.placeholderMsg = "Placing your order..."
        this.isLoading = false
        this.orderStatus = false
        
      },
      clearCart() {
        this.$emit('clear-shopping-cart')
      },
      removeFromCart(item) {
        this.$emit('remove-from-cart', item)
      },
      submitOrder() {
        this.isLoading = true;
        this.placeholderMsg = "Placing your order..."
        setTimeout(() => {
          this.isLoading = false;
          this.placeholderMsg = "Your order has been sent..."
          this.orderStatus = true // Sent order
          this.clearCart()
        }, 3000); // Simulate an API call with a 5-second delay
        this.placeholderMsg = "Place your order..."
        this.registerAction("placed the order as is")
      },
    // ...
    },
  };
  </script>

### 3. T√≥m t·∫Øt
Folder `components` ch·ª©a t·∫•t c·∫£ c√°c component c·∫ßn thi·∫øt ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng cho ·ª©ng d·ª•ng, bao g·ªìm c√°c ph·∫ßn li√™n quan ƒë·∫øn chatbot, nh√† h√†ng, gi·ªè h√†ng v√† c√°c th√†nh ph·∫ßn chung. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä


Ch·∫Øc ch·∫Øn r·ªìi! D∆∞·ªõi ƒë√¢y l√† m√¥ t·∫£ chi ti·∫øt c·∫•u tr√∫c v√† n·ªôi dung c·ªßa c√°c file trong folder `styles` c·ªßa project n√†y üìÅ

### 1. C·∫•u tr√∫c th∆∞ m·ª•c `styles`

```
frontend/src/components/styles/
‚îú‚îÄ‚îÄ chatbot.css
‚îú‚îÄ‚îÄ common.css
‚îú‚îÄ‚îÄ navbar.css
‚îî‚îÄ‚îÄ restaurants.css
‚îî‚îÄ‚îÄ shoppingcart.css
```

### 2. Chi ti·∫øt t·ª´ng file

#### 2.1. `chatbot.css`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c ki·ªÉu d√°ng cho giao di·ªán chatbot.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c ki·ªÉu cho container c·ªßa chatbot, bao g·ªìm v·ªã tr√≠, k√≠ch th∆∞·ªõc, v√† hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông.
  - C√°c ki·ªÉu cho c√°c th√†nh ph·∫ßn nh∆∞ card chat, header, v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn.
  - C√°c hi·ªáu ·ª©ng animation cho c√°c tr·∫°ng th√°i nh∆∞ "ƒëang g√µ" v√† "ƒëang t·∫£i".
  - N·ªôi dung code: 
  .chat-container {
  position: fixed;
  bottom: 2vh;
  right: 2vw;
  width: 30vw; 
  /* height:50vh; */
  z-index: 1050;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  transition: height 0.3s ease, transform 0.3s ease;

}

.chat-container.minimized {
  height: 50px;
  min-height: 50px;
  max-height: 50px;
  width: 80vw; 
  max-width: 300px;
  bottom: 2vh;
  right: 2vw; 
  box-shadow: none!important;
  background-color: transparent!important;
  transform: translateY(calc(100% - 50px));
}

.card-chat {
  display: flex;
  flex-direction: column;
  height: 70vh;
  width: 100%;
  min-height: 70vh;
  max-height: 70vh;
  border-radius: 20px 20px 5px 5px !important;
  border: none!important;
  overflow: hidden;
  transition: all 0.5s ease; 
  animation: fadeInSlideUp 1.3s ease forwards;
}

.card-chat.minimized {
  height: 100%; 
  overflow: hidden; 
  border: 0!important;
}

.card-chat-header {
border-radius: 20px 20px 0 0!important;
border-bottom: 0.5px solid #9090907d !important;
background-color: #ebebeb;
}

.minimized-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem; 
  background-color: #ebebeb; 
  cursor: pointer; 
}

.card-chat-header.minimized-header {
  padding: 5px;
  justify-content: center;
  border-radius: 20px 20px 0px 0px!important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);

}

.card-chat-footer {
border-radius: 0 0 10px 10px !important;
background-color: transparent;
border-top:  1px solid #3737373b !important;
padding-bottom: 15px;
}
  

.card-chat-body {
overflow-y: auto;
flex-grow:1;
background: #ffffff;
}

.card-chat-body, .card-chat-footer {
  transition: opacity 0.5s ease;
}
  
.msg_head {
position: relative;
display: flex;
justify-content: space-between;
align-items: center;
}

.user-message {
animation: fadeInSlideUp 0.3s ease forwards;
}

.container-assistant-msg {
position: relative;
margin-top: auto;
margin-bottom: auto;
margin-left: 10px;
border-radius: 18px 18px 18px 0px;
color: #212529;
background-color: #efefef;
padding: 10px;
padding-left: 20px;
padding-right: 20px;
position: relative;
font-size: 14px;
display: flex;
flex-direction: column;
max-width: 75%;
}

.container-user-msg {
margin-top: auto;
margin-bottom: auto;
margin-right: 10px;
border-radius: 18px 18px 0px 18px;
background: linear-gradient(to top right, rgba(188,0,0,255), rgba(201,39,93,255));
padding: 10px;
padding-left: 20px;
padding-right: 20px;
position: relative;
color:#ffffff;
font-size: 14px;
max-width: 75%;
}

.btn-minimize {
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 0;
  margin: 0;
  line-height: 1;
  width:2rem;
  height:2rem;
}

.btn-minimize img {
  width: 1.3rem; 
  height: 1.3rem; 
  -webkit-filter: invert(1.0);
          filter: invert(1);
}

.btn-minimize img:hover {
  background-color: rgba(0, 0, 0, 0.4);
  border-radius: 10%;
  background-size: 2rem;
}

.user_info_maximized {
  margin-left: 2vw;
  margin-top: auto;
  margin-bottom: auto;
  font-size: 14px!important;
  color: #ffffff;
}

.user_info_minimized {
  margin-left:2vw;
  margin-top: auto;
  margin-bottom: auto;
  font-size: 12px!important;
  color: #ffffff;
}

.audio-player {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2; 
}

.audio-control {
  width: 20px; 
  height: 20px; 
  cursor: pointer;
  border-radius: 50%;
  transition: all 0.3s ease;
  z-index: 3;
  margin-left:10px;

}

.audio-control.loading {
  animation: spin 2s linear infinite;
}

.audio-control.playing {
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#### 2.2. `common.css`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c ki·ªÉu d√°ng chung cho to√†n b·ªô ·ª©ng d·ª•ng.
- **N·ªôi dung**:
  - C√°c ki·ªÉu cho layout chung, bao g·ªìm flexbox v√† c√°c hi·ªáu ·ª©ng animation.
  - ƒê·ªãnh nghƒ©a c√°c ki·ªÉu cho c√°c th√†nh ph·∫ßn nh∆∞ loader, tin nh·∫Øn ƒëang g√µ, v√† c√°c hi·ªáu ·ª©ng fade-in.
  - C√°c ki·ªÉu cho c√°c th√†nh ph·∫ßn SVG v√† c√°c hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông.
  - N·ªôi dung code: 
  /* Styles */

.app-container {
  display: flex;
  flex-wrap: nowrap;
}

.svg-loader{
  display:flex;
  position: relative;
  align-content: space-around;
  justify-content: center;
  height: 20px;
  width: 20px;
  animation: fadeInSlideRight 0.6s ease forwards;
}

.loader-svg{
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  fill: none;
  stroke-width: 5px;
  stroke-linecap: round;
  stroke: rgb(64, 0, 148);
}
.loader-svg.bg{
  stroke-width: 8px;
  stroke: rgb(207, 205, 245);
}

.animate{
  stroke-dasharray: 242.6;
  animation: fill-animation 1s cubic-bezier(1,1,1,1) 0s infinite;
}

.typing-load-msg {
  margin: auto 0;
  width: auto;
  text-align: center;
}

.fadeInSlideRight {
  animation: fadeInSlideRight 0.6s ease forwards;
}

.card-file {
  display: flex;
  flex-direction: column;
  height: 70vh;
  min-height: 70vh;
  max-height: 70vh;
  border-radius: 10px !important;
  border: none;
  border: 1px solid #0000002d;
  animation: fadeInSlideUp 1.3s ease forwards;
  animation-delay: 0.4s;
  animation-fill-mode: both;
}

.card-file-header {
  border-radius: 10px 10px 0 0 !important;
  background-color: #ebebeb;
}

.file-header {
  font-size: 12px;
  font-weight: bold;
  color: #ffffff;
  margin-left:15px;
  left:10px;
  bottom:2px;
}

.input-btn {
  right: 5%;
  left: 5%;
  background-color: rgba(0, 0, 0, 0.36) !important;
  border-radius: 7px 7px !important;
  width:20px;
  height:20px;
  top: 0;
  margin-top: auto;
  color: white;
  bottom: 0;
  margin-left: 5px;
  margin-right: 5px;
  font-weight: bold;
  display: flex;
  padding-right: 2px;
  margin-bottom: auto;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  animation: fadeInSlideRight 0.4s ease forwards;
}

.input-btn:hover {
  background-color: rgba(0, 0, 0, 0.16) !important;
}

.input-group {
  position: relative;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 5px;
}

.input-group textarea {
  background-color: rgba(0,0,0,0.05);
  border-radius:5px;
  animation: fadeInSlideUp 0.4s ease forwards;
  /* height: 100%; */
}

.input-group textarea:focus{
  background-color: rgba(0,0,0,0.10);
}

.input-group .recording-input {
  background-color: rgba(0,0,0,0.10);
  border-radius:5px;
  animation: fadeInSlideUp 0.4s ease forwards;
}

.input-group-append {
  display: flex;
}

.type_msg {
  background-color: transparent;
  border-radius: 16px;
  border: 0 !important;
  color: #5e5e5e;
  overflow-y: auto;
  padding: 15px;
}

.type_msg:focus {
  background-color: transparent;
  box-shadow: none !important;
}

.user_img {
  height: 40px;
  width: 40px;

}

.user_img_msg {
  height: 40px;
  width: 40px;

}

.img_cont {
  position: relative;
  height: 50px;
  width: 50px;
  background-color: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50% !important;
}


.online_icon {
  position: absolute;
  height: 15px;
  width: 15px;
  background-color: #4cd137;
  border-radius: 50%;
  bottom: 0.0em;
  right: -0.1rem;
  border: 1.5px solid white;
}

.user_info {
  margin-top: auto;
  margin-bottom: auto;
  margin-left: 15px;
}

.user_info span {
  font-size: 16px;
  font-weight: bold;
  color: #ffffff;
}

.user_info p {
  font-size: 10px;
  color: rgba(20, 20, 20, 0.6);
}

.card-header{
  color:white;
  font-style: bold;
  border-radius: 10px;
  border: none;
  background: linear-gradient(to top right, rgba(188,0,0,255),  rgba(234,10,68,255));
}


.frame {
  position: absolute;
  background-color: #f9f9f9;
  max-width: 270px;
  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
  padding: 12px 16px;
  z-index: 1;
  left: 0;
  bottom: -50%;
  white-space: nowrap;
  border-radius: 5%;
  max-height: 330px;
  overflow-y: auto;
  animation: fadeInSlideLeft 0.3s ease forwards;
}


.button-container {
  display: flex;
  justify-content: space-between;
  margin-left:5px;
}

.loading-spinner-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  animation: fadeInSlideUp 0.3s ease forwards;
}

.loading-spinner {
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-radius: 50%;
  border-left-color: #09f;
  animation: spin 1s linear infinite;
}



/* Animations */
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes fadeOutSlideDown {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(10px);
  }
}

@keyframes waitFadeInSlideUp {
  0%, 30% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInSlideUp {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInSlideDown {
  0% {
    opacity: 0;
    transform: translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInSlideRight {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeInSlideLeft {
  0% {
    opacity: 0;
    transform: translateX(10px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@-webkit-keyframes sk-bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0)
  }
  40% {
    -webkit-transform: scale(1.0)
  }
}

@keyframes sk-bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }
  40% {
    -webkit-transform: scale(1.0);
    transform: scale(1.0);
  }
}

  
@keyframes fill-animation{
  0%{
    stroke-dasharray: 40 242.6;
    stroke-dashoffset: 0;
  }
  50%{
    stroke-dasharray: 141.3;
    stroke-dashoffset: -141.3;
  }
  100%{
    stroke-dasharray: 40 242.6;
    stroke-dashoffset: -282.6;
  }
}


@keyframes fadeAway {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

#### 2.3. `navbar.css`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c ki·ªÉu d√°ng cho thanh ƒëi·ªÅu h∆∞·ªõng (navbar).
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c ki·ªÉu cho navbar, bao g·ªìm m√†u n·ªÅn, v·ªã tr√≠, v√† ki·ªÉu ch·ªØ.
  - C√°c ki·ªÉu cho logo v√† ti√™u ƒë·ªÅ trong navbar.
  - C√°c hi·ªáu ·ª©ng hover cho c√°c th√†nh ph·∫ßn trong navbar.
  - N·ªôi dung code: 
  .navbar {
    display: flex;
    justify-content: space-between;
    background: linear-gradient(to bottom, rgba(255, 21, 21, 0.232), rgb(255,255,255));
    position:relative;
    max-height:20%;
    border-bottom: 1px solid #e5e6ea;
}

.nav {
    background: transparent;
    border-bottom: none;
}

.navbar-logo {
    height: 5vh;
    margin-left: 5vh;
}

.navbar-title{
    margin-top: 1.5vh;
    margin-left: 10px;
    font-size: 2vh;
    color:rgba(0, 0, 0, 0.5)
}


#### 2.4. `restaurants.css`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c ki·ªÉu d√°ng cho giao di·ªán danh s√°ch nh√† h√†ng.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c ki·ªÉu cho container c·ªßa danh s√°ch nh√† h√†ng, bao g·ªìm padding, margin v√† chi·ªÅu cao.
  - C√°c ki·ªÉu cho c√°c th·∫ª card hi·ªÉn th·ªã th√¥ng tin nh√† h√†ng, bao g·ªìm hi·ªáu ·ª©ng hover v√† animation.
  - C√°c ki·ªÉu cho ti√™u ƒë·ªÅ v√† m√¥ t·∫£ c·ªßa nh√† h√†ng.
  - N·ªôi dung code: 
  .restaurants-container {
  flex: 1; 
  margin-left: 5vh;
  padding-left: 10px;
  padding-right: 10px;
  height: 80vh;
  overflow-y: auto;
  overflow-x:hidden
}

.restaurants-container .row{
  margin-right: 5vw!important;
}


.restaurant-card {
  padding: 0px;
  margin-bottom: 5vh; 
  animation: fadeInSlideUp 1.3s ease forwards;
}

.restaurant-card-item {
  height: auto;
  padding-bottom: 10px;
  border-radius: 10px;
  box-shadow: 0 4px 7px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.4s ease;
  animation: fadeInSlideUp 0.3s ease forwards;
  animation-delay: calc((var(--delay) + 1) * 0.1s);
  animation-fill-mode: both;
}

.restaurant-card-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
cursor: pointer;
}


.restaurant-card-title {
text-decoration: underline ;
font-family: 'Roboto', sans-serif;
font-style: italic;
font-size: 14px; 
font-weight: 500;
margin-top:10%; 
margin-left: 10%;
margin-bottom: 0.5rem; 
}

.restaurant-card-text {
font-size: 12px; 
margin-left: 10%;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;  
overflow: hidden;
text-overflow: ellipsis;
}


/* Full view restaurant */
.restaurant-full-view {
  height: 65vh;
  position: relative;
  flex: 1;
  margin-top: 2vh;
  margin-right: 35vw!important;
  margin-left: 5vh;
  padding-left: 10px;
  padding-right: 10px;
  animation: fadeInSlideUp 0.4s ease forwards;
}

.go-back-btn {
  position: absolute;
  top: 0;
  right: 0;
  background: linear-gradient(to top right, rgba(188, 0, 0, 255), rgba(201, 39, 93, 255));
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.go-back-btn:hover {
  background: linear-gradient(to top right, rgba(201, 39, 93, 255), rgba(188, 0, 0, 255));
}

.restaurant-card-img-top.rounded {
  max-width: 150px; 
  width:100%;
  object-fit: cover;
  border-radius: 10px;
  display: block;
  margin: 0 auto; 
  margin-top:5%;
  height: 150px;
  width: 100%;
  object-fit: cover;
}

.restaurant-card-img-fullview.rounded {
  width: 100%;
  max-width: 250px;
  height: auto;
  width:auto;
  object-fit: cover;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
  height: 150px;
  width:200px;
  object-fit: cover;
}

.description-container {
  background-color: #f5f5f5; 
  border-radius: 10px; 
  padding: 16px; 
  margin-top: 16px; 
}

.description-container p {
  font-size: 16px; 
  line-height: 1.5; 
  margin: 0; 
}

/*  Food */
.food-list {
  max-height: 45vh; 
  overflow-y: auto; 
  margin-top: 16px; 
}

.food-item {
  display: flex;
  align-items: center;
  margin-bottom: 16px;
}

.food-img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 10px;
  margin-right: 16px;
}

.food-details {
  flex-grow: 1;
}

.food-description {
  color: #555; 
}

.food-actions {
  display: flex;
  flex-direction: column; 
  align-items: flex-end;
  margin-right: 10px;
}

.add-to-cart-btn {
  background: linear-gradient(to top right, rgba(188, 0, 0, 255), rgba(201, 39, 93, 255));
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 8px;
  margin-right:5px;
}

.add-to-cart-btn:hover {
  background: linear-gradient(to top right, rgba(201, 39, 93, 255), rgba(188, 0, 0, 255));
}

.quantity-control {
  display: flex;
  align-items: center;
}

.quantity-btn {
  background: linear-gradient(to top right, rgba(188, 0, 0, 255), rgba(201, 39, 93, 255));
  color: #fff;
  border: none;
  padding: 2px 4px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-left:3px;
}

.quantity-input {
  width: 34px;
  border: none;
  border-radius: 4px;
  background-color: #f5f5f5;
  color: #333;
  text-align: center;
  margin: 0 4px;
  font-size:7;
}

.restaurant-name {
  font-size: 12px;
  color: #555; 
}

.show-more {
  color: blue;
  cursor: pointer;
}



#### 2.5. `shoppingcart.css`
- **M·ª•c ƒë√≠ch**: Ch·ª©a c√°c ki·ªÉu d√°ng cho giao di·ªán gi·ªè h√†ng.
- **N·ªôi dung**:
  - ƒê·ªãnh nghƒ©a c√°c ki·ªÉu cho container c·ªßa gi·ªè h√†ng, bao g·ªìm v·ªã tr√≠, k√≠ch th∆∞·ªõc v√† hi·ªáu ·ª©ng animation.
  - C√°c ki·ªÉu cho c√°c th√†nh ph·∫ßn trong gi·ªè h√†ng nh∆∞ n√∫t ƒë√≥ng, ti√™u ƒë·ªÅ v√† t·ªïng gi√° ti·ªÅn.
  - C√°c hi·ªáu ·ª©ng hover cho c√°c n√∫t v√† c√°c th√†nh ph·∫ßn trong gi·ªè h√†ng.
  - N·ªôi dung code: 
  .shopping-cart {
    position: relative;
    cursor: pointer;
    padding: 2px;
    border-radius:15%;
    margin-right: 10px;
}

.shopping-cart-logo {
    display: block;
    border-radius: 25%;
    height: 3vh;
    width: 3vh;
    margin-left: 1.6vh;
    margin-right: 1.6vh;
}

.shopping-cart:hover {
    background: rgba(0,0,0,0.15);
}
  

.cart-item-count {
    position: relative;
    top: 6px;
    right: -12px;
    background-color: rgba(201,39,93,255);
    color: white;
    border-radius: 50%;
    width: 15px;
    height: 15px;
    font-size: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.shopping-cart-container {
    position: fixed;
    top: 3vh; 
    right: 4vw;
    z-index: 9999;
    width: 30vw;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    padding: 16px;
    animation: fadeInSlideUp 0.3s ease forwards;
    max-height:40vh;
}

.close-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    background: linear-gradient(to top right, rgba(188,0,0,255), rgba(201,39,93,255));
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 10px;
    line-height: 10px;
    text-align: center;
    cursor: pointer;
}

.close-btn:hover {
    background: rgba(188,0,0,0.75);
}

.order-btn {
    background: linear-gradient(to top right, rgba(188,0,0,255), rgba(201,39,93,255));
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 16px;
}

.order-btn:hover{
    background: rgba(188,0,0,0.75);
}

.total-price-container {
    font-weight: bold;
    font-size: 18px;
    margin-top: 16px;
  }


.shopping-cart-header {
    background: white;
}

.shopping-cart-body{
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 20vh;
}

.shopping-cart-footer {
    display: flex;
    background: white;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 18px;
    margin-top: 16px;
}

  
.fade-away {
    animation: fadeAway 0.5s forwards;
}


### 3. T√≥m t·∫Øt
Folder `styles` ch·ª©a t·∫•t c·∫£ c√°c file CSS c·∫ßn thi·∫øt ƒë·ªÉ ƒë·ªãnh d·∫°ng giao di·ªán ng∆∞·ªùi d√πng cho ·ª©ng d·ª•ng, bao g·ªìm c√°c ki·ªÉu cho chatbot, navbar, danh s√°ch nh√† h√†ng v√† gi·ªè h√†ng. N·∫øu b·∫°n c·∫ßn th√™m th√¥ng tin chi ti·∫øt v·ªÅ b·∫•t k·ª≥ file n√†o, h√£y cho t√¥i bi·∫øt nh√©! üòä




